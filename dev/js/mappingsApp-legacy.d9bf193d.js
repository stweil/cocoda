(function(t){function e(e){for(var o,i,c=e[0],l=e[1],s=e[2],p=0,d=[];p<c.length;p++)i=c[p],a[i]&&d.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={mappingsApp:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var u=l;r.push([1,"chunk-vendors","chunk-common"]),n()})({1:function(t,e,n){t.exports=n("4002")},4002:function(t,e,n){"use strict";n.r(e);var o=n("a026"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-dark color-primary-0-bg fontSize-normal",attrs:{id:"app"}},[n("div",{staticClass:"alertsContainer"},t._l(t.$store.state.alerts.alerts,function(e,o){return n("b-alert",{key:o,attrs:{variant:e.variant,show:e.countdown||!e.shouldCountdown,dismissible:!e.shouldCountdown,fade:""},on:{dismissed:function(n){return t.$store.commit({type:"alerts/setCountdown",alert:e,countdown:0})},"dismiss-count-down":function(n){return t.$store.commit({type:"alerts/setCountdown",alert:e,countdown:n})}}},[t._v("\n      "+t._s(e.text)+"\n    ")])}),1),t._v(" "),t.loading?n("loading-indicator-full"):t._e(),t._v(" "),t.configLoaded?n("div",{attrs:{id:"main"}},[n("b-card",{attrs:{"no-body":""}},[n("b-tabs",{attrs:{card:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("b-tab",{attrs:{disabled:!t.loading&&0==t.concordances.length,title:"Concordances"}},[n("div",{staticStyle:{display:"flex"}},t._l(t.concordanceTableFields,function(e){return n("div",{key:e.key,style:"padding: 0px 10px 0px 0px; flex: 0 0 "+e.width},["from"==e.key?n("b-input",{staticStyle:{width:"55%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:"from"},model:{value:t.filter.from,callback:function(e){t.$set(t.filter,"from",e)},expression:"filter.from"}}):t._e(),t._v(" "),"to"==e.key?n("b-input",{staticStyle:{width:"75%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:"to"},model:{value:t.filter.to,callback:function(e){t.$set(t.filter,"to",e)},expression:"filter.to"}}):t._e(),t._v(" "),"creator"==e.key?n("b-input",{staticStyle:{width:"80%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:"creator"},model:{value:t.filter.creator,callback:function(e){t.$set(t.filter,"creator",e)},expression:"filter.creator"}}):t._e(),t._v(" "),null!=t.filter[e.key]?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:"clear filter",delay:t.$util.delay.medium},expression:"{ title: 'clear filter', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button d-none d-md-inline-block",attrs:{icon:"times"},on:{click:function(n){t.filter[e.key]=""}}},[t._v("\n                x\n              ")]):t._e(),t._v(" "),"from"==e.key?n("b-button",{staticClass:"d-none d-lg-inline-block",attrs:{variant:"link",size:"sm"},on:{click:function(e){var n;n=[t.filter.to,t.filter.from],t.filter.from=n[0],t.filter.to=n[1]}}},[n("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1):t._e()],1)}),0),t._v(" "),n("flexible-table",{attrs:{fields:t.concordanceTableFields,items:t.concordanceTableItems},scopedSlots:t._u([{key:"download",fn:function(e){var o=e.value;return n("span",{},t._l(o,function(e,o){return n("span",{key:o},[t.nameOfDistribution(e)?n("a",{attrs:{href:e.download}},[t._v("\n                  "+t._s(t.nameOfDistribution(e))+"\n                ")]):t._e()])}),0)}},{key:"mappings",fn:function(e){var o=e.value;return n("span",{},[t._v("\n              "+t._s((parseInt(o)||"?").toLocaleString())+"\n            ")])}},{key:"actions",fn:function(e){var o=e.item;return n("span",{},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:"Show Mappings",delay:t.$util.delay.medium},expression:"{ title: 'Show Mappings', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"external-link-square-alt"},on:{click:function(e){return t.showMappingsForConcordance(o.concordance)}}})],1)}}],null,!1,1578646689)}),t._v(" "),n("div",{staticStyle:{display:"flex"}},[n("p",{staticStyle:{"font-weight":"bold",flex:"1"}},[t._v("\n              "+t._s(t.concordanceTableItems.length)+" concordances\n            ")]),t._v(" "),n("p",{staticStyle:{"text-align":"right","font-weight":"bold"}},[t._v("\n              Total: "+t._s(t.concordanceTableItems.reduce(function(t,e){return t+parseInt(e.mappings)||0},0).toLocaleString())+"\n            ")])]),t._v(" "),n("p",[t._v("\n            The list of concordances is "),n("a",{attrs:{href:t.concordancesUrl+"?download=ndjson"}},[t._v("also available in JSKOS format")]),t._v(".\n          ")])],1),t._v(" "),n("b-tab",{attrs:{title:"Search Mappings"}},[n("b-container",{staticClass:"search"},[n("b-row",[n("b-col",{staticClass:"label",attrs:{cols:"3"}},[t._v("\n                Source\n              ")]),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{state:""==t.sourceScheme?null:null!=t.fromScheme,type:"text",placeholder:"scheme"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClicked(e)}},model:{value:t.sourceScheme,callback:function(e){t.sourceScheme=e},expression:"sourceScheme"}})],1),t._v(" "),n("b-col",{attrs:{cols:"4"}},[n("b-form-input",{attrs:{type:"text",placeholder:"notation"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClicked(e)}},model:{value:t.sourceNotation,callback:function(e){t.sourceNotation=e},expression:"sourceNotation"}})],1),t._v(" "),n("b-col",{attrs:{cols:"2"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.swapClicked}},[n("font-awesome-icon",{attrs:{icon:"long-arrow-alt-down"}}),t._v(" "),n("font-awesome-icon",{attrs:{icon:"long-arrow-alt-up"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"label",attrs:{cols:"3"}},[t._v("\n                Target\n              ")]),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{state:""==t.targetScheme?null:null!=t.toScheme,type:"text",placeholder:"scheme"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClicked(e)}},model:{value:t.targetScheme,callback:function(e){t.targetScheme=e},expression:"targetScheme"}})],1),t._v(" "),n("b-col",{attrs:{cols:"4"}},[n("b-form-input",{attrs:{type:"text",placeholder:"notation"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClicked(e)}},model:{value:t.targetNotation,callback:function(e){t.targetNotation=e},expression:"targetNotation"}})],1),t._v(" "),n("b-col",{attrs:{cols:"2"}})],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"label",attrs:{cols:"3"}},[t._v("\n                Creator\n              ")]),t._v(" "),n("b-col",{attrs:{cols:"2"}},[n("b-form-input",{attrs:{type:"text",placeholder:"creator"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClicked(e)}},model:{value:t.creator_,callback:function(e){t.creator_=e},expression:"creator_"}})],1),t._v(" "),n("b-col",{staticClass:"label",attrs:{cols:"2"}},[t._v("\n                Type\n              ")]),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-select",{attrs:{options:t.typeOptions},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t._v(" "),n("b-col",{attrs:{cols:"2"}})],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"label",attrs:{cols:"3"}},[t.concordances.length>0?n("span",[t._v("\n                  Concordance\n                ")]):t._e()]),t._v(" "),n("b-col",{attrs:{cols:"4"}},[t.concordances.length>0?n("b-form-select",{attrs:{options:t.concordanceOptions},model:{value:t.concordance,callback:function(e){t.concordance=e},expression:"concordance"}}):t._e()],1),t._v(" "),n("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[n("b-button",{attrs:{variant:"danger"},on:{click:t.clearClicked}},[n("font-awesome-icon",{attrs:{icon:"ban"}}),n("span",{staticClass:"d-none d-lg-inline"},[t._v(" Clear")])],1),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:t.searchClicked}},[n("font-awesome-icon",{attrs:{icon:"search"}}),n("span",{staticClass:"d-none d-md-inline"},[t._v(" Search")])],1)],1),t._v(" "),n("b-col",{attrs:{cols:"2"}})],1)],1),t._v(" "),n("b-container",{class:{mappingTable:!0,"mappingTable-short":t.mappings.length<=2}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("mapping-table",{directives:[{name:"show",rawName:"v-show",value:t.mappings.length,expression:"mappings.length"}],attrs:{mappings:t.mappings,actions:t.actions,"show-labels":0!=t.showLabels,"show-tooltip":!1,"hide-duplicates":!1},on:{click:t.tableClicked}})],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"8"}},[t.totalCount>0?n("b-pagination",{staticClass:"justify-content-begin",staticStyle:{"user-select":"none"},attrs:{"total-rows":t.totalCount,"per-page":10,size:"sm"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1),t._v(" "),n("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[n("p",[t._v(t._s(t.totalCount.toLocaleString())+" results")]),t._v(" "),t.downloadUrl&&t.totalCount>0?n("p",[n("a",{attrs:{href:t.downloadUrl+"json"}},[n("font-awesome-icon",{attrs:{icon:"download"}}),t._v(" .json\n                  ")],1),t._v(" |\n                  "),n("a",{attrs:{href:t.downloadUrl+"ndjson"}},[n("font-awesome-icon",{attrs:{icon:"download"}}),t._v(" .ndjson\n                  ")],1),t._v(" |\n                  "),n("a",{attrs:{href:t.downloadUrl+"csv"}},[n("font-awesome-icon",{attrs:{icon:"download"}}),t._v(" .csv\n                  ")],1),t._v(" |\n                  "),n("a",{attrs:{href:t.downloadUrl+"tsv"}},[n("font-awesome-icon",{attrs:{icon:"download"}}),t._v(" .tsv\n                  ")],1)]):t._e(),t._v(" "),n("b-form-checkbox",{attrs:{value:"1","unchecked-value":"0"},model:{value:t.showLabels,callback:function(e){t.showLabels=e},expression:"showLabels"}},[t._v("\n                  Show Labels for Concepts\n                ")])],1)],1)],1)],1)],1)],1)],1):t._e()],1)},r=[],i=n("bc3a"),c=n.n(i),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flexible-table",{attrs:{items:t.items,fields:t.fields},scopedSlots:t._u([{key:"sourceConcepts",fn:function(e){var o=e.value;return n("span",{},t._l(o,function(e){return n("item-name",{key:e.uri,attrs:{item:e,"show-text":t.showLabels,"show-tooltip":t.showTooltip,"is-link":!1,"is-highlighted":!1},nativeOn:{mouseover:function(t){return function(){return null}()},click:function(t){return function(){return null}()}}})}),1)}},{key:"targetConcepts",fn:function(e){var o=e.value;return n("span",{},t._l(o,function(e){return n("span",{key:e.uri},[n("item-name",{attrs:{item:e,"show-text":t.showLabels,"show-tooltip":t.showTooltip,"is-link":!1,"is-highlighted":!1},nativeOn:{mouseover:function(t){return function(){return null}()},click:function(t){return function(){return null}()}}}),t._v(" "),n("br")],1)}),0)}},{key:"type",fn:function(e){var o=e.value;return n("span",{},[null!=o?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:t.$util.prefLabel(o),delay:t.$util.delay.medium},expression:"{ title: $util.prefLabel(value), delay: $util.delay.medium }",modifiers:{hover:!0}}]},[t._v("\n      "+t._s(t.$util.notation(o))+"\n    ")]):t._e()])}},{key:"actions",fn:function(e){return n("span",{},t._l(t.actions,function(o,a){return n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:o.title,delay:t.$util.delay.medium},expression:"{ title: action.title, delay: $util.delay.medium }",modifiers:{hover:!0}}],key:a,staticClass:"button",attrs:{icon:o.icon},on:{click:function(n){return t.$emit("click",{name:o.name,item:e.item})}}})}),1)}}])},[t._v(" "),t._v(" "),t._v(" "),t._v(" "),n("span",{attrs:{slot:"HEAD_actions"},slot:"HEAD_actions"})])},s=[],u=n("68bc"),p=n("ae75");function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}var f={name:"MappingTable",components:{ItemName:u["a"],FlexibleTable:p["a"]},props:{mappings:{type:Array,default:function(){return[]}},hideDuplicates:{type:Boolean,default:!0},actions:{type:Array,default:function(){return[]}},showTooltip:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!1}},data:function(){return{}},computed:{fields:function(){var t=this;return[{key:"sourceScheme",label:"",width:"10%",minWidth:"",sortable:!1},{key:"sourceConcepts",label:"from",width:"22%",minWidth:"",sortable:!1,compare:function(e,n){return t.$util.compareMappingsByConcepts(e.mapping,n.mapping,"from")}},{key:"type",label:"",width:"8%",minWidth:"",sortable:!1,compare:function(t,e){var n=_.get(t,"type.prefLabel.en",""),o=_.get(e,"type.prefLabel.en","");return n<o?-1:n>o?1:0}},{key:"targetScheme",label:"",width:"10%",minWidth:"",sortable:!1},{key:"targetConcepts",label:"to",width:"22%",minWidth:"",sortable:!1,compare:function(e,n){return t.$util.compareMappingsByConcepts(e.mapping,n.mapping,"to")}},{key:"creator",label:"creator",width:"20%",minWidth:"",sortable:!1},{key:"actions",label:"",width:"8%",minWidth:"",sortable:!1}]},items:function(){var t=[],e=[],n=!0,o=!1,a=void 0;try{for(var r,i=this.mappings[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var c=r.value,l=c.identifier?c.identifier.find(function(t){return t.startsWith("urn:jskos:mapping:content:")}):null;if(!this.hideDuplicates||!l||!e.includes(l)){var s={};s.mapping=c,s.sourceScheme=this.$util.notation(c.fromScheme),s.targetScheme=this.$util.notation(c.toScheme),s.sourceConcepts=c.from.memberSet||c.from.memberChoice,s.targetConcepts=c.to.memberSet||c.to.memberChoice,s.creator=c.creator&&c.creator[0]||"?","object"===d(s.creator)&&(s.creator=s.creator.prefLabel.de||s.creator.prefLabel.en||"?"),s.type=this.$jskos.mappingTypeByType(c.type),t.push(s),e.push(l)}}}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return t}},watch:{},methods:{}},h=f,m=(n("e2d2"),n("2877")),b=Object(m["a"])(h,l,s,!1,null,"3b914ebf",null),v=b.exports,g=n("2ef0"),y=n.n(g),w=n("a4fe"),k=n("a189"),S=n("a085"),C={name:"MappingsApp",components:{MappingTable:v,LoadingIndicatorFull:w["a"],FlexibleTable:p["a"]},mixins:[k["a"],S["a"]],data:function(){return{loading:!1,loadingId:null,mappingSchemes:null,currentPage:1,tab:0,downloadUrl:null,concordances:[],mappings:[],totalCount:0,itemDetailSettings:{left:{showTopConceptsInScheme:!0}},type:null,concordance:null,sourceScheme:"",sourceNotation:"",targetScheme:"",targetNotation:"",creator_:"",actions:[{name:"feedback",title:"Send Feedback",icon:"comment"},{name:"open",title:"Open in Cocoda",icon:"external-link-alt"}],showLabels:"1",properties:{sourceScheme:"fromScheme",sourceNotation:"from",targetScheme:"toScheme",targetNotation:"to",creator_:"creator",type:"type",concordance:"concordance",currentPage:"page",showLabels:"showLabels"},filter:{from:"",to:"",creator:""}}},computed:{typeOptions:function(){var t=[{text:"all types",value:null}],e=!0,n=!1,o=void 0;try{for(var a,r=this.$jskos.mappingTypes[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;t.push({text:"".concat(this.$util.notation(i)," ").concat(this.$util.prefLabel(i)),value:i.uri})}}catch(c){n=!0,o=c}finally{try{e||null==r.return||r.return()}finally{if(n)throw o}}return t},fromScheme:function(){var t=this;return this.mappingSchemes.find(function(e){return y.a.get(e,"prefLabel.de","___NO_SCHEME___").toLowerCase()==t.sourceScheme.toLowerCase()||y.a.get(e,"prefLabel.en","___NO_SCHEME___").toLowerCase()==t.sourceScheme.toLowerCase()||y.a.get(e,"notation[0]","___NO_SCHEME___").toLowerCase()==t.sourceScheme.toLowerCase()})},toScheme:function(){var t=this;return this.mappingSchemes.find(function(e){return y.a.get(e,"prefLabel.de","___NO_SCHEME___").toLowerCase()==t.targetScheme.toLowerCase()||y.a.get(e,"prefLabel.en","___NO_SCHEME___").toLowerCase()==t.targetScheme.toLowerCase()||y.a.get(e,"notation[0]","___NO_SCHEME___").toLowerCase()==t.targetScheme.toLowerCase()})},page:{get:function(){return parseInt(this.currentPage)||1},set:function(t){this.currentPage=t}},concordanceOptions:function(){var t=[{value:null,text:"all concordances"}],e=!0,n=!1,o=void 0;try{for(var a,r=this.concordanceTableItems[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value,c="".concat(i.from," to ").concat(i.to," (").concat(i.description,")");t.push({value:i.concordance.uri,text:c})}}catch(l){n=!0,o=l}finally{try{e||null==r.return||r.return()}finally{if(n)throw o}}return t},concordanceTableFields:function(){return[{key:"from",label:"from",width:"13%",minWidth:"",sortable:!0,align:"left",titleClass:"test"},{key:"to",label:"to",width:"9%",minWidth:"",sortable:!0,align:"left"},{key:"description",label:"description",width:"24%",minWidth:"",sortable:!0,align:"left"},{key:"creator",label:"creator",width:"16%",minWidth:"",sortable:!0,align:"left"},{key:"date",label:"date",titleClass:"d-none d-md-inline",width:"10%",minWidth:"",sortable:!0,align:"left"},{key:"download",label:"download",titleClass:"d-none d-lg-inline",width:"11%",minWidth:"",sortable:!1,align:"left"},{key:"mappings",label:"mappings",titleClass:"d-none d-lg-inline",width:"13%",minWidth:"",sortable:!0,align:"right",compare:function(t,e){return(parseInt(t.mappings)||0)-(parseInt(e.mappings)||0)}},{key:"actions",label:"",width:"4%",sortable:!1,align:"right"}]},concordanceTableItems:function(){var t=[],e=!0,n=!1,o=void 0;try{for(var a,r=this.concordances[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value,c={concordance:i};c.from=this.$util.notation(y.a.get(i,"fromScheme"))||"-",c.to=this.$util.notation(y.a.get(i,"toScheme"))||"-",c.description=y.a.get(i,"scopeNote.de[0]")||y.a.get(i,"scopeNote.en[0]")||"-",c.creator=y.a.get(i,"creator[0].prefLabel.de")||y.a.get(i,"creator[0].prefLabel.en")||"-",c.date=y.a.get(i,"modified")||y.a.get(i,"created")||"",c.download=y.a.get(i,"distributions",[]),c.mappings=y.a.get(i,"extent"),c.from.toLowerCase().startsWith(this.filter.from.toLowerCase())&&c.to.toLowerCase().startsWith(this.filter.to.toLowerCase())&&c.creator.toLowerCase().startsWith(this.filter.creator.toLowerCase())&&t.push(c)}}catch(l){n=!0,o=l}finally{try{e||null==r.return||r.return()}finally{if(n)throw o}}return t},concordancesUrl:function(){var t=this.config.mappingProviders[0].url;return t=t.substring(0,t.substring(0,t.length-1).lastIndexOf("/"))+"/concordances",t},configLoaded:function(){return this.$store.state.configLoaded}},watch:{mappingSchemes:function(){this.mappingSchemes?(this.loading=!1,this.loadFromParameters()):this.loading=!0},currentPage:function(t){t&&this.search()},tab:function(){var t=y.a.cloneDeep(this.$route.query);t.tab=this.tab,this.$router.push({query:t})},mappings:function(){var t=!0,e=!1,n=void 0;try{for(var o,a=this.mappings[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var r=o.value,i=this.$jskos.conceptsOfMapping(r),c=!0,l=!1,s=void 0;try{for(var u,p=i[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var d=u.value;!d.__DETAILSLOADED__&&d._getDetails&&this.loadDetails(d)}}catch(f){l=!0,s=f}finally{try{c||null==p.return||p.return()}finally{if(l)throw s}}}}catch(f){e=!0,n=f}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}},showLabels:function(){this.saveToParameters()}},created:function(){var t=this;this.mappingSchemes||(this.loading=!0),this.$store.dispatch("loadConfig",y.a.get(this.$route,"query.config")).then(function(){return t.$store.dispatch("settings/load")}).then(function(){t.loadSchemes().then(function(){c.a.get(t.config.mappingProviders[0].url+"voc").then(function(e){var n=e.data;t.mappingSchemes=n}).catch(function(e){console.warn("Error fetching mapping schemes:",e),t.mappingSchemes=[]}),c.a.get(t.concordancesUrl).then(function(e){var n=e.data;t.concordances=n}).catch(function(e){console.warn("Error fetching mapping schemes:",e),t.concordances=[]}).then(function(){0==t.concordances.length&&0==t.tab&&(t.tab=1)}),window.addEventListener("popstate",function(){t.loadFromParameters()})})})},methods:{loadFromParameters:function(){var t=this;this.clear();var e=this.$route.query,n=!1;y.a.forEach(this.properties,function(o,a){e[o]&&e[o]!=t[a]&&(t[a]=e[o],n=!0)}),this.tab=parseInt(e.tab)||this.tab||0,n&&this.search(!1)},saveToParameters:function(){var t=this,e={};y.a.forEach(this.properties,function(n,o){t[o]&&(e[n]=t[o])}),e.tab=this.tab,this.$router.push({query:e})},clearClicked:function(){this.clear(),this.saveToParameters()},swapClicked:function(){var t=[this.targetScheme,this.targetNotation,this.sourceScheme,this.sourceNotation];this.sourceScheme=t[0],this.sourceNotation=t[1],this.targetScheme=t[2],this.targetNotation=t[3],this.searchClicked()},searchClicked:function(){1==this.currentPage?this.search():this.currentPage=1},clear:function(){this.sourceNotation="",this.sourceScheme="",this.targetNotation="",this.targetScheme="",this.creator_="",this.type=null,this.concordance=null,this.currentPage=0,this.mappings=[],this.totalCount=0,this.downloadUrl=null},search:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.saveToParameters();var n=this.$util.generateID();this.loadingId=n,y.a.delay(function(){t.loadingId==n&&(t.loading=!0)},150);var o=this.sourceNotation,a=this.targetNotation,r=y.a.get(this.fromScheme,"uri",""),i=y.a.get(this.toScheme,"uri",""),l=this.creator_,s=this.type||"",u=this.concordance||"",p=encodeURIComponent,d=this.config.mappingProviders[0].url;this.downloadUrl="".concat(d,"?from=").concat(p(o),"&to=").concat(p(a),"&fromScheme=").concat(p(r),"&toScheme=").concat(p(i),"&creator=").concat(p(l),"&partOf=").concat(p(u),"&type=").concat(p(s),"&download="),c.a.get(d,{params:{from:o,to:a,fromScheme:r,toScheme:i,type:s,creator:l,partOf:u,limit:10,offset:10*(this.page-1)}}).then(function(e){var o=e.data,a=e.headers;if(t.loadingId==n){var r=!0,i=!1,c=void 0;try{for(var l,s=(o||[])[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;t.adjustMapping(u)}}catch(p){i=!0,c=p}finally{try{r||null==s.return||s.return()}finally{if(i)throw c}}t.mappings=o||[],t.totalCount=parseInt(a["x-total-count"]),t.totalCount||(t.totalCount=o.length)}}).catch(function(){return null}).then(function(){t.loadingId==n&&(t.loadingId=null,t.loading=!1)})},tableClicked:function(t){var e=t.name,n=t.item;if("open"==e||"feedback"==e){for(var o=n.mapping.fromScheme.uri,a=n.mapping.toScheme.uri,r=n.mapping.identifier.find(function(t){return t.startsWith("urn:jskos:mapping:content:")}),i={from:"",to:""},c=Object.keys(i),l=0;l<c.length;l++)for(var s=c[l],u=["memberSet","memberChoice","memberList"],p=0;p<u.length;p++){var d=u[p],f=y.a.get(n.mapping,"".concat(s,".").concat(d,"[0].uri"));f&&(i[s]=f)}if(o&&a&&r){var h="".concat(this.config.cocodaBaseUrl||"./","?mapping={}&identifier=").concat(r,"&fromScheme=").concat(o,"&toScheme=").concat(a,"&from=").concat(i.from,"&to=").concat(i.to);if("open"==e)window.open(h);else{h.startsWith("./")&&(h=h.replace("./",location.href.substring(0,location.href.indexOf("mappings.html"))));var m="Hello,\n\nI'd like to give feedback regarding the following mapping:\n\n".concat(h,"\n\n");m=encodeURIComponent(m),window.open("mailto:coli-conc@gbv.de?subject=Cocoda Mapping Feedback&body=".concat(m),"_self")}}else this.alert("Mapping could not be opened in Cocoda.",null,"danger")}},showMappingsForConcordance:function(t){this.tab=1,this.clear(),this.concordance=t.uri,this.currentPage=1,this.searchClicked()},nameOfDistribution:function(t){var e=t.mimetype;return e.includes("json")?"JSKOS":e.includes("csv")?"CSV":null}}},x=C,L=(n("8142"),n("cd65"),Object(m["a"])(x,a,r,!1,null,"ef8f7140",null)),O=L.exports,$=n("4360"),N=n("41cb"),T=n("eab2");n("56d7"),new o["a"]({el:"#mappingsApp",store:$["a"],router:N["a"],components:{MappingsApp:O},template:"<MappingsApp/>",i18n:T["a"]})},"78a5":function(t,e,n){},8142:function(t,e,n){"use strict";var o=n("b706"),a=n.n(o);a.a},"8a3f":function(t,e,n){},b706:function(t,e,n){},cd65:function(t,e,n){"use strict";var o=n("8a3f"),a=n.n(o);a.a},e2d2:function(t,e,n){"use strict";var o=n("78a5"),a=n.n(o);a.a}});