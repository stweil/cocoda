(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],d=0,u=[];d<s.length;d++)r=s[d],a[r]&&u.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(u.length)u.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,s=1;s<o.length;s++){var l=o[s];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},a={mappingsApp:0},i=[];function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var p=l;i.push([1,"chunk-vendors","chunk-common"]),o()})({1:function(e,t,o){e.exports=o("4002")},4002:function(e,t,o){"use strict";o.r(t);var n=o("a026"),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"text-dark color-primary-0-bg fontSize-normal",attrs:{id:"app"}},[o("div",{staticClass:"alertsContainer"},e._l(e.$store.state.alerts.alerts,function(t,n){return o("b-alert",{key:n,attrs:{variant:t.variant,show:t.countdown||!t.shouldCountdown,dismissible:!t.shouldCountdown,fade:""},on:{dismissed:function(o){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:0})},"dismiss-count-down":function(o){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:o})}}},[e._v("\n      "+e._s(t.text)+"\n    ")])}),1),e._v(" "),e.loading?o("loading-indicator-full"):e._e(),e._v(" "),e.configLoaded?o("div",{attrs:{id:"main"}},[o("b-card",{attrs:{"no-body":""}},[o("b-tabs",{attrs:{card:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[o("b-tab",{attrs:{disabled:!e.loading&&0==e.concordances.length,title:"Concordances"}},[o("div",{staticStyle:{display:"flex"}},e._l(e.concordanceTableFields,function(t){return o("div",{key:t.key,style:"padding: 0px 10px 0px 0px; flex: 0 0 "+t.width},["from"==t.key?o("b-input",{staticStyle:{width:"55%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:"from"},model:{value:e.filter.from,callback:function(t){e.$set(e.filter,"from",t)},expression:"filter.from"}}):e._e(),e._v(" "),"to"==t.key?o("b-input",{staticStyle:{width:"75%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:"to"},model:{value:e.filter.to,callback:function(t){e.$set(e.filter,"to",t)},expression:"filter.to"}}):e._e(),e._v(" "),"creator"==t.key?o("b-input",{staticStyle:{width:"80%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:"creator"},model:{value:e.filter.creator,callback:function(t){e.$set(e.filter,"creator",t)},expression:"filter.creator"}}):e._e(),e._v(" "),null!=e.filter[t.key]?o("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:"clear filter",delay:e.$util.delay.medium},expression:"{ title: 'clear filter', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button d-none d-md-inline-block",attrs:{icon:"times"},on:{click:function(o){e.filter[t.key]=""}}},[e._v("\n                x\n              ")]):e._e(),e._v(" "),"from"==t.key?o("b-button",{staticClass:"d-none d-lg-inline-block",attrs:{variant:"link",size:"sm"},on:{click:function(t){var o;o=[e.filter.to,e.filter.from],e.filter.from=o[0],e.filter.to=o[1]}}},[o("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1):e._e()],1)}),0),e._v(" "),o("flexible-table",{attrs:{fields:e.concordanceTableFields,items:e.concordanceTableItems},scopedSlots:e._u([{key:"download",fn:function(t){var n=t.value;return o("span",{},e._l(n,function(t,n){return o("span",{key:n},[e.nameOfDistribution(t)?o("a",{attrs:{href:t.download}},[e._v("\n                  "+e._s(e.nameOfDistribution(t))+"\n                ")]):e._e()])}),0)}},{key:"mappings",fn:function(t){var n=t.value;return o("span",{},[e._v("\n              "+e._s((parseInt(n)||"?").toLocaleString())+"\n            ")])}},{key:"actions",fn:function(t){var n=t.item;return o("span",{},[o("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:"Show Mappings",delay:e.$util.delay.medium},expression:"{ title: 'Show Mappings', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"external-link-square-alt"},on:{click:function(t){return e.showMappingsForConcordance(n.concordance)}}})],1)}}],null,!1,1578646689)}),e._v(" "),o("div",{staticStyle:{display:"flex"}},[o("p",{staticStyle:{"font-weight":"bold",flex:"1"}},[e._v("\n              "+e._s(e.concordanceTableItems.length)+" concordances\n            ")]),e._v(" "),o("p",{staticStyle:{"text-align":"right","font-weight":"bold"}},[e._v("\n              Total: "+e._s(e.concordanceTableItems.reduce(function(e,t){return e+parseInt(t.mappings)||0},0).toLocaleString())+"\n            ")])]),e._v(" "),o("p",[e._v("\n            The list of concordances is "),o("a",{attrs:{href:e.concordancesUrl+"?download=ndjson"}},[e._v("also available in JSKOS format")]),e._v(".\n          ")])],1),e._v(" "),o("b-tab",{attrs:{title:"Search Mappings"}},[o("b-container",{staticClass:"search"},[o("b-row",[o("b-col",{staticClass:"label",attrs:{cols:"3"}},[e._v("\n                Source\n              ")]),e._v(" "),o("b-col",{attrs:{cols:"3"}},[o("b-form-input",{attrs:{state:""==e.sourceScheme?null:null!=e.fromScheme,type:"text",placeholder:"scheme"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClicked(t)}},model:{value:e.sourceScheme,callback:function(t){e.sourceScheme=t},expression:"sourceScheme"}})],1),e._v(" "),o("b-col",{attrs:{cols:"4"}},[o("b-form-input",{attrs:{type:"text",placeholder:"notation"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClicked(t)}},model:{value:e.sourceNotation,callback:function(t){e.sourceNotation=t},expression:"sourceNotation"}})],1),e._v(" "),o("b-col",{attrs:{cols:"2"}},[o("b-button",{attrs:{variant:"outline-primary"},on:{click:e.swapClicked}},[o("font-awesome-icon",{attrs:{icon:"long-arrow-alt-down"}}),e._v(" "),o("font-awesome-icon",{attrs:{icon:"long-arrow-alt-up"}})],1)],1)],1),e._v(" "),o("b-row",[o("b-col",{staticClass:"label",attrs:{cols:"3"}},[e._v("\n                Target\n              ")]),e._v(" "),o("b-col",{attrs:{cols:"3"}},[o("b-form-input",{attrs:{state:""==e.targetScheme?null:null!=e.toScheme,type:"text",placeholder:"scheme"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClicked(t)}},model:{value:e.targetScheme,callback:function(t){e.targetScheme=t},expression:"targetScheme"}})],1),e._v(" "),o("b-col",{attrs:{cols:"4"}},[o("b-form-input",{attrs:{type:"text",placeholder:"notation"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClicked(t)}},model:{value:e.targetNotation,callback:function(t){e.targetNotation=t},expression:"targetNotation"}})],1),e._v(" "),o("b-col",{attrs:{cols:"2"}})],1),e._v(" "),o("b-row",[o("b-col",{staticClass:"label",attrs:{cols:"3"}},[e._v("\n                Creator\n              ")]),e._v(" "),o("b-col",{attrs:{cols:"2"}},[o("b-form-input",{attrs:{type:"text",placeholder:"creator"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClicked(t)}},model:{value:e.creator_,callback:function(t){e.creator_=t},expression:"creator_"}})],1),e._v(" "),o("b-col",{staticClass:"label",attrs:{cols:"2"}},[e._v("\n                Type\n              ")]),e._v(" "),o("b-col",{attrs:{cols:"3"}},[o("b-select",{attrs:{options:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),e._v(" "),o("b-col",{attrs:{cols:"2"}})],1),e._v(" "),o("b-row",[o("b-col",{staticClass:"label",attrs:{cols:"3"}},[e.concordances.length>0?o("span",[e._v("\n                  Concordance\n                ")]):e._e()]),e._v(" "),o("b-col",{attrs:{cols:"4"}},[e.concordances.length>0?o("b-form-select",{attrs:{options:e.concordanceOptions},model:{value:e.concordance,callback:function(t){e.concordance=t},expression:"concordance"}}):e._e()],1),e._v(" "),o("b-col",{staticClass:"text-right",attrs:{cols:"3"}},[o("b-button",{attrs:{variant:"danger"},on:{click:e.clearClicked}},[o("font-awesome-icon",{attrs:{icon:"ban"}}),o("span",{staticClass:"d-none d-lg-inline"},[e._v(" Clear")])],1),e._v(" "),o("b-button",{attrs:{variant:"primary"},on:{click:e.searchClicked}},[o("font-awesome-icon",{attrs:{icon:"search"}}),o("span",{staticClass:"d-none d-md-inline"},[e._v(" Search")])],1)],1),e._v(" "),o("b-col",{attrs:{cols:"2"}})],1)],1),e._v(" "),o("b-container",{class:{mappingTable:!0,"mappingTable-short":e.mappings.length<=2}},[o("b-row",[o("b-col",{attrs:{cols:"12"}},[o("mapping-table",{directives:[{name:"show",rawName:"v-show",value:e.mappings.length,expression:"mappings.length"}],attrs:{mappings:e.mappings,actions:e.actions,"show-labels":0!=e.showLabels,"show-tooltip":!1,"hide-duplicates":!1},on:{click:e.tableClicked}})],1)],1),e._v(" "),o("b-row",[o("b-col",{attrs:{cols:"8"}},[e.totalCount>0?o("b-pagination",{staticClass:"justify-content-begin",staticStyle:{"user-select":"none"},attrs:{"total-rows":e.totalCount,"per-page":10,size:"sm"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()],1),e._v(" "),o("b-col",{staticClass:"text-right",attrs:{cols:"4"}},[o("p",[e._v(e._s(e.totalCount.toLocaleString())+" results")]),e._v(" "),e.downloadUrl&&e.totalCount>0?o("p",[o("a",{attrs:{href:e.downloadUrl+"json"}},[o("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .json\n                  ")],1),e._v(" |\n                  "),o("a",{attrs:{href:e.downloadUrl+"ndjson"}},[o("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .ndjson\n                  ")],1),e._v(" |\n                  "),o("a",{attrs:{href:e.downloadUrl+"csv"}},[o("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .csv\n                  ")],1),e._v(" |\n                  "),o("a",{attrs:{href:e.downloadUrl+"tsv"}},[o("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .tsv\n                  ")],1)]):e._e(),e._v(" "),o("b-form-checkbox",{attrs:{value:"1","unchecked-value":"0"},model:{value:e.showLabels,callback:function(t){e.showLabels=t},expression:"showLabels"}},[e._v("\n                  Show Labels for Concepts\n                ")])],1)],1)],1)],1)],1)],1)],1):e._e()],1)},i=[],r=o("bc3a"),s=o.n(r),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("flexible-table",{attrs:{items:e.items,fields:e.fields},scopedSlots:e._u([{key:"sourceConcepts",fn:function(t){var n=t.value;return o("span",{},e._l(n,function(t){return o("item-name",{key:t.uri,attrs:{item:t,"show-text":e.showLabels,"show-tooltip":e.showTooltip,"is-link":!1,"is-highlighted":!1},nativeOn:{mouseover:function(e){return function(){return null}()},click:function(e){return function(){return null}()}}})}),1)}},{key:"targetConcepts",fn:function(t){var n=t.value;return o("span",{},e._l(n,function(t){return o("span",{key:t.uri},[o("item-name",{attrs:{item:t,"show-text":e.showLabels,"show-tooltip":e.showTooltip,"is-link":!1,"is-highlighted":!1},nativeOn:{mouseover:function(e){return function(){return null}()},click:function(e){return function(){return null}()}}}),e._v(" "),o("br")],1)}),0)}},{key:"type",fn:function(t){var n=t.value;return o("span",{},[null!=n?o("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$util.prefLabel(n),delay:e.$util.delay.medium},expression:"{ title: $util.prefLabel(value), delay: $util.delay.medium }",modifiers:{hover:!0}}]},[e._v("\n      "+e._s(e.$util.notation(n))+"\n    ")]):e._e()])}},{key:"actions",fn:function(t){return o("span",{},e._l(e.actions,function(n,a){return o("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:n.title,delay:e.$util.delay.medium},expression:"{ title: action.title, delay: $util.delay.medium }",modifiers:{hover:!0}}],key:a,staticClass:"button",attrs:{icon:n.icon},on:{click:function(o){return e.$emit("click",{name:n.name,item:t.item})}}})}),1)}}])},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),o("span",{attrs:{slot:"HEAD_actions"},slot:"HEAD_actions"})])},c=[],p=o("68bc"),d=o("ae75"),u={name:"MappingTable",components:{ItemName:p["a"],FlexibleTable:d["a"]},props:{mappings:{type:Array,default:()=>[]},hideDuplicates:{type:Boolean,default:!0},actions:{type:Array,default:()=>[]},showTooltip:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!1}},data(){return{}},computed:{fields(){return[{key:"sourceScheme",label:"",width:"10%",minWidth:"",sortable:!1},{key:"sourceConcepts",label:"from",width:"22%",minWidth:"",sortable:!1,compare:(e,t)=>this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"from")},{key:"type",label:"",width:"8%",minWidth:"",sortable:!1,compare:(e,t)=>{let o=_.get(e,"type.prefLabel.en",""),n=_.get(t,"type.prefLabel.en","");return o<n?-1:o>n?1:0}},{key:"targetScheme",label:"",width:"10%",minWidth:"",sortable:!1},{key:"targetConcepts",label:"to",width:"22%",minWidth:"",sortable:!1,compare:(e,t)=>this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"to")},{key:"creator",label:"creator",width:"20%",minWidth:"",sortable:!1},{key:"actions",label:"",width:"8%",minWidth:"",sortable:!1}]},items(){let e=[],t=[];for(let o of this.mappings){let n=o.identifier?o.identifier.find(e=>e.startsWith("urn:jskos:mapping:content:")):null;if(!this.hideDuplicates||!n||!t.includes(n)){let a={};a.mapping=o,a.sourceScheme=this.$util.notation(o.fromScheme),a.targetScheme=this.$util.notation(o.toScheme),a.sourceConcepts=o.from.memberSet||o.from.memberChoice,a.targetConcepts=o.to.memberSet||o.to.memberChoice,a.creator=o.creator&&o.creator[0]||"?","object"===typeof a.creator&&(a.creator=a.creator.prefLabel.de||a.creator.prefLabel.en||"?"),a.type=this.$jskos.mappingTypeByType(o.type),e.push(a),t.push(n)}}return e}},watch:{},methods:{}},h=u,m=(o("e2d2"),o("2877")),f=Object(m["a"])(h,l,c,!1,null,"3b914ebf",null),b=f.exports,g=o("2ef0"),v=o.n(g),y=o("a4fe"),w=o("a189"),k=o("a085"),C={name:"MappingsApp",components:{MappingTable:b,LoadingIndicatorFull:y["a"],FlexibleTable:d["a"]},mixins:[w["a"],k["a"]],data(){return{loading:!1,loadingId:null,mappingSchemes:null,currentPage:1,tab:0,downloadUrl:null,concordances:[],mappings:[],totalCount:0,itemDetailSettings:{left:{showTopConceptsInScheme:!0}},type:null,concordance:null,sourceScheme:"",sourceNotation:"",targetScheme:"",targetNotation:"",creator_:"",actions:[{name:"feedback",title:"Send Feedback",icon:"comment"},{name:"open",title:"Open in Cocoda",icon:"external-link-alt"}],showLabels:"1",properties:{sourceScheme:"fromScheme",sourceNotation:"from",targetScheme:"toScheme",targetNotation:"to",creator_:"creator",type:"type",concordance:"concordance",currentPage:"page",showLabels:"showLabels"},filter:{from:"",to:"",creator:""}}},computed:{typeOptions(){let e=[{text:"all types",value:null}];for(let t of this.$jskos.mappingTypes)e.push({text:"".concat(this.$util.notation(t)," ").concat(this.$util.prefLabel(t)),value:t.uri});return e},fromScheme(){return this.mappingSchemes.find(e=>v.a.get(e,"prefLabel.de","___NO_SCHEME___").toLowerCase()==this.sourceScheme.toLowerCase()||v.a.get(e,"prefLabel.en","___NO_SCHEME___").toLowerCase()==this.sourceScheme.toLowerCase()||v.a.get(e,"notation[0]","___NO_SCHEME___").toLowerCase()==this.sourceScheme.toLowerCase())},toScheme(){return this.mappingSchemes.find(e=>v.a.get(e,"prefLabel.de","___NO_SCHEME___").toLowerCase()==this.targetScheme.toLowerCase()||v.a.get(e,"prefLabel.en","___NO_SCHEME___").toLowerCase()==this.targetScheme.toLowerCase()||v.a.get(e,"notation[0]","___NO_SCHEME___").toLowerCase()==this.targetScheme.toLowerCase())},page:{get(){return parseInt(this.currentPage)||1},set(e){this.currentPage=e}},concordanceOptions(){let e=[{value:null,text:"all concordances"}];for(let t of this.concordanceTableItems){let o="".concat(t.from," to ").concat(t.to," (").concat(t.description,")");e.push({value:t.concordance.uri,text:o})}return e},concordanceTableFields(){return[{key:"from",label:"from",width:"13%",minWidth:"",sortable:!0,align:"left",titleClass:"test"},{key:"to",label:"to",width:"9%",minWidth:"",sortable:!0,align:"left"},{key:"description",label:"description",width:"24%",minWidth:"",sortable:!0,align:"left"},{key:"creator",label:"creator",width:"16%",minWidth:"",sortable:!0,align:"left"},{key:"date",label:"date",titleClass:"d-none d-md-inline",width:"10%",minWidth:"",sortable:!0,align:"left"},{key:"download",label:"download",titleClass:"d-none d-lg-inline",width:"11%",minWidth:"",sortable:!1,align:"left"},{key:"mappings",label:"mappings",titleClass:"d-none d-lg-inline",width:"13%",minWidth:"",sortable:!0,align:"right",compare:(e,t)=>(parseInt(e.mappings)||0)-(parseInt(t.mappings)||0)},{key:"actions",label:"",width:"4%",sortable:!1,align:"right"}]},concordanceTableItems(){let e=[];for(let t of this.concordances){let o={concordance:t};o.from=this.$util.notation(v.a.get(t,"fromScheme"))||"-",o.to=this.$util.notation(v.a.get(t,"toScheme"))||"-",o.description=v.a.get(t,"scopeNote.de[0]")||v.a.get(t,"scopeNote.en[0]")||"-",o.creator=v.a.get(t,"creator[0].prefLabel.de")||v.a.get(t,"creator[0].prefLabel.en")||"-",o.date=v.a.get(t,"modified")||v.a.get(t,"created")||"",o.download=v.a.get(t,"distributions",[]),o.mappings=v.a.get(t,"extent"),o.from.toLowerCase().startsWith(this.filter.from.toLowerCase())&&o.to.toLowerCase().startsWith(this.filter.to.toLowerCase())&&o.creator.toLowerCase().startsWith(this.filter.creator.toLowerCase())&&e.push(o)}return e},concordancesUrl(){let e=this.config.mappingProviders[0].url;return e=e.substring(0,e.substring(0,e.length-1).lastIndexOf("/"))+"/concordances",e},configLoaded(){return this.$store.state.configLoaded}},watch:{mappingSchemes(){this.mappingSchemes?(this.loading=!1,this.loadFromParameters()):this.loading=!0},currentPage(e){e&&this.search()},tab(){let e=v.a.cloneDeep(this.$route.query);e.tab=this.tab,this.$router.push({query:e})},mappings(){for(let e of this.mappings){let t=this.$jskos.conceptsOfMapping(e);for(let e of t)!e.__DETAILSLOADED__&&e._getDetails&&this.loadDetails(e)}},showLabels(){this.saveToParameters()}},created(){this.mappingSchemes||(this.loading=!0),this.$store.dispatch("loadConfig",v.a.get(this.$route,"query.config")).then(()=>this.$store.dispatch("settings/load")).then(()=>{this.loadSchemes().then(()=>{s.a.get(this.config.mappingProviders[0].url+"voc").then(e=>{let t=e.data;this.mappingSchemes=t}).catch(e=>{console.warn("Error fetching mapping schemes:",e),this.mappingSchemes=[]}),s.a.get(this.concordancesUrl).then(e=>{let t=e.data;this.concordances=t}).catch(e=>{console.warn("Error fetching mapping schemes:",e),this.concordances=[]}).then(()=>{0==this.concordances.length&&0==this.tab&&(this.tab=1)}),window.addEventListener("popstate",()=>{this.loadFromParameters()})})})},methods:{loadFromParameters(){this.clear();let e=this.$route.query,t=!1;v.a.forEach(this.properties,(o,n)=>{e[o]&&e[o]!=this[n]&&(this[n]=e[o],t=!0)}),this.tab=parseInt(e.tab)||this.tab||0,t&&this.search(!1)},saveToParameters(){let e={};v.a.forEach(this.properties,(t,o)=>{this[o]&&(e[t]=this[o])}),e.tab=this.tab,this.$router.push({query:e})},clearClicked(){this.clear(),this.saveToParameters()},swapClicked(){var e=[this.targetScheme,this.targetNotation,this.sourceScheme,this.sourceNotation];this.sourceScheme=e[0],this.sourceNotation=e[1],this.targetScheme=e[2],this.targetNotation=e[3],this.searchClicked()},searchClicked(){1==this.currentPage?this.search():this.currentPage=1},clear(){this.sourceNotation="",this.sourceScheme="",this.targetNotation="",this.targetScheme="",this.creator_="",this.type=null,this.concordance=null,this.currentPage=0,this.mappings=[],this.totalCount=0,this.downloadUrl=null},search(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.saveToParameters();let t=this.$util.generateID();this.loadingId=t,v.a.delay(()=>{this.loadingId==t&&(this.loading=!0)},150);let o=this.sourceNotation,n=this.targetNotation,a=v.a.get(this.fromScheme,"uri",""),i=v.a.get(this.toScheme,"uri",""),r=this.creator_,l=this.type||"",c=this.concordance||"",p=encodeURIComponent,d=this.config.mappingProviders[0].url;this.downloadUrl="".concat(d,"?from=").concat(p(o),"&to=").concat(p(n),"&fromScheme=").concat(p(a),"&toScheme=").concat(p(i),"&creator=").concat(p(r),"&partOf=").concat(p(c),"&type=").concat(p(l),"&download="),s.a.get(d,{params:{from:o,to:n,fromScheme:a,toScheme:i,type:l,creator:r,partOf:c,limit:10,offset:10*(this.page-1)}}).then(e=>{let o=e.data,n=e.headers;if(this.loadingId==t){for(let e of o||[])this.adjustMapping(e);this.mappings=o||[],this.totalCount=parseInt(n["x-total-count"]),this.totalCount||(this.totalCount=o.length)}}).catch(()=>null).then(()=>{this.loadingId==t&&(this.loadingId=null,this.loading=!1)})},tableClicked(e){let t=e.name,o=e.item;if("open"==t||"feedback"==t){let e=o.mapping.fromScheme.uri,n=o.mapping.toScheme.uri,a=o.mapping.identifier.find(e=>e.startsWith("urn:jskos:mapping:content:")),i={from:"",to:""};for(let t of Object.keys(i))for(let e of["memberSet","memberChoice","memberList"]){let n=v.a.get(o.mapping,"".concat(t,".").concat(e,"[0].uri"));n&&(i[t]=n)}if(e&&n&&a){let o="".concat(this.config.cocodaBaseUrl||"./","?mapping={}&identifier=").concat(a,"&fromScheme=").concat(e,"&toScheme=").concat(n,"&from=").concat(i.from,"&to=").concat(i.to);if("open"==t)window.open(o);else{o.startsWith("./")&&(o=o.replace("./",location.href.substring(0,location.href.indexOf("mappings.html"))));let e="Hello,\n\nI'd like to give feedback regarding the following mapping:\n\n".concat(o,"\n\n");e=encodeURIComponent(e),window.open("mailto:coli-conc@gbv.de?subject=Cocoda Mapping Feedback&body=".concat(e),"_self")}}else this.alert("Mapping could not be opened in Cocoda.",null,"danger")}},showMappingsForConcordance(e){this.tab=1,this.clear(),this.concordance=e.uri,this.currentPage=1,this.searchClicked()},nameOfDistribution(e){let t=e.mimetype;return t.includes("json")?"JSKOS":t.includes("csv")?"CSV":null}}},S=C,x=(o("8142"),o("cd65"),Object(m["a"])(S,a,i,!1,null,"ef8f7140",null)),L=x.exports,O=o("4360"),$=o("41cb"),N=o("eab2");o("56d7"),new n["a"]({el:"#mappingsApp",store:O["a"],router:$["a"],components:{MappingsApp:L},template:"<MappingsApp/>",i18n:N["a"]})},"78a5":function(e,t,o){},8142:function(e,t,o){"use strict";var n=o("b706"),a=o.n(n);a.a},"8a3f":function(e,t,o){},b706:function(e,t,o){},cd65:function(e,t,o){"use strict";var n=o("8a3f"),a=o.n(n);a.a},e2d2:function(e,t,o){"use strict";var n=o("78a5"),a=o.n(n);a.a}});