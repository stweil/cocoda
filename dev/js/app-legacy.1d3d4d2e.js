(function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],u=0,m=[];u<a.length;u++)s=a[u],r[s]&&m.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);p&&p(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var p=l;o.push([0,"chunk-vendors","chunk-common"]),n()})({0:function(e,t,n){e.exports=n("bd14")},"0397":function(e,t,n){"use strict";var i=n("9867"),r=n.n(i);r.a},"05c2":function(e,t,n){},"074f":function(e,t,n){},"0b99":function(e,t,n){},"13ae":function(e,t,n){"use strict";var i=n("86ca"),r=n.n(i);r.a},1524:function(e,t,n){},"17f9":function(e,t,n){},"1b3d":function(e,t,n){},"1c47":function(e,t,n){},"1ea4":function(e,t,n){},"23a6":function(e,t,n){"use strict";var i=n("2454"),r=n.n(i);r.a},2454:function(e,t,n){},"28e9":function(e,t,n){"use strict";var i=n("3195"),r=n.n(i);r.a},"30ae":function(e,t,n){},3195:function(e,t,n){},"34c9":function(e,t,n){"use strict";var i=n("6394"),r=n.n(i);r.a},"38c8":function(e,t,n){"use strict";var i=n("1ea4"),r=n.n(i);r.a},"3ee3":function(e,t,n){"use strict";var i=n("05c2"),r=n.n(i);r.a},"405c":function(e,t,n){},"43e8":function(e,t,n){},4670:function(e,t,n){"use strict";var i=n("b876"),r=n.n(i);r.a},"5c48":function(e,t,n){},6394:function(e,t,n){},"67ca0":function(e,t,n){"use strict";var i=n("17f9"),r=n.n(i);r.a},6820:function(e,t,n){"use strict";var i=n("dada"),r=n.n(i);r.a},7706:function(e,t,n){},"7c55":function(e,t,n){"use strict";var i=n("5c48"),r=n.n(i);r.a},"7d6e":function(e,t,n){"use strict";var i=n("93df"),r=n.n(i);r.a},8424:function(e,t,n){},"86ca":function(e,t,n){},"8c3d":function(e,t,n){},"8d74":function(e,t,n){"use strict";var i=n("30ae"),r=n.n(i);r.a},"8d99":function(e,t,n){},"93df":function(e,t,n){},9867:function(e,t,n){},"9c44":function(e,t,n){"use strict";var i=n("a8a4"),r=n.n(i);r.a},a75d:function(e,t,n){},a8a4:function(e,t,n){},ab2c:function(e,t,n){"use strict";var i=n("7706"),r=n.n(i);r.a},b1fa:function(e,t,n){"use strict";var i=n("405c"),r=n.n(i);r.a},b298:function(e,t,n){"use strict";var i=n("8c3d"),r=n.n(i);r.a},b552:function(e,t,n){},b6d1:function(e,t,n){"use strict";var i=n("a75d"),r=n.n(i);r.a},b876:function(e,t,n){},bc32:function(e,t,n){"use strict";var i=n("8d99"),r=n.n(i);r.a},bd14:function(e,t,n){"use strict";n.r(t);var i=n("a026"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"font-default text-dark color-primary-0-bg fontSize-normal",attrs:{id:"app"}},[n("div",{staticClass:"alertsContainer"},e._l(e.$store.state.alerts.alerts,function(t,i){return n("b-alert",{key:i,attrs:{variant:t.variant,show:t.countdown||!t.shouldCountdown,dismissible:!t.shouldCountdown,fade:""},on:{dismissed:function(n){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:0})},"dismiss-count-down":function(n){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:n})}}},[n("span",{domProps:{innerHTML:e._s(t.text)}})])}),1),e._v(" "),e.configLoaded?n("the-navbar"):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1],expression:"selected.scheme[true] || selected.scheme[false]"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.swapSides"),delay:e.$util.delay.medium},expression:"{ title: $t('general.swapSides'), delay: $util.delay.medium }",modifiers:{hover:!0}}],attrs:{id:"swapSides"},on:{click:e.swapSides}},[n("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),e._v(" "),e.loadingGlobal||e.loading?n("loading-indicator-full"):e._e(),e._v(" "),e.configLoaded&&e.schemes.length?n("div",{staticClass:"main"},[n("div",{staticClass:"flexbox-row"},[e._l([!0,!1],function(t,i){return n("div",{key:"browser-"+i,staticClass:"browser mainComponent",class:{order1:t,order5:!t},attrs:{id:"browserComponent_"+t}},[n("minimizer",{attrs:{"is-column":!0}}),e._v(" "),n("concept-scheme-selection",{ref:t?"conceptSchemeSelectionLeft":"conceptSchemeSelectionRight",refInFor:!0,staticClass:"mainComponent visualComponent",style:null!=e.selected.scheme[t]?"":"flex: 1;",attrs:{"is-left":t}}),e._v(" "),null!=e.selected.scheme[t]?n("div",{staticClass:"conceptBrowser"},[n("item-detail",{staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemDetail",attrs:{id:"itemDetailComponent_"+t,item:e.selected.concept[t]||e.selected.scheme[t],"is-left":t,settings:e.itemDetailSettings[t?"left":"right"]}}),e._v(" "),n("resizing-slider"),e._v(" "),n("concept-tree",{ref:t?"conceptTreeLeft":"conceptTreeRight",refInFor:!0,staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemTree",attrs:{id:"conceptTreeComponent_"+t,"is-left":t}})],1):e._e()],1)}),e._v(" "),n("resizing-slider",{staticClass:"order2",attrs:{"is-column":!0}}),e._v(" "),n("div",{staticClass:"mappingTool order3",attrs:{id:"mappingTool"}},[n("div",{staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingEditorComponent"}},[e.selected.scheme[!0]||e.selected.scheme[!1]?n("mapping-editor"):e._e(),e._v(" "),n("minimizer",{ref:"minimizer",attrs:{text:e.$t("mappingEditor.title")}})],1),e._v(" "),n("resizing-slider",{attrs:{"cocoda-red":!0}}),e._v(" "),n("div",{staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingBrowserComponent"}},[e.selected.scheme[!0]||e.selected.scheme[!1]?n("mapping-browser"):n("div",{staticClass:"placeholderComponentCenter"},[n("div",{staticClass:"fontWeight-heavy fontSize-large"},[n("p",[e._v(e._s(e.$t("general.welcome")))]),e._v(" "),n("p",[n("a",{attrs:{href:"https://gbv.github.io/cocoda/#manual",target:"_blank"}},[e._v(e._s(e.$t("general.manual")))]),e._v(" -\n                "),n("a",{attrs:{href:"https://gbv.github.io/cocoda/",target:"_blank"}},[e._v(e._s(e.$t("general.documentation")))]),e._v(" -\n                "),n("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[e._v(e._s(e.$t("general.github")))])]),e._v(" "),e.config.feedbackUrl?n("p",[n("br"),e._v(" "),n("a",{attrs:{href:e.config.feedbackUrl,target:"_blank"}},[e._v(e._s(e.$t("general.feedback")))]),e._v(" "),n("br"),e._v("\n                "+e._s(e.$t("general.feedback2"))+"\n              ")]):e._e()])]),e._v(" "),n("minimizer",{attrs:{text:e.$t("mappingBrowser.title")}})],1)],1),e._v(" "),n("resizing-slider",{staticClass:"order4",attrs:{"is-column":!0}})],2)]):e._e()],1)},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{toggleable:"md",type:"dark"}},[e._l(e.config.logos||[],function(e,t){return n("b-navbar-brand",{key:t,attrs:{href:e.url,target:"_blank"}},[n("img",{staticStyle:{height:"42px"},attrs:{src:"./"+e.file,alt:e.alt||"logo"}})])}),e._v(" "),n("b-navbar-brand",{attrs:{href:"https://coli-conc.gbv.de/cocoda/",target:"_blank"}},[e._v("\n    "+e._s(e.config.title)+"\n  ")]),e._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"},[e._l(e.config.menu,function(t){return n("b-nav-item",{key:t.url,attrs:{href:t.url,target:"_blank"}},[e._v("\n      "+e._s(e.$util.prefLabel(t))+"\n    ")])}),e._v(" "),n("b-nav-item-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.right",value:e.favoriteCanBeDropped?"drop here to favorite":"",expression:"favoriteCanBeDropped ? 'drop here to favorite' : ''",modifiers:{right:!0}}],ref:"favoriteConceptsDropdown",attrs:{id:"favoriteConceptsDropdown","extra-menu-classes":"favoriteConceptsDropdown","no-caret":"",right:""},on:{hide:e.favoriteConceptsDropdownHide},nativeOn:{mouseover:function(t){return e.favoriteConceptsDropdownMouseover(t)},mouseout:function(t){return e.favoriteConceptsDropdownMouseout(t)}}},[n("template",{slot:"button-content"},[n("font-awesome-icon",{class:e.favoriteCanBeDropped?"favoriteConceptsDropdown-iconTarget":"",attrs:{icon:"star"},on:{dragover:e.dragOver,drop:e.drop}})],1),e._v(" "),n("b-dropdown-header",[e._v("Favorite Concepts")]),e._v(" "),e._l(e.favoriteConcepts,function(t){return n("b-dropdown-item",{key:"theNavbar-"+t.uri+"-favorite",attrs:{draggable:""},on:{dragstart:function(n){return e.favoriteConceptDragStart(t)},dragend:e.favoriteConceptDragEnd}},[n("item-name",{attrs:{item:t}}),e._v(" "),n("div",{staticClass:"button favoriteConceptsDropdown-removeButton",on:{click:function(n){return e.removeFavoriteConcept(t)}}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)})],2),e._v(" "),n("b-nav-item",{staticClass:"navbar-identitySettings",attrs:{href:e.userIdentityImage&&e.creator&&e.creator.uri,target:"_blank"}},[e.userIdentityImage&&e.creator.uri?n("span",[n("img",{attrs:{src:e.userIdentityImage}})]):n("span",{style:"color: "+(e.$store.state.auth.available?e.authorized?"green":e.$store.state.auth.connected?"red":"yellow":"black")+" !important;"},[n("font-awesome-icon",{attrs:{icon:"user"}})],1)]),e._v(" "),n("b-nav-item",{on:{click:function(t){return e.$refs.settings.show()}}},[e._v("\n      "+e._s(e.creatorName||e.$t("navbar.settings"))+"\n    ")]),e._v(" "),e.$store.getters.getCurrentRegistry?n("b-nav-item",[n("registry-notation",{staticStyle:{opacity:"0.7",cursor:"default"},attrs:{registry:e.$store.getters.getCurrentRegistry}})],1):e._e(),e._v(" "),n("the-settings",{ref:"settings"})],2)],2)},a=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"settingsModal",attrs:{id:"settingsModal",title:e.$t("settings.title"),"hide-footer":"",centered:"",size:"lg"}},[n("b-card",{attrs:{"no-body":"","footer-tag":"footer"}},[n("b-tabs",{attrs:{pills:"",card:"",vertical:""}},[n("b-tab",{attrs:{title:e.$t("settings.tabAccount"),active:""}},[e.localSettings?n("div",[n("h4",[e._v(e._s(e.$t("settings.creatorTitle")))]),e._v(" "),n("p",[e._v("\n            "+e._s(e.$t("settings.creatorInfo"))+"\n          ")]),e._v(" "),n("p",[n("b",[e._v(e._s(e.$t("settings.creator")))]),e._v(" "),e.user&&e.localSettings.creatorUri!=e.user.uri?n("span",[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"flex-grow-1"},[n("b-form-input",{attrs:{value:e.creatorName,type:"text",disabled:""}})],1),e._v(" "),e.userIdentityProvider?n("div",{staticClass:"ml-2"},[e.userIdentityImage?n("img",{attrs:{src:e.userIdentityImage,height:"24px"}}):e._e(),e._v("\n                  "+e._s(e.userIdentityProvider.name)+"\n                ")]):e._e()])]):n("span",[n("b-form-input",{attrs:{placeholder:e.$t("settings.creatorPlaceholder"),type:"text"},model:{value:e.localSettings.creator,callback:function(t){e.$set(e.localSettings,"creator",t)},expression:"localSettings.creator"}})],1)]),e._v(" "),n("p",[n("b",[e._v(e._s(e.$t("settings.creatorUri")))]),e._v(" "),e.user&&e.userUris&&e.userUris.length?n("span",[n("b-form-select",{model:{value:e.localSettings.creatorUri,callback:function(t){e.$set(e.localSettings,"creatorUri",t)},expression:"localSettings.creatorUri"}},e._l(e.userUris,function(t){return n("option",{key:"settings-uris-"+t,domProps:{value:t}},[e._v("\n                  "+e._s(t)+"\n                ")])}),0)],1):n("span",[n("b-form-input",{attrs:{placeholder:"https://",type:"text"},model:{value:e.localSettings.creatorUri,callback:function(t){e.$set(e.localSettings,"creatorUri",t)},expression:"localSettings.creatorUri"}})],1)]),e._v(" "),e.user&&e.authorized?n("p",[n("span",{staticClass:"text-success"},[e._v("\n              "+e._s(e.$t("settings.loggedIn"))+"\n            ")]),e._v(" "),n("a",{attrs:{href:e.$store.state.auth.about.baseUrl+"/account",target:"_blank"}},[e._v("\n              "+e._s(e.$t("settings.accountPage"))+"\n            ")]),e._v(" •\n            "),n("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.login(null)}}},[e._v("\n              Logout\n            ")])]):e._e(),e._v(" "),e.$store.state.auth.available&&!e.user&&e.providers.length?n("p",e._l(e.providers,function(t){return n("b-button",{key:"login-provider-"+t.id,attrs:{block:"",variant:"light"},on:{click:function(n){return e.login(t)}}},[t.image?n("img",{staticStyle:{"margin-right":"5px"},attrs:{src:t.image,height:"20px"}}):e._e(),e._v("\n              Login via "+e._s(t.name)+"\n            ")])}),1):e._e(),e._v(" "),e.$store.state.auth.connected?n("div",[n("p",[n("span",{domProps:{innerHTML:e._s(e.$t("settings.accountInfo",{url:e.config.auth}))}}),e._v(" "),e.$store.state.auth.about.urls.imprint?n("a",{attrs:{href:e.$store.state.auth.about.urls.imprint,target:"_blank"}},[e._v("\n                "+e._s(e.$t("settings.impressum"))+"\n              ")]):e._e(),e._v(" •\n              "),e.$store.state.auth.about.urls.privacy?n("a",{attrs:{href:e.$store.state.auth.about.urls.privacy,target:"_blank"}},[e._v("\n                "+e._s(e.$t("settings.privacyPolicy"))+"\n              ")]):e._e()])]):e._e(),e._v(" "),e.availableMappingRegistries.length?n("div",[n("h4",[e._v(e._s(e.$t("settings.mappingRegistry")))]),e._v(" "),n("p",[e._v("\n              "+e._s(e.$t("settings.mappingRegistryExplanation"))+"\n              "),n("b-form-select",{staticStyle:{"margin-bottom":"10px"},model:{value:e.localSettings.mappingRegistry,callback:function(t){e.$set(e.localSettings,"mappingRegistry",t)},expression:"localSettings.mappingRegistry"}},e._l(e.availableMappingRegistries,function(t){return n("option",{key:"settings-registry-"+t.uri,domProps:{value:t.uri}},[e._v("\n                  "+e._s(e.$util.prefLabel(t))+"\n                ")])}),0),e._v(" "),n("registry-info",{attrs:{registry:e.$store.getters.getCurrentRegistry}})],1)]):e._e()]):e._e()]),e._v(" "),n("b-tab",{attrs:{title:e.$t("settings.tabLayout")}},[e.localSettings?n("p",[n("b",[e._v(e._s(e.$t("settings.language")))]),e._v(" "),n("b-form-select",{model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}},e._l(e.config.languages,function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n              "+e._s(e.$t("languages."+t))+"\n            ")])}),0),e._v(" "),n("br"),n("br"),n("span",{domProps:{innerHTML:e._s(e.$t("settings.languageContribution"))}})],1):e._e(),e._v(" "),e.localSettings?n("p",[n("b-form-checkbox",{model:{value:e.localSettings.conceptDetailShowAllAncestors,callback:function(t){e.$set(e.localSettings,"conceptDetailShowAllAncestors",t)},expression:"localSettings.conceptDetailShowAllAncestors"}},[e._v("\n            "+e._s(e.$t("settings.showAllAncestors"))+"\n          ")])],1):e._e(),e._v(" "),e.localSettings?n("p",[n("b-form-checkbox",{model:{value:e.localSettings.conceptDetailDoNotTruncateNotes,callback:function(t){e.$set(e.localSettings,"conceptDetailDoNotTruncateNotes",t)},expression:"localSettings.conceptDetailDoNotTruncateNotes"}},[e._v("\n            "+e._s(e.$t("settings.truncateNotes"))+"\n          ")])],1):e._e(),e._v(" "),e.localSettings?n("p",[n("b-form-checkbox",{model:{value:e.localSettings.autoInsertLabels,callback:function(t){e.$set(e.localSettings,"autoInsertLabels",t)},expression:"localSettings.autoInsertLabels"}},[e._v("\n            "+e._s(e.$t("settings.autoInsertLabels"))+"\n          ")])],1):e._e(),e._v(" "),e.localSettings?n("p",[n("b-form-checkbox",{model:{value:e.localSettings.conceptTreeAddToMappingSelectsConcept,callback:function(t){e.$set(e.localSettings,"conceptTreeAddToMappingSelectsConcept",t)},expression:"localSettings.conceptTreeAddToMappingSelectsConcept"}},[e._v("\n            "+e._s(e.$t("settings.conceptTreeAddToMappingSelectsConcept"))+"\n          ")])],1):e._e(),e._v(" "),n("p",[n("b-button",{attrs:{variant:"primary"},on:{click:e.resetFlex}},[e._v("\n            "+e._s(e.$t("settings.resetSizes"))+"\n          ")])],1),e._v(" "),n("br")]),e._v(" "),e.config.shortcuts&&e.config.shortcuts.length?n("b-tab",{attrs:{title:e.$t("settings.tabShortcuts")}},[n("h4",[e._v(" "+e._s(e.$t("settings.tabShortcuts")))]),e._v(" "),e._l(e.config.shortcuts,function(t){return n("p",{key:"settingsModal-shortcuts-"+t.id},[n("b",[e._v(e._s(e.$util.prefLabel(t)||t.action))]),n("br"),e._v(" "),n("span",{domProps:{innerHTML:e._s(t.keys.split(",").map(function(t){return t.split("+").map(function(t){return"<kbd>"+e.replaceKey(t)+"</kbd>"}).join(" + ")}).join(" "+e.$t("general.or")+" "))}})])})],2):e._e(),e._v(" "),n("b-tab",{attrs:{title:e.$t("settings.tabSources")}},e._l(e.config.registries,function(e,t){return n("registry-info",{key:"settingsModal-registries-"+t,staticClass:"settings-sources",attrs:{registry:e}})}),1),e._v(" "),e.localMappingsSupported?n("b-tab",{attrs:{title:e.$t("settings.tabLocalMappings")}},[n("div",[n("h4",[e._v(e._s(e.$t("settings.tabLocalMappings")))]),e._v(" "),n("p",[e._v(e._s(e.$t("settings.localMappingsInfo")))])]),e._v(" "),e.localMappingsSupported&&e.dlAllMappings&&e.dlMappingsReady?n("div",[n("h4",[e._v(e._s(e.$t("settings.localDownload")))]),e._v(" "),e._l(e.dlMappings,function(t,i){return n("span",{key:i},[e._v("\n            "+e._s(t.label)+" ("+e._s(t.mappings.length)+"):\n            "),n("a",{attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.downloadFile(t.filename+".ndjson",t.ndjson)}}},[e._v("\n              JSKOS\n            ")]),e._v(" "),n("a",{attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.downloadFile(t.filename+".csv",t.csv)}}},[e._v("\n              CSV\n            ")]),e._v(" "),n("br")])}),e._v(" "),n("br"),e._v(" "),n("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.downloadFile("mappings.ndjson",e.dlAllMappings)}}},[e._v("\n            "+e._s(e.$t("settings.localDownloadJskos",[e.dlAllMappings.split("\n").length]))+"\n          ")])],2):e._e(),e._v(" "),n("br"),e._v(" "),e.localMappingsSupported?n("div",[n("h4",[e._v(e._s(e.$t("settings.localUpload")))]),e._v(" "),n("b-form-file",{ref:"fileUpload",attrs:{state:Boolean(e.uploadedFile),placeholder:e.$t("settings.localUploadPlaceholder"),accept:".ndjson"},model:{value:e.uploadedFile,callback:function(t){e.uploadedFile=t},expression:"uploadedFile"}}),e._v(" "),n("p",[e._v("\n            "+e._s(e.uploadedFileStatus)+"\n          ")])],1):e._e(),e._v(" "),e.localMappingsSupported&&e.dlAllMappings?n("div",[n("h4",[e._v(e._s(e.$t("settings.localDeleteTitle")))]),e._v(" "),n("b-button",{attrs:{disabled:!e.dlAllMappings,variant:"danger","hide-footer":""},on:{click:function(t){e.deleteMappingsButtons=!0}}},[e._v("\n            "+e._s(e.$t("settings.localDeleteText"))+"\n          ")]),e._v(" "),e.deleteMappingsButtons?n("p",[e._v("\n            "+e._s(e.$t("settings.localDeleteSure"))+"\n            "),n("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:e.deleteMappings}},[e._v("\n              "+e._s(e.$t("general.yes"))+"\n            ")]),e._v(" "),n("b-button",{attrs:{variant:"success",size:"sm"},on:{click:function(t){e.deleteMappingsButtons=!1}}},[e._v("\n              "+e._s(e.$t("general.no"))+"\n            ")])],1):e._e()],1):e._e(),e._v(" "),n("br"),n("br"),e._v(" "),e.localMappingsSupported&&e.dlAllMappings?n("div",[n("h4",[e._v(e._s(e.$t("settings.creatorRewriteTitle")))]),e._v(" "),n("p",{domProps:{innerHTML:e._s(e.$t("settings.creatorRewriteText"))}}),e._v(" "),n("p",{staticClass:"fontSize-small"},[n("b",[e._v("Name:")]),e._v(" "+e._s(e.$util.prefLabel(e.creator))),n("br"),e._v(" "),n("b",[e._v("URI:")]),e._v(" "+e._s(e.creator.uri)+"\n          ")]),e._v(" "),n("p",[n("b-button",{attrs:{variant:e.creatorRewritten?"success":"warning"},on:{click:e.rewriteCreator}},[e._v("\n              "+e._s(e.$t("settings.creatorRewriteButton"))+"\n            ")])],1)]):e._e()]):e._e()],1),e._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[n("font-awesome-icon",{attrs:{icon:["fab","github"]}}),e._v("\n        GitHub\n      ")],1),e._v(" "),e.config.buildInfo.version&&""!=e.config.buildInfo.version?n("span",[e._v("\n        •\n        "+e._s(e.$t("settings.version"))+" "+e._s(e.config.buildInfo.version)+"\n      ")]):e._e(),e._v(" "),e.config.buildInfo.gitCommit&&e.config.buildInfo.gitCommitShort?n("span",[e._v("\n        •\n        "+e._s(e.$t("settings.currentCommit"))+":\n        "),n("a",{attrs:{href:"https://github.com/gbv/cocoda/commit/"+e.config.buildInfo.gitCommit,target:"_blank"}},[e._v("\n          "+e._s(e.config.buildInfo.gitCommitShort)+"\n        ")])]):e._e(),e._v(" "),e.config.buildInfo.buildDate?n("span",[e._v("\n        •\n        "+e._s(e.$t("settings.buildDate"))+": "+e._s(e.$util.dateToString(e.config.buildInfo.buildDate))+"\n      ")]):e._e(),e._v(" "),e.config.impressum?n("span",[e._v("\n        •\n        "),n("a",{attrs:{href:e.config.impressum,target:"_blank"}},[e._v("\n          "+e._s(e.$t("settings.impressum"))+"\n        ")])]):e._e(),e._v(" "),n("br"),e._v(" "),n("span",[e._v("\n        "+e._s(e.$t("settings.suggestions1"))+"\n        "),n("a",{attrs:{href:"https://github.com/gbv/cocoda/issues",target:"_blank"}},[e._v(e._s(e.$t("settings.suggestions2")))]),e._v(e._s(e.$t("settings.suggestions3"))+"\n      ")])])],1)],1)},c=[],p=n("2ef0"),u=n.n(p),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"registry-info"},[n("div",[n("registry-notation",{attrs:{registry:e.registry}}),e._v(" "),n("div",{staticClass:"settings-info-title fontWeight-heavy",staticStyle:{display:"inline-block"}},[e._v("\n      "+e._s(e.$util.prefLabel(e.registry))+"\n    ")])],1),e._v(" "),n("div",{staticClass:"settings-info-definition"},[e._v("\n    "+e._s(e.$util.definition(e.registry).join(" "))+"\n  ")]),e._v(" "),n("div",{staticClass:"settings-info-uri fontSize-small"},[n("auto-link",{attrs:{link:e.registry.uri}})],1),e._v(" "),n("div",{staticClass:"settings-info-capabilities"},[e._l(["schemes","concepts","mappings","occurrences"],function(t){return n("span",{key:"settings-info-capabilities-"+t},[e.registry.provider.has[t]?n("span",[e.registry.provider.has[t]?n("font-awesome-icon",{staticStyle:{color:"green","margin-left":"5px"},attrs:{icon:"check"}}):e._e(),e._v("\n        "+e._s(e.$t("registryInfo."+t))+"\n      ")],1):e._e()])}),e._v(" "),e.registry.provider.has.auth?n("span",{staticStyle:{"margin-left":"5px"}},[e.authorized?n("span",{staticStyle:{color:"green"}},[n("font-awesome-icon",{attrs:{icon:"lock-open"}}),e._v("\n        "+e._s(e.$t("registryInfo.authenticated"))+"\n      ")],1):n("span",{staticStyle:{color:"red"}},[n("font-awesome-icon",{attrs:{icon:"lock"}}),e._v("\n        "+e._s(e.$t("registryInfo.notAuthenticated"))+"\n      ")],1)]):e._e()],2)])},d=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isValidURL(e.link)?n("a",{staticClass:"u-textBreak",attrs:{href:e.link,target:"_blank"}},[e._v(e._s(e.text||e.link))]):n("span",[e._v(e._s(e.text||e.link))])},g=[],f={name:"AutoLink",props:{link:{type:String,default:""},text:{type:String,default:null}},methods:{isValidURL:function(e){return e&&!!e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/g)}}},v=f,y=n("2877"),b=Object(y["a"])(v,h,g,!1,null,null,null),_=b.exports,w=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.left",value:t.tooltip?t.$util.prefLabel(t.registry):"",expression:"tooltip ? $util.prefLabel(registry) : ''",modifiers:{html:!0,left:!0}}],staticClass:"registry-notation",class:(e={},e[t.isCurrentRegistry?"registry-current-enabled":"registry-enabled"]=!t.disabled,e["registry-notation-current"]=t.isCurrentRegistry,e),style:"width: "+(18+12*(t.$util.notation(t.registry).length-1))+"px;"},[t._v("\n  "+t._s(t.$util.notation(t.registry))+"\n")])},$=[],S={name:"RegistryNotation",props:{registry:{type:Object,default:null},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!0}},computed:{isCurrentRegistry:function(){return this.$jskos.compare(this.registry,this.$store.getters.getCurrentRegistry)}}},C=S,k=(n("3ee3"),Object(y["a"])(C,w,$,!1,null,null,null)),x=k.exports,M=n("a189"),L={name:"RegistryInfo",components:{AutoLink:_,RegistryNotation:x},mixins:[M["a"]],props:{registry:{type:Object,default:null}}},D=L,T=(n("eb84"),Object(y["a"])(D,m,d,!1,null,"7de7c5a2",null)),j=T.exports,A=n("a085"),O={name:"TheSettings",components:{RegistryInfo:j},mixins:[M["a"],A["a"]],data:function(){return{localSettings:null,creatorRewritten:!1,dlMappingsReady:!1,dlAllMappings:null,dlMappings:[],uploadedFile:null,uploadedFileStatus:"",deleteMappingsButtons:!1}},computed:{localMappingsSupported:function(){var e=this.config.registries.find(function(e){return"http://coli-conc.gbv.de/registry/local-mappings"==e.uri});return null!=e},availableMappingRegistries:function(){return this.config.registries.filter(function(e){return e.provider.has.canSaveMappings})}},watch:{localSettings:{handler:function(){this.$store.commit({type:"settings/save",settings:this.localSettings}),this.creatorRewritten=!1},deep:!0},uploadedFile:function(){var e=this;if(this.uploadedFile&&this.localMappingsSupported){var t=new FileReader;t.onloadend=function(t){var n,i,r=t.target.result;n=r.split("\n"),i={imported:0,skipped:0,error:0,empty:0};var o=[],s=!0,a=!1,l=void 0;try{for(var c,p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var u=c.value;if(""!==u)try{var m=JSON.parse(u);o.push({mapping:m})}catch(d){i.error+=1}else i.empty+=1}}catch(h){a=!0,l=h}finally{try{s||null==p.return||p.return()}finally{if(a)throw l}}e.$store.dispatch({type:"mapping/saveMappings",mappings:o,registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(function(t){i.imported=t.length,i.skipped=n.length-i.imported-i.error-i.empty,e.uploadedFileStatus="".concat(i.imported," mappings imported, ").concat(i.skipped," skipped, ").concat(i.error," errored"),e.$refs.fileUpload.reset(),e.refreshDownloads(),e.$store.commit("mapping/setRefresh",{registry:"http://coli-conc.gbv.de/registry/local-mappings"})})},t.readAsText(this.uploadedFile)}}},methods:{show:function(){this.$refs.settingsModal.show(),this.localSettings=u.a.cloneDeep(this.$settings),this.refreshDownloads()},refreshDownloads:function(){var e=this;if(this.localMappingsSupported){this.dlMappingsReady=!1,this.dlAllMappings=null,this.dlMappings=[];var t=[];this.getMappings({registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(function(n){t=n;var i=[],r=!0,o=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,p=["from","to"],u=0;u<p.length;u++){var m=p[u],d=!0,h=!1,g=void 0;try{for(var f,v=e.$jskos.conceptsOfMapping(c,m)[Symbol.iterator]();!(d=(f=v.next()).done);d=!0){var y=f.value,b=c[m+"Scheme"];y.inScheme&&y.inScheme.length||(y.inScheme=[b]),i.push(e.loadDetails(y,{scheme:b}))}}catch(_){h=!0,g=_}finally{try{d||null==v.return||v.return()}finally{if(h)throw g}}}}catch(_){o=!0,s=_}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return Promise.all(i)}).then(function(){var n=function(t){var n=e.$jskos.minifyMapping(t),i=!0,r=!1,o=void 0;try{for(var s,a=e.$jskos.conceptsOfMapping(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=e._getObject(l),p=e.$util.getLanguage(u.a.get(c,"prefLabel"));p&&(l.prefLabel=u.a.pick(c.prefLabel,[p]))}}catch(m){r=!0,o=m}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return JSON.stringify(n)};e.dlAllMappings=t.map(n).join("\n");for(var i=t,r=function(){var t=i[o];t.fromScheme=e._getObject(t.fromScheme)||t.fromScheme,t.toScheme=e._getObject(t.toScheme)||t.toScheme;var n=e.dlMappings.find(function(n){return e.$jskos.compare(t.fromScheme,n.fromScheme)&&e.$jskos.compare(t.toScheme,n.toScheme)});n?n.mappings.push(t):(n={fromScheme:t.fromScheme,toScheme:t.toScheme,mappings:[t]},e.dlMappings.push(n))},o=0;o<i.length;o++)r();var s=!0,a=!1,l=void 0;try{for(var c,p=e.dlMappings[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var m=c.value;m.ndjson=m.mappings.map(n).join("\n");var d='"fromNotation","fromLabel","toNotation","toLabel","type"\r\n',h=e.$jskos.mappingToCSV({lineTerminator:"\r\n",language:"de"});m.mappings=m.mappings.map(function(t){return e.$jskos.minifyMapping(t)});var g=!0,f=!1,v=void 0;try{for(var y,b=m.mappings[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var _=y.value,w=!0,$=!1,S=void 0;try{for(var C,k=e.$jskos.conceptsOfMapping(_)[Symbol.iterator]();!(w=(C=k.next()).done);w=!0){var x=C.value,M=e._getObject(x),L=e.$util.getLanguage(u.a.get(M,"prefLabel"));L&&(x.prefLabel={de:u.a.get(M.prefLabel,L)})}}catch(D){$=!0,S=D}finally{try{w||null==k.return||k.return()}finally{if($)throw S}}d+=h(_)}}catch(D){f=!0,v=D}finally{try{g||null==b.return||b.return()}finally{if(f)throw v}}m.csv=d,m.label=(e.$util.notation(u.a.get(m,"fromScheme"),"scheme")||"?")+" to "+(e.$util.notation(u.a.get(m,"toScheme"),"scheme")||"?"),m.filename="".concat(e.$util.notation(u.a.get(m,"fromScheme"),"scheme")||"?","_to_").concat(e.$util.notation(u.a.get(m,"toScheme"),"scheme")||"?","_").concat(e.localSettings.creator)}}catch(D){a=!0,l=D}finally{try{s||null==p.return||p.return()}finally{if(a)throw l}}e.dlMappingsReady=!0})}},rewriteCreator:function(){var e=this;this.localMappingsSupported&&this.$store.dispatch({type:"mapping/getMappings",registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(function(t){var n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;u.a.set(a,"creator",[e.creator])}}catch(l){i=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e.$store.dispatch({type:"mapping/saveMappings",mappings:t.map(function(e){return{mapping:e,original:e}}),registry:"http://coli-conc.gbv.de/registry/local-mappings"})}).then(function(){e.creatorRewritten=!0,e.$store.commit("mapping/setRefresh",{registry:"http://coli-conc.gbv.de/registry/local-mappings"}),e.refreshDownloads()})},resetFlex:function(){var e=u.a.cloneDeep(this.localSettings.flex);u.a.forOwn(e,function(t,n){e[n]=""}),this.$store.commit({type:"settings/set",prop:"flex",value:e})},deleteMappings:function(){var e=this;this.localMappingsSupported&&this.$store.dispatch({type:"mapping/getMappings",registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(function(t){return e.$store.dispatch({type:"mapping/removeMappings",mappings:t,registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(function(n){var i=n.filter(function(e){return e}).length;t.length!=i&&console.warn("Error when removing mappings, tried to remove ".concat(t.length,", but only removed ").concat(i,".")),e.$store.commit("mapping/setRefresh",{registry:"http://coli-conc.gbv.de/registry/local-mappings"}),e.refreshDownloads(),e.deleteMappingsButtons=!1})})},login:function(e){var t,n;e?(t=e.loginURL,n="login"):(t=this.config.auth+"logout",n="logout"),this.$store.commit({type:"auth/openWindow",url:t,eventType:n})},replaceKey:function(e){var t={shift:"Shift",alt:"Alt",option:"Alt",ctrl:"Ctrl",meta:"Cmd",command:"Cmd"};return t[e]||e}}},B=O,R=(n("cd28"),n("38c8"),Object(y["a"])(B,l,c,!1,null,"7e5e0efc",null)),E=R.exports,I=n("68bc"),N={name:"TheNavbar",components:{TheSettings:E,ItemName:I["a"],RegistryNotation:x},mixins:[M["a"],A["a"]],computed:{favoriteCanBeDropped:function(){return null!=this.draggedConcept&&!this.$jskos.isScheme(this.draggedConcept)&&!this.$jskos.isContainedIn(this.draggedConcept,this.favoriteConcepts)}},watch:{draggedConcept:function(e){var t=this;e?u.a.delay(function(){t.$root.$emit("bv::show::tooltip","favoriteConceptsDropdown")},100):this.$root.$emit("bv::hide::tooltip","favoriteConceptsDropdown")}},methods:{favoriteConceptDragStart:function(e){event.dataTransfer.setData("text",e.uri),this.draggedConcept=e},favoriteConceptDragEnd:function(e){"none"!=e.dataTransfer.dropEffect&&this.$refs.favoriteConceptsDropdown.hide(),this.draggedConcept=null},favoriteConceptsDropdownMouseover:function(){this.$refs.favoriteConceptsDropdown.show()},favoriteConceptsDropdownMouseout:function(){this.$refs.favoriteConceptsDropdown.hide()},favoriteConceptsDropdownHide:function(){this.$refs.favoriteConceptsDropdown.$el.getElementsByClassName("favoriteConceptsDropdown")[0].scrollTop=0},droppedConcept:function(e){this.$store.dispatch("addConceptToFavorites",e)},removeFavoriteConcept:function(e){this.$store.dispatch("removeConceptFromFavorites",e)}}},z=N,P=(n("28e9"),n("b1fa"),Object(y["a"])(z,s,a,!1,null,"2e2202ff",null)),F=P.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.canSaveMapping?"mappingEditor-notSaved":e.canExportMapping&&!e.hasChangedFromOriginal?"mappingEditor-saved":"mappingEditor-cantSave",attrs:{id:"mappingEditor"}},[n("div",{attrs:{id:"mappingEditor-settingsButton"}},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.settingsButton"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.settingsButton'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{id:"mappingEditor-settingsButton-icon",icon:"cog"}}),e._v(" "),n("b-popover",{attrs:{show:e.settingsShow,target:"mappingEditor-settingsButton-icon",triggers:"click",placement:"bottomleft"},on:{"update:show":function(t){e.settingsShow=t}}},[n("div",{ref:"settingsPopover"},[n("p",[n("b",[e._v(e._s(e.$t("navbar.settings")))])]),e._v(" "),n("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.settingClearOnSaveTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.settingClearOnSaveTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.clearOnSave,callback:function(t){e.clearOnSave=t},expression:"clearOnSave"}},[e._v("\n          "+e._s(e.$t("mappingEditor.settingClearOnSave"))+"\n        ")]),e._v(" "),n("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.settingOnly1to1mappingsTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.settingOnly1to1mappingsTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.only1to1mappings,callback:function(t){e.only1to1mappings=t},expression:"only1to1mappings"}},[e._v("\n          "+e._s(e.$t("mappingEditor.settingOnly1to1mappings"))+"\n        ")])],1)])],1),e._v(" "),n("div",{staticClass:"mappingEditorToolbar"},[n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSwapMapping?e.$t("mappingEditor.swapMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canSwapMapping ? $t('mappingEditor.swapMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSwapMapping,"button-disabled":!e.canSwapMapping},on:{click:e.swapMapping}},[n("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),e._v(" "),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSaveMapping?e.$t("mappingEditor.saveMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canSaveMapping ? $t('mappingEditor.saveMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSaveMapping,"button-disabled":!e.canSaveMapping},on:{click:e.saveMapping}},[n("font-awesome-icon",{attrs:{icon:"save"}})],1),e._v(" "),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canDeleteMapping?e.$t("mappingEditor.deleteMapping"):!e.$store.getters.getCurrentRegistry.provider.has.auth||e.$store.getters.getCurrentRegistry.provider.auth?"":e.$t("general.authNecessary"),delay:e.$util.delay.medium},expression:"{ title: canDeleteMapping ? $t('mappingEditor.deleteMapping') : ((!$store.getters.getCurrentRegistry.provider.has.auth || $store.getters.getCurrentRegistry.provider.auth) ? '' : $t('general.authNecessary')), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{"button-delete":e.canDeleteMapping,"button-disabled":!e.canDeleteMapping},on:{click:e.deleteMapping}},[n("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1),e._v(" "),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canClearMapping?e.$t("mappingEditor.clearMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canClearMapping ? $t('mappingEditor.clearMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canClearMapping,"button-disabled":!e.canClearMapping},on:{click:e.clearMapping}},[n("font-awesome-icon",{attrs:{icon:"ban"}})],1)]),e._v(" "),e._l([!0,!1],function(t,i){return n("div",{key:i,staticClass:"mappingEditorPart",class:{"mappingEditorPart-noConcepts":null==e.$store.getters["mapping/getScheme"](t)||!e.$store.getters["mapping/getConcepts"](t).length,"mappingEditorPart-dropTarget":null!=e.draggedConcept},style:{order:2*i},on:{dragover:e.dragOver,drop:function(n){return e.drop(n,t)}}},[null!=e.$store.getters["mapping/getScheme"](t)&&e.$store.getters["mapping/getConcepts"](t).length?n("div",[n("div",{staticClass:"mappingScheme fontWeight-heavy"},[n("item-name",{attrs:{item:e.$store.getters["mapping/getScheme"](t),"is-link":!0,"is-left":t,"show-text":!1,"show-tooltip":!0}})],1),e._v(" "),n("div",{staticClass:"mappingConceptList"},[n("ul",e._l(e.$store.getters["mapping/getConcepts"](t),function(i,r){return n("li",{key:r},[n("item-name",{attrs:{item:i,"is-link":!0,"is-left":t,"is-highlighted":e.$jskos.compare(i,e.selected.concept[!0])||e.$jskos.compare(i,e.selected.concept[!1]),"font-size":"large"}}),e._v(" "),n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.removeConceptFromMapping"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.removeConceptFromMapping'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button fontSize-large",on:{click:function(n){return e.$store.commit({type:"mapping/remove",concept:i,isLeft:t})}}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)}),0)])]):n("div",[n("div",{staticClass:"mappingNoConcepts"},[null==e.draggedConcept?n("div",{staticStyle:{"margin-bottom":"-12px"}},[e._v("\n          "+e._s(e.$t("mappingEditor.placeholder"))),n("br"),n("br")]):n("div",{staticClass:"fontWeight-heavy"},[e._v("\n          "+e._s(e.$t("mappingEditor.placeholderDragging"))+"\n        ")]),e._v(" "),null==e.draggedConcept?n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.isAddButtonEnabled(t)?e.$t("mappingEditor.addConcept"):"",delay:e.$util.delay.medium},expression:"{ title: isAddButtonEnabled(isLeft) ? $t('mappingEditor.addConcept') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditor-addButton",class:{button:e.isAddButtonEnabled(t),"button-disabled":!e.isAddButtonEnabled(t)},on:{click:function(n){return e.addToMappingInternal(t)}}},[n("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()])])])}),e._v(" "),n("div",{staticClass:"mappingTypeSelection"},[n("mapping-type-selection",{directives:[{name:"show",rawName:"v-show",value:null!=e.selected.scheme[!0]||null!=e.selected.scheme[!1],expression:"selected.scheme[true] != null || selected.scheme[false] != null"}],attrs:{mapping:e.$store.state.mapping.mapping}})],1),e._v(" "),n("div",{staticClass:"mappingEditor-comment"},[n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canExportMapping?e.$t("mappingEditor.commentMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canExportMapping ? $t('mappingEditor.commentMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],class:{button:e.canExportMapping,"button-disabled":!e.canExportMapping},on:{click:function(t){e.canExportMapping&&e.$refs.commentModal.show()}}},[n("font-awesome-icon",{attrs:{icon:"comment"}})],1),e._v("\n    "+e._s(e.mappingComments.join(", "))+"\n  ")]),e._v(" "),n("div",{staticClass:"mappingEditor-creator"},[e._v("\n    "+e._s(e.creatorName)+"\n  ")]),e._v(" "),n("div",{staticClass:"mappingEditor-title"},[e._v("\n    "+e._s(e.$t("mappingEditor.title"))+"\n  ")]),e._v(" "),n("b-modal",{ref:"deleteModal",staticClass:"mappingEditor-deleteModal",attrs:{title:e.$t("mappingEditor.deleteTitle"),"hide-footer":""}},[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){e.deleteOriginalMapping(!0)&&e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.deleteAndClear"))+"\n    ")]),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.hasChangedFromOriginal,expression:"hasChangedFromOriginal"}],attrs:{variant:"warning"},on:{click:function(t){e.deleteOriginalMapping()&&e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.deleteAndKeep"))+"\n    ")]),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.clearMapping()&&e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.keepAndClear"))+"\n    ")]),e._v(" "),n("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.cancel"))+"\n    ")])],1),e._v(" "),n("b-modal",{ref:"commentModal",attrs:{title:e.$t("mappingEditor.commentMappingTitle"),"hide-header-close":"","ok-only":""},on:{shown:e.focusNote,hide:function(t){e.comments=e.mappingComments},ok:e.saveComment}},e._l(e.comments,function(t,i){return n("b-form-textarea",{key:"mappingEditor-comment-"+i,attrs:{id:"mappingEditor-comment-"+i,rows:2,"max-rows":6},on:{input:e.saveComment},nativeOn:{keydown:function(t){return e.textareaKeydown(t)}},model:{value:e.comments[i],callback:function(t){e.$set(e.comments,i,t)},expression:"comments[index]"}})}),1),e._v(" "),n("data-modal-button",{attrs:{data:e.mapping,type:"mapping"}})],2)},U=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mappingTypes",on:{mouseover:function(t){e.hovered=!0},mouseout:function(t){e.hovered=!1}}},e._l(e.mappingTypes,function(t){return n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:{title:e.$util.prefLabel(t),delay:e.$util.delay.medium},expression:"{ title: $util.prefLabel(mappingType), delay: $util.delay.medium }",modifiers:{hover:!0,right:!0}}],key:t.uri,staticClass:"mappingType",class:{mappingTypeSelected:e.hovered&&t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri,"fontWeight-heavy":t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri,mappingTypeHovered:t&&e.mappingTypeHovered&&t.uri==e.mappingTypeHovered.uri},style:"display: "+(t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri||e.hovered?"inline-block":"none")+";",on:{click:function(n){return e.choose(t)}}},[e._v("\n    "+e._s(e.$util.notation(t))+"\n  ")])}),0)},W=[],G={name:"MappingTypeSelection",props:{mapping:{type:Object,default:null}},data:function(){return{hovered:!1,mappingTypes:this.$jskos.mappingTypes,mappingTypeHovered:null}},computed:{mappingTypeSelected:function(){var e=this.mapping;return this.$jskos.mappingTypeByType(e?e.type:null)}},methods:{choose:function(e){this.$store.commit({type:"mapping/setType",uri:e.uri})}}},q=G,Q=(n("e46c"),Object(y["a"])(q,V,W,!1,null,"6667fc9a",null)),J=Q.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"dataModalButton",on:{click:e.openDataModal}},[n("font-awesome-icon",{attrs:{icon:"code"}})],1),e._v(" "),n("data-modal",{ref:"dataModal",attrs:{data:e.data,type:e.type,url:e.url}})],1)},Y=[],X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"dataModal",staticClass:"fontSize-normal",attrs:{title:e.$t("dataModal.title"),centered:"",size:"lg"}},[n("span",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("span",[e._v("\n      "+e._s(e.numberText)+" |\n    ")]),e._v(" "),e.url?n("span",[n("a",{attrs:{href:e.url,target:"_blank"}},[e._v("\n        API URL\n      ")]),e._v("\n      |\n    ")]):e._e(),e._v(" "),e._v("\n    JSKOS "+e._s(e.$t("settings.version"))+" "+e._s(e.$jskos.version)+"\n    |\n    "),n("a",{attrs:{href:"https://gbv.github.io/jskos/jskos.html",target:"_blank"}},[e._v("\n      "+e._s(e.$t("dataModal.jskosSpecification"))+"\n    ")])]),e._v(" "),n("p",[n("b-button",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyToClipboard(e.$refs.jsonCode)}}},[e._v("\n      "+e._s(e.$t("dataModal.exportClipboard"))+"\n    ")]),e._v(" "),n("b-button",{attrs:{href:"data:application/json;charset=utf-8,"+e.encodedData,download:e.filename+".json",target:"_blank",variant:"outline-warning"}},[e._v("\n      "+e._s(e.$t("dataModal.exportJson"))+"\n    ")]),e._v(" "),e.encodedDataNdjson?n("b-button",{attrs:{href:"data:application/json;charset=utf-8,"+e.encodedDataNdjson,download:e.filename+".ndjson",target:"_blank",variant:"outline-warning"}},[e._v("\n      "+e._s(e.$t("dataModal.exportNdjson"))+"\n    ")]):e._e()],1),e._v(" "),n("div",{staticClass:"dataModal-json"},[n("pre",[n("code",{ref:"jsonCode",domProps:{innerHTML:e._s(e.jsonHtml)}})])])])},Z=[],ee=n("efd0"),te=n.n(ee),ne={name:"DataModal",components:{},props:{data:{type:[Object,Array],default:null},type:{type:String,default:null,validator:function(e){return-1!==["concept","scheme","mapping","annotation"].indexOf(e)}},url:{type:String,default:null}},data:function(){return{}},computed:{computedType:function(){return this.type||(this.$jskos.isConcept(this.isArray?this.data[0]:this.data)?"concept":this.$jskos.isScheme(this.isArray?this.data[0]:this.data)?"scheme":null)},numberText:function(){var e=u.a.isArray(this.data)?this.data.length:this.data?1:0;return this.$tc("dataModal.".concat(this.computedType),e,{count:e})},isArray:function(){return u.a.isArray(this.data)},filename:function(){var e=this.computedType||"resource";return this.isArray&&(e+="s"),e},preparedData:function(){var e=this;if(null==this.data)return null;var t=this.data;this.isArray||(t=[this.data]);var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=function(){var t=s.value,i=void 0;"mapping"==e.computedType?(i=e.$jskos.minifyMapping(t),i=e.$jskos.addMappingIdentifiers(i)):(i=e.$jskos.copyDeep(t),i=u.a.pick(i,u.a.keys(i).filter(function(e){return null!=i[e]}))),i&&n.push(i)},l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)a()}catch(c){r=!0,o=c}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return this.isArray?n:n[0]},jsonData:function(){return JSON.stringify(this.preparedData,null,2)},jsonHtml:function(){return te()(this.preparedData)},encodedData:function(){return encodeURIComponent(this.jsonData)},encodedDataNdjson:function(){return this.isArray?this.preparedData.map(function(e){return JSON.stringify(e)}).join("\n"):null},validated:function(){var e=this.computedType,t=u.a.get(this.$jskos.validate,e,this.$jskos.validate&&this.$jskos.validate.resource);if(!this.preparedData||!t)return!1;var n=!0,i=!0,r=!1,o=void 0;try{for(var s,a=(this.isArray?this.preparedData:[this.preparedData])[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n=n&&t(l)}}catch(c){r=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}},watch:{},methods:{show:function(){this.$refs.dataModal.show()}}},ie=ne,re=(n("bc32"),Object(y["a"])(ie,X,Z,!1,null,"4246964d",null)),oe=re.exports,se={name:"DataModalButton",components:{DataModal:oe},props:{data:{type:[Object,Array],default:null},type:{type:String,default:null,validator:function(e){return-1!==["concept","scheme","mapping"].indexOf(e)}},url:{type:String,default:null}},methods:{openDataModal:function(){this.$refs.dataModal.show()}}},ae=se,le=(n("ab2c"),Object(y["a"])(ae,K,Y,!1,null,"5d378a48",null)),ce=le.exports;function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){return he(e)||de(e,t)||me()}function me(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function de(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),t&&n.length===t)break}catch(l){r=!0,o=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}function he(e){if(Array.isArray(e))return e}var ge={name:"MappingEditor",components:{ItemName:I["a"],MappingTypeSelection:J,DataModalButton:ce},mixins:[M["a"],A["a"]],data:function(){return{comments:[""],settingsShow:!1}},computed:{mapping:function(){return this.$store.state.mapping.mapping},original:function(){return this.$store.state.mapping.original},canSaveMapping:function(){return(null==this.original||this.hasChangedFromOriginal)&&this.mapping.fromScheme&&this.mapping.toScheme},canDeleteMapping:function(){return u.a.get(this.original,"_provider.has.canRemoveMappings",!1)&&(!this.$store.getters.getCurrentRegistry.provider.has.auth||this.$store.getters.getCurrentRegistry.provider.auth)},canClearMapping:function(){return this.mapping.fromScheme||this.mapping.toScheme},canExportMapping:function(){return this.mapping.fromScheme&&this.mapping.toScheme},canSwapMapping:function(){return this.$jskos.conceptsOfMapping(this.mapping,"to").length<=1&&this.$jskos.conceptsOfMapping(this.mapping).length>0},mappingEncoded:function(){return encodeURIComponent(JSON.stringify(this.prepareMapping()))},hasChangedFromOriginal:function(){return this.$store.getters["mapping/hasChangedFromOriginal"]},mappingComments:function(){return this.$util.lmContent(this.mapping,"note")||[]},haveNotesChanged:function(){var e=this.comments.filter(function(e){return""!=e});return!u.a.isEqual(e,this.mappingComments)},schemeRight:function(){return this.selected.scheme[!1]},clearOnSave:{get:function(){return this.$settings.mappingEditorClearOnSave},set:function(e){this.$store.commit({type:"settings/set",prop:"mappingEditorClearOnSave",value:e})}},only1to1mappings:{get:function(){return"1-to-1"==this.$settings.mappingCardinality},set:function(e){this.$store.commit({type:"settings/set",prop:"mappingCardinality",value:e?"1-to-1":"1-to-n"})}}},watch:{mappingEncoded:function(){var e=u.a.get(this.$el.parentElement.getElementsByClassName("minimizer"),"[0].__vue__");e&&e.toggleMinimize(!1),this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},comments:function(){var e=this.comments.filter(function(e){return""!=e});e.length||e.push(""),u.a.isEqual(e,this.comments)||(this.comments=e)},mappingComments:function(e,t){u.a.isEqual(t,e)||(this.comments=u.a.clone(e))},schemeRight:function(){this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},creator:function(){this.setCreator()},original:function(){this.setCreator()}},mounted:function(){document.addEventListener("click",this.handleClickOutside),this.enableShortcuts()},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)},methods:{shortcutHandler:function(e){var t=e.action,n=e.isLeft;switch(t){case"saveMapping":this.saveMapping();break;case"clearMapping":this.clearMapping();break;case"addConcept":this.addToMappingInternal(n);break;case"commentMapping":this.canExportMapping&&this.$refs.commentModal.show();break}},handleClickOutside:function(e){var t=this.$refs.settingsPopover;t&&!t.contains(e.target)&&(this.settingsShow=!1)},saveMapping:function(){var e=this;if(!this.canSaveMapping)return!1;if(!this.creatorName||""==this.creatorName)return this.alert("Please set your name in Settings (top right of the page)."),!1;this.setCreator(),this.$refs.commentModal.hide();var t=this.prepareMapping(),n=this.original;this.loadingGlobal=!0,this.$store.dispatch({type:"mapping/saveMappings",mappings:[{mapping:t,original:n}]}).then(function(t){if(!t.length||!t[0]){var n=e.$t("alerts.mappingNotSaved");return e.$store.getters.getCurrentRegistry.provider.has.auth&&!e.$store.getters.getCurrentRegistry.provider.auth&&(n+=" "+e.$t("general.authNecessary")),void e.alert(n,null,"danger")}e.alert(e.$t("alerts.mappingSaved"),null,"success2");var i=t[0];e.$store.commit({type:"mapping/set",original:i}),e.clearOnSave&&e.clearMapping()}).catch(function(e){console.error("MappingEditor - error in saveMapping:",e)}).then(function(){e.loadingGlobal=!1,e.$store.commit("mapping/setRefresh",{registry:u.a.get(e.$store.getters.getCurrentRegistry,"uri")})})},setCreator:function(){var e=this,t=(this.mapping.contributor||[]).concat((this.mapping.creator||[]).filter(function(t){return!(e.creator.uri&&t.uri&&e.creator.uri==t.uri)&&!(e.creatorName&&e.$util.prefLabel(t,null,!1)&&e.creatorName==e.$util.prefLabel(t,null,!1))})),n=[this.creator];this.$store.commit({type:"mapping/setCreator",creator:n}),this.$store.commit({type:"mapping/setContributor",contributor:t})},deleteMapping:function(){return!!this.canDeleteMapping&&(this.$refs.deleteModal.show(),!0)},deleteOriginalMapping:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.prepareMapping(this.original);return this.loadingGlobal=!0,this.$store.dispatch({type:"mapping/removeMappings",mappings:[n]}).then(function(n){var i=ue(n,1),r=i[0];r?(e.alert(e.$t("alerts.mappingDeleted"),null,"success2"),e.$store.commit("mapping/setRefresh",{registry:u.a.get(e.$store.getters.getCurrentRegistry,"uri")}),t&&e.clearMapping()):e.alert(e.$t("alerts.mappingNotDeleted"),null,"danger")}).catch(function(e){console.error("MappingEditor - error in deleteOriginalMapping:",e)}).then(function(){e.loadingGlobal=!1}),!0},clearMapping:function(){return!!this.canClearMapping&&(this.$store.commit({type:"mapping/empty"}),this.$refs.commentModal.hide(),!0)},prepareMapping:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e=e||this.$jskos.minifyMapping(this.mapping),e=this.$jskos.addMappingIdentifiers(e),e},labelForScheme:function(e){return this.$util.notation(e,"scheme")},isAddButtonEnabled:function(e){var t=e?this.selected.concept[!0]:this.selected.concept[!1];return!!this.$store.getters["mapping/checkScheme"](e?this.selected.scheme[!0]:this.selected.scheme[!1],e)&&(null!=t&&!this.$store.getters["mapping/added"](t,e))},isDeleteAllButtonEnabled:function(e){return this.$store.getters["mapping/getConcepts"](e).length>0},addButtonDisabledReason:function(e){var t=e?this.selected.concept[!0]:this.selected.concept[!1];return this.$store.getters["mapping/checkScheme"](e?this.selected.scheme[!0]:this.selected.scheme[!1],e)?null==t?"Please select a concept.":this.$store.getters["mapping/added"](t,e)?"Selected concept is already in mapping.":"Other reason.":"Scheme does not match."},addToMappingInternal:function(e){if(this.isAddButtonEnabled(e)){var t=e?this.selected.concept[!0]:this.selected.concept[!1];this.addToMapping({concept:t,scheme:this.selected.scheme[e],isLeft:e})}},deleteAll:function(e){this.$store.commit({type:"mapping/removeAll",isLeft:e})},droppedConcept:function(e,t){this.$jskos.isConcept(e)&&(this.addToMapping({concept:e,scheme:e.inScheme&&e.inScheme[0]||this.selected.scheme[t],isLeft:t}),this.loadDetails(e))},saveComment:function(){var e=this.comments.filter(function(e){return""!=e}).slice();if(this.haveNotesChanged){var t=this.$util.getLanguage(u.a.get(this,"mapping.note"))||this.$util.fallbackLanguage();this.$store.commit({type:"mapping/setNote",note:pe({},t,e)})}},focusNote:function(){document.getElementById("mappingEditor-comment-0").focus()},textareaKeydown:function(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&this.$refs.commentModal.hide()},swapMapping:function(){this.canSwapMapping&&this.$store.commit({type:"mapping/switch"})}}},fe=ge,ve=(n("f1aa"),Object(y["a"])(fe,H,U,!1,null,"24fd14e6",null)),ye=ve.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"mappingBrowser"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.selected.scheme[!0]||null!=e.selected.scheme[!1],expression:"selected.scheme[true] != null || selected.scheme[false] != null"}],attrs:{id:"mappingBrowserWrapper"}},[n("div",{staticClass:"mappingBrowser-title"},[e._v("\n      "+e._s(e.$t("mappingBrowser.title"))+"\n    ")]),e._v(" "),n("div",{attrs:{id:"mappingBrowser-settingsButton"}},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.settingsButton"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.settingsButton'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{id:"mappingBrowser-settingsButton-icon",icon:"cog"}}),e._v(" "),n("b-popover",{attrs:{show:e.settingsShow,target:"mappingBrowser-settingsButton-icon",triggers:"click",placement:"bottomleft"},on:{"update:show":function(t){e.settingsShow=t}}},[n("div",{ref:"settingsPopover"},[n("p",[n("b",[e._v(e._s(e.$t("navbar.settings")))])]),e._v(" "),n("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.settingShowAllSchemesTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.settingShowAllSchemesTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.showAllSchemes,callback:function(t){e.showAllSchemes=t},expression:"showAllSchemes"}},[e._v("\n            "+e._s(e.$t("mappingBrowser.settingShowAllSchemes"))+"\n          ")]),e._v(" "),n("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.settingShowAllResultsTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.settingShowAllResultsTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.showAllResults,callback:function(t){e.showAllResults=t},expression:"showAllResults"}},[e._v("\n            "+e._s(e.$t("mappingBrowser.settingShowAllResults"))+"\n          ")]),e._v(" "),e.settingsDownloadCurrent?n("p",[n("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.downloadFile("mappings.ndjson",e.settingsDownloadCurrent)}}},[n("br"),n("font-awesome-icon",{attrs:{icon:"download"}}),e._v("\n              "+e._s(e.$t("settings.localDownloadJskos",[e.settingsDownloadCurrent.split("\n").length]))+"\n            ")],1)]):0!=e.itemCount?n("p",[n("loading-indicator",{attrs:{size:"sm"}})],1):e._e()],1)])],1),e._v(" "),n("div",{attrs:{id:"mappingBrowser-settings"}},e._l(e.registryGroups,function(t){return n("div",{key:t.uri,staticClass:"mappingBrowser-settings-registryGroup"},[n("span",{staticClass:"mappingBrowser-settings-registryGroup-title fontWeight-heavy button",attrs:{id:"registryGroup-"+t.uri}},[e._v("\n          "+e._s(e.$util.prefLabel(t))+" "),n("font-awesome-icon",{attrs:{icon:"caret-down"}}),n("br")],1),e._v(" "),e._l(t.registries,function(t){return n("registry-notation",{key:t.uri,staticClass:"mappingBrowser-settings-registryGroup-notation",attrs:{registry:t,disabled:!e.showRegistry[t.uri]},nativeOn:{click:function(n){e.showRegistry[t.uri]=!e.showRegistry[t.uri]},mouseover:function(n){e.hoveredRegistry=t},mouseout:function(t){e.hoveredRegistry=null}}})}),e._v(" "),n("b-popover",{attrs:{target:"registryGroup-"+t.uri,show:e.registryGroupShow[t.uri],triggers:"click",placement:"bottom"},on:{"update:show":function(n){return e.$set(e.registryGroupShow,t.uri,n)}}},[n("div",{ref:"registryGroup-"+t.uri+"-popover",refInFor:!0,staticClass:"mappingBrowser-settings-registryGroup-popover"},e._l(t.registries,function(t,i){return n("b-form-checkbox",{key:"registry_"+i,staticClass:"mappingBrowser-settings-registryGroup-popover-item",nativeOn:{mouseover:function(n){e.hoveredRegistry=t},mouseout:function(t){e.hoveredRegistry=null}},model:{value:e.showRegistry[t.uri],callback:function(n){e.$set(e.showRegistry,t.uri,n)},expression:"showRegistry[registry.uri]"}},[n("registry-name",{attrs:{registry:t}})],1)}),1)])],2)}),0),e._v(" "),n("div",{staticClass:"mappingBrowser-table-container"},[n("flexible-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],staticClass:"mappingBrowser-table",attrs:{items:e.tableItems,fields:e.fields},on:{hover:function(t){e.hoveredMapping=t&&t.mapping,e.hoveredId=t&&t.uniqueId}},scopedSlots:e._u([{key:"sourceScheme",fn:function(t){var i=t.value;return n("span",{},[n("item-name",{staticClass:"fontWeight-heavy",attrs:{item:i,"show-text":!1,"show-tooltip":!0,"font-size":"sm"}}),e._v(" "),null===i?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopLeftAdjustment"},[e._v('\n            "\n          ')]):e._e(),e._v(" "),void 0===i?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopAdjustment mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],1)}},{key:"sourceConcepts",fn:function(t){var i=t.value;return n("span",{},[e._l(i,function(t){return n("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?n("loading-indicator",{attrs:{size:"sm"}}):n("item-name",{attrs:{item:t,"show-text":!1,"show-tooltip":!0,"is-link":!0,"is-left":!0,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!0])||e.$jskos.compare(t,e.selected.concept[!1])}})],1)}),e._v(" "),0===i.length?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"sourceConceptsLong",fn:function(t){var i=t.value;return n("span",{},[e._l(i,function(t){return n("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?n("loading-indicator",{attrs:{size:"sm"}}):n("item-name",{attrs:{item:t,"show-text":!0,"show-tooltip":!1,"is-link":!0,"is-left":!0,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!0])||e.$jskos.compare(t,e.selected.concept[!1])}})],1)}),e._v(" "),0===i.length?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"targetScheme",fn:function(t){var i=t.value;return n("span",{},[n("item-name",{staticClass:"fontWeight-heavy",attrs:{item:i,"show-text":!1,"show-tooltip":!0,"font-size":"sm"}}),e._v(" "),null===i?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopLeftAdjustment"},[e._v('\n            "\n          ')]):e._e(),e._v(" "),void 0===i?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopAdjustment mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],1)}},{key:"targetConcepts",fn:function(t){var i=t.value;return n("span",{},[e._l(i,function(t){return n("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?n("loading-indicator",{attrs:{size:"sm"}}):n("span",[n("item-name",{attrs:{item:t,"show-text":!1,"show-tooltip":!0,"is-link":!0,"is-left":!1,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!1])||e.$jskos.compare(t,e.selected.concept[!0])}}),n("br")],1)],1)}),e._v(" "),0===i.length?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"targetConceptsLong",fn:function(t){var i=t.value;return n("span",{},[e._l(i,function(t){return n("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?n("loading-indicator",{attrs:{size:"sm"}}):n("span",[n("item-name",{attrs:{item:t,"show-text":!0,"show-tooltip":!1,"is-link":!0,"is-left":!1,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!1])||e.$jskos.compare(t,e.selected.concept[!0])}}),n("br")],1)],1)}),e._v(" "),0===i.length?n("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"type",fn:function(t){var i=t.value;return n("span",{},[null!=i&&"→"!=e.$util.notation(i)?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:i.prefLabel.en,delay:e.$util.delay.medium},expression:"{ title: value.prefLabel.en, delay: $util.delay.medium }",modifiers:{hover:!0}}]},[e._v("\n            "+e._s(e.$util.notation(i))+"\n          ")]):e._e()])}},{key:"creator",fn:function(t){var i=t.item;return n("span",{},[i.mapping&&i.mapping.creator&&i.mapping.creator[0]&&i.mapping.creator[0].uri&&e.userUris&&e.userUris.includes(i.mapping.creator[0].uri)&&(e.$util.prefLabel(i.mapping.creator[0])!=e.$util.prefLabel(e.creator)||i.mapping.creator[0].uri!=e.creator.uri)?n("span",[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.$t("mappingBrowser.creatorIsDifferent"),expression:"$t('mappingBrowser.creatorIsDifferent')",modifiers:{hover:!0}}],staticClass:"text-warning",attrs:{icon:"exclamation"}})],1):e._e(),e._v(" "),null!=i.creator?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:i.creator,delay:e.$util.delay.long},expression:"{ title: item.creator, delay: $util.delay.long }",modifiers:{hover:!0}}]},[e._v("\n            "+e._s(i.creator)+"\n          ")]):e._e()])}},{key:"source",fn:function(e){var t=e.item;return n("span",{},[n("registry-notation",{attrs:{registry:t.registry}})],1)}},{key:"actions",fn:function(t){return n("span",{},[t.item.mapping&&t.item.mapping.annotations?n("div",{staticClass:"button fontWeight-heavy",staticStyle:{display:"inline-block",position:"relative","min-width":"18px"},style:"color: "+e.annotationButtonColor(t.item.mapping.annotations)+";",attrs:{id:"mappingBrowser-hoveredMapping-annotationButton-"+t.item.uniqueId}},[e._v("\n            "+e._s(e.annotationsScore(t.item.mapping.annotations).sign)+e._s(e.annotationsScore(t.item.mapping.annotations).score)+"\n          ")]):e._e(),e._v(" "),t.item.mapping?n("div",{staticClass:"mappingBrowser-toolbar-button"},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showDetail"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.showDetail'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"info-circle"},on:{click:function(n){(e.mappingDetailMapping=t.item.mapping)&&e.$refs.mappingDetail.show()}}}),e._v(" "),t.item.mapping.note?n("font-awesome-icon",{staticClass:"mappingBrowser-noteIcon",attrs:{icon:"comment"}}):e._e()],1):e._e(),e._v(" "),n("div",{staticClass:"mappingBrowser-toolbar-button"},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSave(t.item.mapping)?e.$t("mappingBrowser.saveAndEdit"):e.$t("mappingBrowser.edit"),delay:e.$util.delay.medium},expression:"{ title: canSave(data.item.mapping) ? $t('mappingBrowser.saveAndEdit') : $t('mappingBrowser.edit'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"edit"},on:{click:function(n){return e.edit(t)}}})],1),e._v(" "),e.$jskos.compare(t.item.registry,e.$store.getters.getCurrentRegistry)?n("div",{staticClass:"mappingBrowser-toolbar-button"},[e.canRemove(t)&&t.item.registry.provider.has.canRemoveMappings&&("http://coli-conc.gbv.de/registry/local-mappings"==t.item.registry.uri||null!=t.item.mapping.uri)?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$store.getters.getCurrentRegistry.provider.has.auth&&!e.$store.getters.getCurrentRegistry.provider.auth?e.$t("general.authNecessary"):e.$t("mappingBrowser.delete"),delay:e.$util.delay.medium},expression:"{ title: $store.getters.getCurrentRegistry.provider.has.auth && !$store.getters.getCurrentRegistry.provider.auth ? $t('general.authNecessary') : $t('mappingBrowser.delete'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button-delete",attrs:{icon:"trash-alt"},on:{click:function(n){return e.removeMapping(t.item.mapping)}}}):e._e()],1):n("div",{staticClass:"mappingBrowser-toolbar-button"},[e.canSave(t.item.mapping)?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSave(t.item.mapping)?e.$t("mappingBrowser.saveAsMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canSave(data.item.mapping) ? $t('mappingBrowser.saveAsMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"save"},on:{click:function(n){e.canSave(t.item.mapping)&&e.saveMapping(t.item.mapping)}}}):e._e()],1)])}},{key:"ITEM_ROW",fn:function(t){var i=t.item,r=t.value;return n("span",{},["more"==i.type?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showMore")+" ("+e.$util.prefLabel(i.registry)+")",delay:e.$util.delay.medium},expression:"{ title: `${$t('mappingBrowser.showMore')} (${$util.prefLabel(item.registry)})`, delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"ellipsis-h"},on:{click:function(t){return e.showMore(r)}}}):e._e(),e._v(" "),"loading"==i.type?n("loading-indicator",{attrs:{size:"sm"}}):e._e(),e._v(" "),"noItems"==i.type?n("span",[n("registry-notation",{attrs:{registry:i.registry,disabled:!0,tooltip:!1}}),e._v("\n            "+e._s(e.$util.prefLabel(i.registry))+": "+e._s(e.$t("mappingBrowser.noItems"))+"\n          ")],1):e._e()],1)}},{key:"count",fn:function(t){return n("span",{},[null==t.item.occurrence?n("span"):-1==t.item.occurrence.count?n("span",[e._v("-")]):n("span",[n("auto-link",{attrs:{link:t.item.occurrence.url,text:String(t.item.occurrence.count)}})],1)])}}])},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),n("span",{attrs:{slot:"HEAD_actions"},slot:"HEAD_actions"})])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0==e.loading&&0==e.items.length,expression:"loading == 0 && items.length == 0"}],staticClass:"noItems fontWeight-heavy"},[e._v("\n      "+e._s(e.$t("mappingBrowser.chooseConcept"))+"\n    ")])]),e._v(" "),n("data-modal-button",{attrs:{data:e.items.map(function(e){return e.mapping}).filter(function(e){return null!=e}),type:"mapping"}}),e._v(" "),n("mapping-detail",{ref:"mappingDetail",attrs:{mapping:e.mappingDetailMapping}}),e._v(" "),n("annotation-popover",{attrs:{id:e.hoveredId,mapping:e.hoveredMapping,"id-prefix":"mappingBrowser-hoveredMapping-annotationButton-"}})],1)},_e=[],we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.right",value:e.tooltip,expression:"tooltip",modifiers:{html:!0,right:!0}}],domProps:{innerHTML:e._s(e.registryName)}})},$e=[],Se={name:"RegistryName",props:{registry:{type:Object,default:null}},computed:{registryName:function(){var e=this.$util.prefLabel(this.registry),t=this.$util.notation(this.registry);return e?e.replace(t,function(){return"<b>"+t+"</b>"}):(t=0,t||"?")},tooltip:function(){return this.$util.definition(this.registry).join("<br>")}}},Ce=Se,ke=Object(y["a"])(Ce,we,$e,!1,null,null,null),xe=ke.exports,Me=n("b758"),Le=n("ae75"),De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{ref:"mappingDetail",staticClass:"fontSize-normal",attrs:{title:e.$t("mappingDetail.title"),centered:"","hide-footer":"","no-enforce-focus":"",size:"lg"}},[e.mapping?n("div",[n("b-container",{staticClass:"mappingDetail-container",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.sourceScheme"))+":\n          ")]),e._v(" "),n("b-col",[n("item-name",{attrs:{draggable:!1,item:e.mapping.fromScheme}})],1)],1),e._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$tc("mappingDetail.sourceConcept",e.$jskos.conceptsOfMapping(e.mapping,"from").length))+":\n          ")]),e._v(" "),n("b-col",e._l(e.$jskos.conceptsOfMapping(e.mapping,"from"),function(e){return n("p",{key:"mappingDetail-from-"+e.uri},[n("item-name",{attrs:{draggable:!1,item:e}})],1)}),0)],1),e._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.targetScheme"))+":\n          ")]),e._v(" "),n("b-col",[n("item-name",{attrs:{draggable:!1,item:e.mapping.toScheme}})],1)],1),e._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$tc("mappingDetail.targetConcept",e.$jskos.conceptsOfMapping(e.mapping,"to").length))+":\n          ")]),e._v(" "),n("b-col",e._l(e.$jskos.conceptsOfMapping(e.mapping,"to"),function(e){return n("p",{key:"mappingDetail-to-"+e.uri},[n("item-name",{attrs:{draggable:!1,item:e}})],1)}),0)],1),e._v(" "),e.mapping.type&&e.mapping.type.length?n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.mappingType"))+":\n          ")]),e._v(" "),n("b-col",[n("a",{attrs:{href:e.$jskos.mappingTypeByType(e.mapping.type).uri,target:"_blank"}},[e._v("\n              "+e._s(e.$util.prefLabel(e.$jskos.mappingTypeByType(e.mapping.type)))+" ("+e._s(e.$util.notation(e.$jskos.mappingTypeByType(e.mapping.type)))+")\n            ")])])],1):e._e(),e._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.creator"))+":\n          ")]),e._v(" "),n("b-col",e._l(e.mapping.creator||[],function(t,i){return n("p",{key:"mappingDetail-creator-"+i},[n("auto-link",{attrs:{link:t.url||t.uri,text:e.$util.prefLabel(t)}})],1)}),0)],1),e._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.created"))+":\n          ")]),e._v(" "),n("b-col",[e._v(e._s(e.$util.dateToString(e.mapping.created)))])],1),e._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.modified"))+":\n          ")]),e._v(" "),n("b-col",[e._v(e._s(e.$util.dateToString(e.mapping.modified)))])],1),e._v(" "),e.mapping.annotations&&e.mapping.annotations.length?n("b-row",{staticStyle:{position:"relative"}},[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.annotations"))+":\n          ")]),e._v(" "),n("b-col",[n("annotation-list",{attrs:{annotations:e.mapping.annotations}})],1),e._v(" "),n("div",{staticClass:"dataModalButton",on:{click:function(t){return e.$refs.dataModalAnnotations.show()}}},[n("font-awesome-icon",{attrs:{icon:"code"}})],1)],1):e._e(),e._v(" "),e.mapping.note?n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.note"))+":\n          ")]),e._v(" "),n("b-col",{staticStyle:{"max-height":"200px",overflow:"scroll"},domProps:{innerHTML:e._s((e.$util.lmContent(e.mapping,"note")||[]).map(function(e){return"<p>"+e.split("\n").join("<br>")+"</p>"}).join(""))}})],1):e._e(),e._v(" "),e.mapping.partOf?n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.partOf"))+":\n          ")]),e._v(" "),n("b-col",e._l(e.mapping.partOf,function(t,i){return n("p",{key:"mappingDetail-partOf-"+i},[n("auto-link",{attrs:{link:t.uri,text:e.$util.prefLabel(t)}})],1)}),0)],1):e._e(),e._v(" "),e.mapping.identifier?n("b-row",[n("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.identifier"))+":\n          ")]),e._v(" "),n("b-col",e._l(e.mapping.identifier,function(e,t){return n("p",{key:"mappingDetail-identifier-"+t},[n("auto-link",{attrs:{link:e}})],1)}),0)],1):e._e()],1)],1):e._e(),e._v(" "),n("div",{staticClass:"dataModalButton",on:{click:function(t){return e.$refs.dataModal.show()}}},[n("font-awesome-icon",{attrs:{icon:"code"}})],1)]),e._v(" "),e.mapping?n("data-modal",{ref:"dataModal",attrs:{data:e.mapping,url:e.mapping.uri,type:"mapping"}}):e._e(),e._v(" "),e.mapping&&e.mapping.annotations&&e.mapping.annotations.length?n("data-modal",{ref:"dataModalAnnotations",attrs:{data:e.mapping.annotations,type:"annotation"}}):e._e()],1)},Te=[],je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"annotationList"},e._l(e.annotations,function(t){return n("div",{key:t.uri},[n("div",{staticClass:"fontSize-normal fontWeight-heavy",class:{"text-success":"+1"===t.bodyValue,"text-danger":"-1"===t.bodyValue}},[e._v("\n      "+e._s(t.bodyValue)+"\n    ")]),e._v(" "),n("div",{staticClass:"fontSize-verySmall"},[e._v("\n      "+e._s(e.$util.dateToString(t.created,!0))),n("br"),e._v(" "),n("auto-link",{class:{"fontWeight-heavy":e.$util.annotations.creatorMatches(t,e.userUris)},attrs:{link:e.$util.annotations.creatorUri(t),text:e.$util.annotations.creatorName(t)}})],1)])}),0)},Ae=[],Oe={name:"AnnotationList",components:{AutoLink:_},mixins:[M["a"]],props:{annotations:{type:Array,default:function(){return[]}}}},Be=Oe,Re=(n("b6d1"),Object(y["a"])(Be,je,Ae,!1,null,"e95d7848",null)),Ee=Re.exports,Ie={name:"MappingDetail",components:{DataModal:oe,ItemName:I["a"],AutoLink:_,AnnotationList:Ee},props:{mapping:{type:Object,default:null}},methods:{show:function(){this.$refs.mappingDetail.show()}}},Ne=Ie,ze=(n("9c44"),Object(y["a"])(Ne,De,Te,!1,null,"78855d12",null)),Pe=ze.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"annotationPopoverTop",attrs:{id:"annotationPopoverTop-"+e.iid}},[e.enable?n("b-popover",{ref:"annotationPopover",attrs:{target:e.element,container:"annotationPopoverTop-"+e.iid,show:e.show,boundary:"window",placement:"lefttop"},on:{"update:show":function(t){e.show=t}}},[e.loading?n("loading-indicator-full",{staticStyle:{"z-index":"1100"}}):e._e(),e._v(" "),n("div",{ref:"annotationPopoverDiv",staticClass:"annotationPopover"},[e.annotations.length?n("div",{staticClass:"annotationPopover-left"},[n("annotation-list",{staticClass:"annotationPopover-history",attrs:{annotations:e.annotations}})],1):e._e(),e._v(" "),n("div",{staticClass:"annotationPopover-voting"},[n("div"),e._v(" "),n("div",[n("font-awesome-icon",{class:{"annotationPopover-voting-button-current":"+1"==e.ownScore,button:e.provider&&e.provider.auth,"button-disabled":!e.provider||!e.provider.auth,"annotationPopover-voting-button":!0},attrs:{icon:"thumbs-up"},on:{click:function(t){e.provider&&e.provider.auth&&e.assessing("+1")}}})],1),e._v(" "),n("div",{staticClass:"annotationPopover-score"},[n("span",{staticClass:"fontWeight-heavy",class:{"text-success":e.score.startsWith("+"),"text-danger":e.score.startsWith("-")}},[e._v("\n            "+e._s(e.score)+"\n          ")])]),e._v(" "),n("div",[n("font-awesome-icon",{class:{"annotationPopover-voting-button-current":"-1"==e.ownScore,button:e.provider&&e.provider.auth,"button-disabled":!e.provider||!e.provider.auth,"annotationPopover-voting-button":!0},attrs:{icon:"thumbs-down"},on:{click:function(t){e.provider&&e.provider.auth&&e.assessing("-1")}}})],1)])])],1):e._e()],1)},He=[],Ue=n("a4fe");function Ve(e,t){return qe(e)||Ge(e,t)||We()}function We(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ge(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),t&&n.length===t)break}catch(l){r=!0,o=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}function qe(e){if(Array.isArray(e))return e}var Qe={name:"AnnotationPopover",components:{LoadingIndicatorFull:Ue["a"],AnnotationList:Ee},mixins:[M["a"]],props:{id:{type:String,default:null},idPrefix:{type:String,default:""},mapping:{type:Object,default:null}},data:function(){return{iid:null,imapping:null,show:!1,loading:!1}},computed:{enable:function(){return this.iid&&this.element},elementId:function(){return this.idPrefix+(this.iid||"")},element:function(){return document.getElementById(this.elementId)},mousePosition:function(){return this.$store.state.mousePosition},annotations:function(){return u.a.get(this.imapping,"annotations")||[]},score:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,o=this.annotations.filter(function(e){return"assessing"==e.motivation})[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value.bodyValue;e+=parseInt(s)||0}}catch(l){n=!0,i=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var a=e>0?"+":e<0?"-":"±";return"".concat(a).concat(Math.abs(e))},ownAssessment:function(){var e=this;return this.annotations.find(function(t){return e.$util.annotations.creatorMatches(t,e.userUris)})},ownScore:function(){return u.a.get(this.ownAssessment,"bodyValue")},provider:function(){return u.a.get(this.imapping,"_provider")}},watch:{id:function(){var e=this;this.id&&this.id!=this.iid&&(this.iid=null,u.a.delay(function(){e.iid=e.id,e.imapping=e.mapping},50))},mousePosition:function(e){var t=e.x,n=e.y;if(this.element){for(var i=!1,r=[[this.$refs.annotationPopoverDiv,25],[this.element,0]],o=0;o<r.length;o++){var s=Ve(r[o],2),a=s[0],l=s[1];if(a){var c=a.getBoundingClientRect(),p=c.top,u=c.bottom,m=c.left,d=c.right;n<u+l&&n>p-l&&t<d+l&&t>m-l&&(i=!0)}}this.show=i}},show:function(){this.scrollToBottom()},annotations:function(){this.scrollToBottom()},iid:function(){this.scrollToBottom()}},methods:{scrollToBottom:function(){var e=this;this.show&&u.a.delay(function(){if(e.$refs.annotationPopoverDiv){var t=e.$refs.annotationPopoverDiv.getElementsByClassName("annotationPopover-history")[0];t&&(t.scrollTop=2e4)}},50)},alertInternal:function(e){this.$store.getters.getCurrentRegistry.provider.has.auth&&!this.$store.getters.getCurrentRegistry.provider.auth&&(e+=" "+this.$t("general.authNecessary")),this.alert(e,null,"danger")},assessing:function(e){var t=this,n=this.provider;if(n&&n.has.annotations){var i=u.a.get(this.imapping,"uri");if(i){var r;if(this.loading=!0,this.ownAssessment)r=this.ownScore!=e?n.editAnnotation(this.ownAssessment,{bodyValue:e}).then(function(n){n?t.ownAssessment.bodyValue=e:t.alertInternal("Editing annotation failed.")}):this.remove(this.annotations.indexOf(this.ownAssessment));else{var o={target:i,motivation:"assessing",bodyValue:e};this.creator&&this.creator.uri&&this.creatorName&&(o.creator={id:this.creator.uri,name:this.creatorName}),r=n.addAnnotation(o).then(function(e){var n=u.a.get(t.imapping,"uri");i==n&&e?t.imapping.annotations.push(e):t.alertInternal("Adding annotation failed.")})}r.then(function(){t.loading=!1})}else console.warn("No URI found to add annotation.")}else console.warn("No provider found to add annotation.")},remove:function(e){var t=this,n=this.provider;if(n&&n.has.annotations){var i=this.annotations[e];if(i)return this.loading=!0,n.removeAnnotation(i).then(function(n){t.loading=!1,i.id==t.annotations[e].id&&n?t.$delete(t.imapping.annotations,e):t.alertInternal("Removing annotation failed.")})}else console.warn("No provider found to add annotation.")}}},Je=Qe,Ke=(n("d4b3"),n("23a6"),Object(y["a"])(Je,Fe,He,!1,null,"62a13de5",null)),Ye=Ke.exports;function Xe(e,t){return tt(e)||et(e,t)||Ze()}function Ze(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function et(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),t&&n.length===t)break}catch(l){r=!0,o=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}function tt(e){if(Array.isArray(e))return e}function nt(e){return nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){rt(e,t,n[t])})}return e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot={name:"MappingBrowser",components:{ItemName:I["a"],RegistryName:xe,AutoLink:_,LoadingIndicator:Me["a"],FlexibleTable:Le["a"],RegistryNotation:x,DataModalButton:ce,MappingDetail:Pe,AnnotationPopover:Ye},mixins:[M["a"],A["a"]],data:function(){var e,t;return{loading:0,items:[],previousSelected:{concept:(e={},rt(e,!0,null),rt(e,!1,null),e),scheme:(t={},rt(t,!0,null),rt(t,!1,null),t)},localMappingsCurrent:0,showMoreValues:{},loadingId:null,registryGroupShow:{},settingsShow:!1,settingsDownloadCurrent:null,loadingConcepts:[],errorConcepts:[],tableItemsRecompute:null,refreshTimers:{},mappingDetailMapping:null,hoveredRegistry:null,hoveredId:null}},computed:{itemCount:function(){return this.items.filter(function(e){return null!=e.mapping||"loading"==e.type}).length},tableItems:function(){var e=this;this.tableItemsRecompute;var t=" mappingBrowser-separatorPaddingBottom",n=" mappingBrowser-separatorPaddingTop",i=" mappingBrowser-separatorBorder",r=this.$store.state.mapping.original,o=this.$store.getters["mapping/hasChangedFromOriginal"],s=this.items.slice(),a=[],l=null,c=null,p=null,m=null,d=0,h=!1,g=5,f=!0,v=!1,y=void 0;try{for(var b,_=s[Symbol.iterator]();!(f=(b=_.next()).done);f=!0){var w=b.value;w=u.a.clone(w),this.$jskos.compare(l,w.registry)||(c=null,p=null,d=0,h=!1,l=w.registry,w._rowClass+=i+n,m&&(m._rowClass+=t)),d+=1;var $=u.a.get(this.showMoreValues,'["'.concat(w.registry.uri,'"]'),1)*g;!h&&!this.showAllResults&&d>$&&(h=!0,a.push({_wholeRow:!0,_rowClass:"mappingBrowser-table-row-showMore fontSize-small",value:w.registry.uri,type:"more",registry:w.registry})),h||(w.sourceScheme&&this.$jskos.compare(w.sourceScheme,c)?w.sourceScheme=null:c=w.sourceScheme,w.targetScheme&&this.$jskos.compare(w.targetScheme,p)?w.targetScheme=null:p=w.targetScheme,w.uniqueId=this.$util.generateID(),r&&this.$jskos.compareMappingsDeep(r,w.mapping)&&(w._rowClass+=o?" mappingBrowser-table-row-editing-notSaved":" mappingBrowser-table-row-editing-saved"),a.push(w),m=w)}}catch(D){v=!0,y=D}finally{try{f||null==_.return||_.return()}finally{if(v)throw y}}var S=!0,C=!1,k=void 0;try{for(var x,M=a.filter(function(t){return e.$jskos.compare(t.registry,e.hoveredRegistry)})[Symbol.iterator]();!(S=(x=M.next()).done);S=!0){var L=x.value;L._rowClass+=" mappingBrowser-hoveredRegistry"}}catch(D){C=!0,k=D}finally{try{S||null==M.return||M.return()}finally{if(C)throw k}}return a},fields:function(){var e=this;return[{key:"source",label:"",width:"0%",minWidth:"",align:"left",sortable:!1,class:"mappingBrowser-table-source"},{key:"sourceScheme",label:"",width:"4%",minWidth:"",align:"left",sortable:!1,class:"fontSize-small"},{key:"sourceConcepts",label:this.$t("mappingBrowser.from"),width:"10%",minWidth:"",align:"left",sortable:!1,compare:function(t,n){return e.$util.compareMappingsByConcepts(t.mapping,n.mapping,"from")},class:"mappingBrowser-table-concepts"},{key:"sourceConceptsLong",label:this.$t("mappingBrowser.from"),width:"25%",minWidth:"",align:"left",sortable:!1,compare:function(t,n){return e.$util.compareMappingsByConcepts(t.mapping,n.mapping,"from")},class:"mappingBrowser-table-conceptsLong"},{key:"type",label:"",width:"4%",minWidth:"",sortable:!1,compare:function(e,t){var n=u.a.get(e,"type.prefLabel.en",""),i=u.a.get(t,"type.prefLabel.en","");return n<i?-1:n>i?1:0}},{key:"targetScheme",label:"",width:"4%",minWidth:"",align:"left",sortable:!1,class:"fontSize-small"},{key:"targetConcepts",label:this.$t("mappingBrowser.to"),width:"10%",minWidth:"",align:"left",sortable:!1,compare:function(t,n){return e.$util.compareMappingsByConcepts(t.mapping,n.mapping,"to")},class:"mappingBrowser-table-concepts"},{key:"targetConceptsLong",label:this.$t("mappingBrowser.to"),width:"25%",minWidth:"",align:"left",sortable:!1,compare:function(t,n){return e.$util.compareMappingsByConcepts(t.mapping,n.mapping,"to")},class:"mappingBrowser-table-conceptsLong"},{key:"creator",label:this.$t("mappingBrowser.creator"),width:"9%",minWidth:"",align:"left",sortable:!1,class:"mappingBrowser-table-creator"},{key:"count",label:"",width:"4%",minWidth:"",align:"right",sortable:!1,compare:function(e,t){var n=u.a.get(e,"occurrence.count",-1),i=u.a.get(t,"occurrence.count",-1);return n<i?-1:n>i?1:0}},{key:"actions",label:"",width:"12%",minWidth:"",align:"right",sortable:!1}]},needsRefresh:function(){return this.$store.state.mapping.mappingsNeedRefresh},showRegistry:function(){var e=this,t={},n=!0,i=!1,r=void 0;try{for(var o,s=function(){var n=o.value;Object.defineProperty(t,n.uri,{get:function(){var t=e.$settings.mappingBrowserShowRegistry[n.uri];return null==t||t},set:function(t){e.$store.commit({type:"settings/set",prop:"mappingBrowserShowRegistry",value:Object.assign({},e.$settings.mappingBrowserShowRegistry,rt({},n.uri,t))}),e.$store.commit("mapping/setRefresh",{registry:n.uri})}})},a=this.mappingRegistries[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)s()}catch(l){i=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t},mappingRegistries:function(){var e=this,t=this.config.registries.filter(function(t){return t.provider&&(t.provider.has.mappings||t.provider.has.occurrences)&&(t.provider.supportsScheme&&t.provider.supportsScheme(e.selected.scheme[!0])||t.provider.supportsScheme&&t.provider.supportsScheme(e.selected.scheme[!1]))}),n=t.findIndex(function(t){return e.$jskos.compare(t,e.currentRegistry)});if(-1!==n){var i=t[n];u.a.pullAt(t,[n]),t=[i].concat(t)}return t},currentRegistry:function(){return this.$store.getters.getCurrentRegistry},registryGroups:function(){var e=u.a.cloneDeep(this.config.registryGroups),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;s.registries=[]}}catch(g){n=!0,i=g}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var a={uri:"http://coli-conc.gbv.de/registry-group/other-mappings",prefLabel:{de:"Andere Mappings",en:"Other Mappings"},registries:[]},l=!0,c=!1,p=void 0;try{for(var m,d=function(){var t=m.value,n=e.find(function(e){return e.uri==u.a.get(t,"subject[0].uri")})||a;n.registries.push(t)},h=this.mappingRegistries[Symbol.iterator]();!(l=(m=h.next()).done);l=!0)d()}catch(g){c=!0,p=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw p}}return e.push(a),e=e.filter(function(e){return e.registries.length>0}),e},showAllSchemes:{get:function(){return this.$settings.mappingBrowserAllSchemes},set:function(e){this.$store.commit({type:"settings/set",prop:"mappingBrowserAllSchemes",value:e}),this.$store.commit("mapping/setRefresh")}},showAllResults:{get:function(){return this.$settings.mappingBrowserShowAll},set:function(e){this.$store.commit({type:"settings/set",prop:"mappingBrowserShowAll",value:e}),this.$store.commit("mapping/setRefresh")}}},watch:{needsRefresh:function(e){if(e){var t=this.$store.state.mapping.mappingsNeedRefreshRegistry;t?this.reload(!0,t):this.reload(!0),this.$store.commit("mapping/setRefresh",{refresh:!1})}},selected:{handler:function(){this.reload()},deep:!0},settingsShow:function(e){e?this.refreshSettingsDownload():this.settingsDownloadCurrent=null},locale:function(){this.$store.commit("mapping/setRefresh")},currentRegistry:function(e,t){this.$jskos.compare(e,t)||this.$store.commit("mapping/setRefresh")}},created:function(){this.reload=u.a.debounce(this.internalReload,100);var e=!0,t=!1,n=void 0;try{for(var i,r=this.registryGroups[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.$set(this.registryGroupShow,o.uri,!1)}}catch(s){t=!0,n=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}},mounted:function(){this.$util.setupTableScrollSync(),this.reload(),document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)},methods:{refreshSettingsDownload:function(){var e=this,t=function(t){var n=e.$jskos.minifyMapping(t),i=!0,r=!1,o=void 0;try{for(var s,a=e.$jskos.conceptsOfMapping(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,c=e._getObject(l),p=e.$util.getLanguage(u.a.get(c,"prefLabel"));p&&(l.prefLabel=u.a.pick(c.prefLabel,[p]))}}catch(m){r=!0,o=m}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return JSON.stringify(n)},n=this.items.map(function(e){return e.mapping}).filter(function(e){return null!=e});this.settingsDownloadCurrent=n.map(t).join("\n")},handleClickOutside:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.registryGroups[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,a=u.a.get(this.$refs["registryGroup-".concat(s.uri,"-popover")],"[0]");a&&!a.contains(e.target)&&(this.registryGroupShow[s.uri]=!1)}}catch(c){n=!0,i=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var l=this.$refs.settingsPopover;l&&!l.contains(e.target)&&(this.settingsShow=!1)},internalReload:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,i=[],r=function(){var t,n;e.previousSelected={},e.previousSelected.concept=(t={},rt(t,!0,e.selected.concept[!0]?{uri:e.selected.concept[!0].uri}:null),rt(t,!1,e.selected.concept[!1]?{uri:e.selected.concept[!1].uri}:null),t),e.previousSelected.scheme=(n={},rt(n,!0,e.selected.scheme[!0]?{uri:e.selected.scheme[!0].uri}:null),rt(n,!1,e.selected.scheme[!1]?{uri:e.selected.scheme[!1].uri}:null),n)};if(!this.selected.concept[!0]&&!this.selected.concept[!1])return this.items=[],void r();if(!t&&this.$jskos.compare(this.selected.concept[!0],this.previousSelected.concept[!0])&&this.$jskos.compare(this.selected.concept[!1],this.previousSelected.concept[!1])&&this.$jskos.compare(this.selected.scheme[!0],this.previousSelected.scheme[!0])&&this.$jskos.compare(this.selected.scheme[!1],this.previousSelected.scheme[!1]))r();else{r(),t||(this.showMoreValues={});var o=!0;n||(this.items=[],o=!1),this.loading=1;var s=this.$util.generateID();this.loadingId=s;var a={direction:"both",mode:"or",selected:this.selected},l=u.a.get(this,"selected.concept[true]"),c=u.a.get(this,"selected.concept[false]");l&&(a["from"]=l),c&&(a["to"]=c);var p=[],m=!0,d=!1,h=void 0;try{for(var g,f=function(){var r=g.value;e.refreshTimers[r.uri]&&window.clearInterval(e.refreshTimers[r.uri]);var l={_wholeRow:!0,_rowClass:"mappingBrowser-table-row-loading",value:"",type:"loading",registry:r};e.showRegistry[r.uri]||(l={_wholeRow:!0,_rowClass:"mappingBrowser-table-row-hidden",value:"",registry:r});var c=e.items.findIndex(function(t){return e.$jskos.compare(t.registry,r)});if(o&&-1!=c){if(r.uri!=n)return"continue";t&&e.showRegistry[r.uri]&&e.items[c].mapping||(e.items=e.items.filter(function(t){return!e.$jskos.compare(t.registry,r)}),e.items=e.items.slice(0,c).concat([l],e.items.slice(c,e.items.length)))}else e.items.push(l);if(!e.showRegistry[r.uri])return"continue";var m=e.getMappings(it({},a,{registry:r.uri,all:!0})).then(function(t){if(e.loadingId==s){var n=[];t=t.sort(function(t,n){if(t._occurrence||n._occurrence)return u.a.get(n,"_occurrence.count",0)-u.a.get(t,"_occurrence.count",0);var i=function(t,n){var i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;if(e.$jskos.compare(l,n))return!0}}catch(c){r=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return!1},r=function(e,t){var n=t?"from":"to";return u.a.get(e,"".concat(n,".memberSet"))||u.a.get(e,"".concat(n,".memberChoice"))||u.a.get(e,"".concat(n,".memberList"))||[]},o={a:10,b:10};if(u.a.forOwn({a:t,b:n},function(t,n){var s=r(t,!0),a=r(t,!1);i(s,e.selected.concept[!0])&&(o[n]-=6),i(a,e.selected.concept[!1])&&(o[n]-=4),i(s,e.selected.concept[!1])&&(o[n]-=3),i(a,e.selected.concept[!0])&&(o[n]-=2),e.$jskos.compare(t.fromScheme,e.selected.scheme[!0])&&(o[n]-=1),e.$jskos.compare(t.toScheme,e.selected.scheme[!1])&&(o[n]-=1)}),o.a-o.b!=0)return o.a-o.b;var s=e.$util.compareMappingsByConcepts(t.mapping,n.mapping,"from");return 0!=s?s:e.$util.compareMappingsByConcepts(t.mapping,n.mapping,"to")});var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var m=l.value,d={mapping:m,registry:r};if(d.sourceScheme=u.a.get(m,"fromScheme")||void 0,d.targetScheme=u.a.get(m,"toScheme")||void 0,!e.showAllSchemes&&e.selected.scheme[!0]&&e.selected.scheme[!1]){for(var h=!0,g=[d.sourceScheme,d.targetScheme],f=0;f<g.length;f++){for(var v=g[f],y=!1,b=[!0,!1],_=0;_<b.length;_++){var w=b[_];e.$jskos.compare(v,e.selected.scheme[w])&&(y=!0)}h=h&&y}if(!h)continue}if(d.sourceConcepts=e.$jskos.conceptsOfMapping(m,"from").filter(function(e){return null!=e}),d.targetConcepts=e.$jskos.conceptsOfMapping(m,"to").filter(function(e){return null!=e}),p=p.concat(d.sourceConcepts).concat(d.targetConcepts),d.sourceConceptsLong=d.sourceConcepts,d.targetConceptsLong=d.targetConcepts,u.a.get(m,"from")||0!=d.sourceConcepts.length||(d.sourceScheme=void 0),u.a.get(m,"to")||0!=d.targetConcepts.length||(d.targetScheme=void 0),d.sourceConcepts.length+d.targetConcepts.length!=0){var $=!1,S=!0,C=!1,k=void 0;try{for(var x,M=d.sourceConcepts[Symbol.iterator]();!(S=(x=M.next()).done);S=!0){var L=x.value;e.selected.concept[!0]&&L.uri==e.selected.concept[!0].uri&&($=!0),L.inScheme=u.a.get(L,"inScheme")||[m.fromScheme]}}catch(z){C=!0,k=z}finally{try{S||null==M.return||M.return()}finally{if(C)throw k}}var D=!1,T=!0,j=!1,A=void 0;try{for(var O,B=d.targetConcepts[Symbol.iterator]();!(T=(O=B.next()).done);T=!0){var R=O.value;e.selected.concept[!1]&&R.uri==e.selected.concept[!1].uri&&(D=!0),R.inScheme=u.a.get(R,"inScheme")||[m.toScheme]}}catch(z){j=!0,A=z}finally{try{T||null==B.return||B.return()}finally{if(j)throw A}}d._rowClass="",$&&D&&(d._rowClass="mappingBrowser-table-row-match"),d.creator=m.creator&&m.creator[0]||"","object"===nt(d.creator)&&(d.creator=e.$util.prefLabel(d.creator)),d.source=e.$util.prefLabel(r),d.sourceShort=e.$util.notation(r),d.type=e.$jskos.mappingTypeByType(m.type),d.occurrence=m._occurrence,n.push(d)}}}catch(z){o=!0,a=z}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var E=e.items.findIndex(function(t){return e.$jskos.compare(t.registry,r)});if(E>=0){if(0==n.length){var I={_wholeRow:!0,_rowClass:"mappingBrowser-table-row-loading mappingBrowser-table-row-noItems fontSize-small text-grey",value:"",type:"noItems",registry:r};n=[I]}var N=e.items.filter(function(t){return!e.$jskos.compare(t.registry,r)});e.items=N.slice(0,E).concat(n,N.slice(E,N.length))}r.autoRefresh&&(window.clearInterval(e.refreshTimers[r.uri]),e.refreshTimers[r.uri]=setInterval(function(){e.$store.commit("mapping/setRefresh",{registry:r.uri})},u.a.isInteger(r.autoRefresh)?r.autoRefresh:5e3))}}).catch(function(e){console.warn("Error",e)});i.push(m)},v=this.mappingRegistries[Symbol.iterator]();!(m=(g=v.next()).done);m=!0)f()}catch(y){d=!0,h=y}finally{try{m||null==v.return||v.return()}finally{if(d)throw h}}Promise.all(i).then(function(){e.loadingId==s&&(e.loading=0,e.loadingId=null,e.mbLoadConcepts(p),e.settingsShow&&e.refreshSettingsDownload())})}},showMore:function(e){this.showMoreValues[e]=u.a.get(this.showMoreValues,'["'.concat(e,'"]'),1)+1,this.tableItemsRecompute=Math.random()},edit:function(e){var t=this,n=this.canEdit(e),i=function(e){var n=t.$jskos.copyDeep(e);return n.from.memberSet=e.from.memberSet.slice(),n.to.memberSet?n.to.memberSet=e.to.memberSet.slice():n.to.memberList?n.to.memberList=e.to.memberList.slice():n.to.memberChoice&&(n.to.memberChoice=e.to.memberChoice.slice()),n._provider=e._provider,n.fromScheme=e.fromScheme,n.toScheme=e.toScheme,n},r=i(e.item.mapping);this.mbLoadConcepts([].concat(r.from.memberSet,r.to.memberSet,r.to.memberList,r.to.memberChoice)),this.canSave(r)?this.saveMapping(r).then(function(e){t.$store.commit({type:"mapping/set",mapping:e,original:n?e:null})}):this.$store.commit({type:"mapping/set",mapping:r,original:n&&r._provider&&r._provider.has.canSaveMappings&&this.$jskos.compare(r._provider.registry,this.currentRegistry)?i(r):null})},mbLoadConcepts:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a&&(u.a.isEmpty(a.prefLabel)||u.a.isEmpty(a.notation))&&!this.$jskos.isContainedIn(a,this.loadingConcepts)&&!this.$jskos.isContainedIn(a,this.errorConcepts)&&this.getProvider(a)&&t.push(a)}}catch(l){i=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}this.loadConcepts(t)},canEdit:function(e){if(!e.item.mapping)return!1;if(!e.item.registry.provider.has.auth)return!0;var t=e.item.mapping,n=(t.creator||[]).map(function(e){return e.uri}).filter(function(e){return e});return!!u.a.intersection(n,this.userUris).length},canRemove:function(e){return this.canEdit(e)&&(!this.currentRegistry.provider.has.auth||this.currentRegistry.provider.auth)},removeMapping:function(e){var t=this;this.loadingGlobal=!0,this.$store.dispatch({type:"mapping/removeMappings",mappings:[e]}).then(function(e){var n=Xe(e,1),i=n[0];i?t.alert(t.$t("alerts.mappingDeleted"),null,"success2"):t.alert(t.$t("alerts.mappingNotDeleted"),null,"danger"),t.$store.commit("mapping/setRefresh",{registry:u.a.get(t.currentRegistry,"uri")})}).catch(function(e){console.error("MappingBrowser - error in removeMapping:",e)}).then(function(){t.loadingGlobal=!1})},canSave:function(e){if(!e||!e.fromScheme||!e.toScheme)return!1;if(e._provider&&this.$jskos.compare(e._provider.registry,this.currentRegistry))return!1;e.identifier||(e=this.$jskos.addMappingIdentifiers(e));var t=(e.identifier||[]).find(function(e){return e.startsWith("urn:jskos:mapping:content")});return!!t},saveMapping:function(e){var t=this;this.loading=1,this.loadingGlobal=!0;var n=this.creator,i=this.$util.prefLabel(n,null,!1);return e.contributor=(e.contributor||[]).concat((e.creator||[]).filter(function(e){return!(n.uri&&e.uri&&n.uri==e.uri)&&!(i&&t.$util.prefLabel(e,null,!1)&&i==t.$util.prefLabel(e,null,!1))})),0==e.contributor.length&&this.$delete(e,"contributor"),e.creator=[n],this.$store.dispatch({type:"mapping/saveMappings",mappings:[{mapping:e}]}).then(function(e){return e[0]}).catch(function(){return null}).then(function(e){if(!e){var n=t.$t("alerts.mappingNotSaved");t.currentRegistry.provider.has.auth&&!t.currentRegistry.provider.auth&&(n+=" "+t.$t("general.authNecessary")),t.alert(n,null,"danger")}return e}).catch(function(e){return console.error("MappingBrowser - error in saveMapping:",e),null}).then(function(e){return t.loadingGlobal=!1,t.$store.commit("mapping/setRefresh",{registry:u.a.get(t.currentRegistry,"uri")}),t.adjustMapping(e)})},annotationsScore:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,s=e.filter(function(e){return"assessing"==e.motivation})[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value.bodyValue;t+=parseInt(a)||0}}catch(c){i=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}var l=t>0?"+":t<0?"-":"±";return t=Math.abs(t),{score:t,sign:l}},annotationButtonColor:function(e){var t=3,n=this.annotationsScore(e),i=n.score,r=n.sign,o=150*Math.min(i/t,1),s=85,a=85,l=85;"-"==r?(s+=o,a-=50,l-=50):"+"==r&&(a+=o,s-=50,l-=50);var c="rgb(".concat(s,", ").concat(a,", ").concat(l,")");return c}}},st=ot,at=(n("4670"),n("c444"),Object(y["a"])(st,be,_e,!1,null,"5a3539be",null)),lt=at.exports,ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conceptTree",style:e.noTree?"min-height: 50px; max-height: 50px;":""},[n("minimizer",{attrs:{text:e.$t("conceptTree.title")}}),e._v(" "),n("div",{ref:"conceptTreeItems",staticClass:"conceptTreeItems scrollable"},e._l(e.items,function(t,i){var r=t.concept,o=t.depth,s=t.isSelected;return n("concept-tree-item",{key:i,attrs:{concept:r,depth:o,"is-selected":s,index:i,"is-left":e.isLeft}})}),1),e._v(" "),e.noTree?n("div",{staticClass:"fillAndCenter fontWeight-heavy"},[e._v("\n    "+e._s(e.$t("conceptTree.noTree"))+"\n  ")]):e._e(),e._v(" "),e.loading||e._topConcepts.includes(null)?n("loading-indicator-full"):e._e()],1)},pt=[],ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!=e.concept?n("div",{staticClass:"conceptTreeItem",class:{hovered:e.isHovered,selected:e.isSelected},style:"padding-left: "+10*e.depth+"px",attrs:{"data-uri":e.concept.uri}},[n("div",{staticClass:"conceptBox",attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragStart(e.concept,t)},dragend:function(t){return e.dragEnd()}}},[e.hasChildren?n("div",{staticClass:"arrowBox",on:{click:function(t){return e.openByArrow(!e.isOpen)}}},[n("i",{class:{right:!e.isOpen,down:e.isOpen}})]):e._e(),e._v(" "),n("router-link",{staticClass:"labelBox",class:{labelBoxFull:!e.hasChildren,labelBoxSelected:e.isSelected},attrs:{to:e.url},nativeOn:{mouseover:function(t){return e.hovering(e.concept)},mouseout:function(t){return e.hovering(null)},click:function(t){return t.stopPropagation(),t.preventDefault(),e.onClick(t)}}},[n("item-name",{attrs:{item:e.concept,"is-highlighted":e.isSelected,"prevent-external-hover":!0}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.canAddToMapping,expression:"canAddToMapping"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.addToMapping"),delay:e.$util.delay.medium},expression:"{ title: $t('general.addToMapping'), delay: $util.delay.medium}",modifiers:{hover:!0}}],staticClass:"addToMapping",on:{click:function(t){return e.addConcept()},mouseover:function(t){return e.hovering(e.concept)},mouseout:function(t){return e.hovering(null)}}},[n("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1)],1),e._v(" "),n("loading-indicator",{directives:[{name:"show",rawName:"v-show",value:e.hasChildren&&e.isOpen&&e.concept.narrower.includes(null),expression:"hasChildren && isOpen && concept.narrower.includes(null)"}],staticStyle:{"margin-left":"36px"},attrs:{size:"sm"}})],1):e._e()},mt=[],dt={name:"ConceptTreeItem",components:{LoadingIndicator:Me["a"],ItemName:I["a"]},mixins:[A["a"]],props:{concept:{type:Object,default:null},depth:{type:Number,default:null},index:{type:Number,default:null},isLeft:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!1}},data:function(){return{isHoveredFromHere:!1,loadingChildren:!1,preventClick:!1,preventClickArrow:!1,canAddToMapping:!1,interval:null,url:""}},computed:{hasChildren:function(){return 0!=u.a.get(this.concept,"narrower.length",1)},isHovered:function(){return this.isHoveredFromHere},childrenLoaded:function(){return!this.concept.narrower||!this.concept.narrower.includes(null)},isOpen:function(){return u.a.get(this.concept,"__ISOPEN__[".concat(this.isLeft,"]"),!1)}},methods:{hovering:function(e){var t=this;this.hoveredConcept=e,this.isHoveredFromHere=null!=e,this.canAddToMapping=this.$store.getters["mapping/canAdd"](this.concept,this.selected.scheme[this.isLeft],this.isLeft),window.clearInterval(this.interval),null!=e&&(this.interval=setInterval(function(){t.isMouseOver()||(t.isHoveredFromHere=!1,window.clearInterval(t.interval))},500)),this.url=e?this.getRouterUrl(e,this.isLeft):""},openByArrow:function(e){var t=this;this.preventClickArrow||(this.open(this.concept,this.isLeft,e),this.loadChildren(),this.preventClickArrow=!0,u.a.delay(function(){u.a.delay(function(){t.preventClickArrow=!1},200)},50))},select:function(e){this.setSelected({isLeft:this.isLeft,concept:e})},onClick:function(){var e=this;this.preventClick||this.isSelected&&this.hasChildren&&(this.preventClick=!0,u.a.delay(function(){e.open(e.concept,e.isLeft,!e.isOpen),u.a.delay(function(){e.preventClick=!1},200)},50))},addConcept:function(){!this.isSelected&&this.$settings.conceptTreeAddToMappingSelectsConcept&&this.select(this.concept),this.addToMapping({concept:this.concept,scheme:this.selected.scheme[this.isLeft],isLeft:this.isLeft})},loadChildren:function(){var e=this;this.loadingChildren=!0,this.loadNarrower(this.concept).then(function(t){e.loadingChildren=!1,t.__ISOPEN__&&t.__ISOPEN__[e.isLeft]&&e.scrollTo()})},scrollTo:function(){var e=this.$el.parentElement;while(!e.classList.contains("scrollable"))e=e.parentElement;var t={container:e,easing:"ease-in",offset:-20,cancelable:!0,x:!1,y:!0};this.$scrollTo(this.$el,200,t)}}},ht=dt,gt=(n("e14d"),Object(y["a"])(ht,ut,mt,!1,null,"41439c95",null)),ft=gt.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"minimizer"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.minimized,expression:"!minimized"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.minimize"),delay:e.$util.delay.medium},expression:"{ title: $t('minimizer.minimize'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"utilityButton minimizeButton",on:{click:function(t){return e.toggleMinimize()},mouseover:function(t){e.minimizeHovered=!0},mouseout:function(t){e.minimizeHovered=!1}}},[n("font-awesome-icon",{attrs:{icon:"window-minimize"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.minimized,expression:"minimized"}],staticClass:"minimizedOverlay",on:{click:function(t){return e.toggleMinimize()}}},[n("div",[e._v("\n      "+e._s(e.text)+"\n      "),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.maximize"),delay:e.$util.delay.medium},expression:"{ title: $t('minimizer.maximize'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"maximizeButton"},[n("font-awesome-icon",{attrs:{icon:"plus-square"}})],1)])]),e._v(" "),e.minimizeHovered?n("div",{staticClass:"minimizedHoverOverlay"}):e._e()])},yt=[],bt={name:"Minimizer",props:{text:{type:String,default:""},isColumn:{type:Boolean,default:!1}},data:function(){return{previousFlex:"",previousMinSizes:[],minimizerSize:"40px",minimizeHovered:!1}},computed:{minimized:{get:function(){return this.$settings.minimized[this.parentComponentName()]||!1},set:function(e){var t=u.a.cloneDeep(this.$settings.minimized);t[this.parentComponentName()]=e,this.$store.commit({type:"settings/set",prop:"minimized",value:t})}}},watch:{minimized:function(){this.refreshMinimize()}},mounted:function(){},methods:{parentComponentName:function(){return this.$el?this.$el.parentElement.id:"fallback"},toggleMinimize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.minimized=null!=e?e:!this.minimized},refreshMinimize:function(){this.minimized&&(this.previousMinSizes=[]);var e=this.$el;while(!e.classList.contains("mainComponent"))if(e=e.parentElement,this.minimized){var t=window.getComputedStyle(e),n=void 0;n=this.isColumn?t.getPropertyValue("min-width"):t.getPropertyValue("min-height"),this.previousMinSizes.push({element:e,minSize:n}),this.isColumn?(e.style.minWidth=this.minimizerSize,e.style.maxWidth=this.minimizerSize):(e.style.minHeight=this.minimizerSize,e.style.maxHeight=this.minimizerSize)}var i=window.getComputedStyle(e);if(this.minimized){e.classList.add("mainComponent-minimized"),this.previousFlex=i.getPropertyValue("flex"),e.style.flex="0 1 "+this.minimizerSize,e.dataset.minimized=1,this.refresh("minimize");var r=window.getComputedStyle(this.$el.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index"),o=!0,s=!1,a=void 0;try{for(var l,c=e.getElementsByClassName("minimizer")[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var p=l.value;if(p!=this.$el){var u=p.__vue__;u.minimized&&window.getComputedStyle(p.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index")>=r&&(p.getElementsByClassName("minimizedOverlay")[0].style.zIndex=r-1)}}}catch(y){s=!0,a=y}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}}else{e.classList.remove("mainComponent-minimized"),e.style.flex=this.previousFlex;var m=!0,d=!1,h=void 0;try{for(var g,f=this.previousMinSizes[Symbol.iterator]();!(m=(g=f.next()).done);m=!0){var v=g.value;this.isColumn?(v.element.style.minWidth=v.minSize,v.element.style.maxWidth=""):(v.element.style.minHeight=v.minSize,v.element.style.maxHeight="")}}catch(y){d=!0,h=y}finally{try{m||null==f.return||f.return()}finally{if(d)throw h}}e.dataset.minimized=0,this.refresh("minimize")}}}},_t=bt,wt=(n("ddcb"),Object(y["a"])(_t,vt,yt,!1,null,"0d5f80bd",null)),$t=wt.exports,St=n("2e22"),Ct={name:"ConceptTree",components:{LoadingIndicatorFull:Ue["a"],ConceptTreeItem:ft,Minimizer:$t},mixins:[A["a"]],props:{isLeft:{type:Boolean,default:!0}},data:function(){return{loading:!1,currentSelectedConcept:null,shouldScroll:!0,scrollTo:Object(St["a"])()}},computed:{schemeSelected:function(){return this.selected.scheme[this.isLeft]},conceptSelected:function(){return this.selected.concept[this.isLeft]},items:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._topConcepts[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.push(s);var a=this.children(s);e=e.concat(a)}}catch(g){n=!0,i=g}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var l=[],c=!0,p=!1,u=void 0;try{for(var m,d=e[Symbol.iterator]();!(c=(m=d.next()).done);c=!0){var h=m.value;l.push({concept:h,depth:h&&h.ancestors&&h.ancestors.length||0,isSelected:this.$jskos.compare(this.conceptSelected,h)})}}catch(g){p=!0,u=g}finally{try{c||null==d.return||d.return()}finally{if(p)throw u}}return l},_topConcepts:function(){var e=u.a.get(this.selected.scheme[this.isLeft],"uri",null);return u.a.get(this.topConcepts,e)},noTree:function(){return 0==this.items.length&&!this.loading}},watch:{conceptSelected:{handler:function(){var e=this,t=this.conceptSelected;if(t!=this.currentSelectedConcept&&(this.currentSelectedConcept=t,this.shouldScroll=!0),this.$jskos.isConcept(t))if(t.ancestors&&!t.ancestors.includes(null)){var n=!0,i=!0,r=!1,o=void 0;try{for(var s,a=t.ancestors[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;l.narrower&&!l.narrower.includes(null)||(n=!1)}}catch(f){r=!0,o=f}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}if(n&&this.shouldScroll){this.shouldScroll=!1;var c=!0,p=!1,m=void 0;try{for(var d,h=this.conceptSelected.ancestors[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var g=d.value;this.open(g,this.isLeft,!0)}}catch(f){p=!0,m=f}finally{try{c||null==h.return||h.return()}finally{if(p)throw m}}u.a.delay(function(){if(!e.shouldScroll){var n=document.querySelectorAll("[data-uri='".concat(t.uri,"']"))[0],i={container:e.$refs.conceptTreeItems,easing:"ease-in",offset:-50,cancelable:!0,x:!1,y:!0};n&&e.scrollTo(n,200,i),e.loading=!1}},100)}else n||(this.loading=!0)}else this.loading=!0},deep:!0}},methods:{children:function(e){var t=[];if(e&&e.__ISOPEN__&&e.__ISOPEN__[this.isLeft]){var n=!0,i=!1,r=void 0;try{for(var o,s=e.narrower[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;t.push(a),t=t.concat(this.children(a))}}catch(l){i=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return t}}},kt=Ct,xt=(n("13ae"),Object(y["a"])(kt,ct,pt,!1,null,"3417ff5a",null)),Mt=xt.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"itemDetail",on:{dragover:e.dragOver,drop:e.drop}},[n("minimizer",{attrs:{text:e.type+" Detail"}}),e._v(" "),null!=e.item?n("div",{staticClass:"itemDetail-content"},[n("Concept"==e.type?"ConceptDetail":"SchemeDetail",{tag:"component",attrs:{item:e.item,"is-left":e.isLeft,settings:e.internalSettings}})],1):e.loading?e._e():n("div",{staticClass:"fillAndCenter fontSize-normal fontWeight-heavy"},[e._v("\n    "+e._s(e.$t("itemDetail.pleaseSelect"))+"\n  ")]),e._v(" "),n("data-modal-button",{attrs:{data:e.item,url:e.apiUrl}}),e._v(" "),e.loading?n("loading-indicator-full"):e._e()],1)},Dt=[],Tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!=e.item?n("div",{staticClass:"conceptDetail"},[n("div",{staticClass:"conceptDetail-ancestors"},[e.ancestors.length>3&&!e.settings.showAllAncestors?n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.showAncestors?e.$t("conceptDetail.showLessAncestors"):e.$t("conceptDetail.showAllAncestors"),delay:e.$util.delay.medium},expression:"{ title: showAncestors ? $t('conceptDetail.showLessAncestors') : $t('conceptDetail.showAllAncestors'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button conceptDetail-ancestors-expand",on:{click:function(t){e.showAncestors=!e.showAncestors}}},[n("font-awesome-icon",{attrs:{icon:e.showAncestors?"angle-down":"angle-right"}})],1):e._e(),e._v(" "),e._l(e.ancestors.filter(function(e){return null!=e}),function(t,i){return n("div",{key:t.uri},[e.showAncestors||e.settings.showAllAncestors||0==i||i==e.ancestors.length-1||e.ancestors.length<=3?n("span",[n("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-up-alt"}}),e._v(" "),n("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1):1==i?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.showAllAncestors"),delay:e.$util.delay.medium},expression:"{ title: $t('conceptDetail.showAllAncestors'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-ancestors-more button",on:{click:function(t){e.showAncestors=!0}}},[n("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"ellipsis-v"}})],1):e._e()])}),e._v(" "),e._l((0==e.ancestors.length&&e.item.__BROADERLOADED__?e.broader:[]).filter(function(e){return null!=e}),function(t){return n("div",{key:t.uri},[n("font-awesome-icon",{attrs:{icon:"sort-up"}}),e._v(" "),n("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)}),e._v(" "),0!=e.ancestors.length&&e.ancestors.includes(null)||0==e.ancestors.length&&0!=e.broader.length&&!e.item.__BROADERLOADED__?n("loading-indicator",{attrs:{size:"sm"}}):e._e()],2),e._v(" "),n("div",{staticClass:"conceptDetail-name"},[n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.clearConcept"),delay:e.$util.delay.medium},expression:"{ title: $t('conceptDetail.clearConcept'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{display:"inline-block",margin:"0px 2px 0px 2px"},on:{click:function(t){e.$router.push({path:e.getRouterUrl(e.selected.scheme[e.isLeft],e.isLeft)})}}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),e._v(" "),n("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),e._v(" "),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.showAddToMappingButton?e.$t("general.addToMapping"):"",delay:e.$util.delay.medium},expression:"{ title: showAddToMappingButton ? $t('general.addToMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-name-addButton",class:{button:e.showAddToMappingButton,"button-disabled":!e.showAddToMappingButton},on:{click:function(t){e.addToMapping({concept:e.item,scheme:e.item.inScheme&&e.item.inScheme[0]||e.selected.scheme[e.isLeft],isLeft:e.isLeft})}}},[n("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1)],1),e._v(" "),n("b-card",{key:"conceptDetail-note-tabs"+e.iteration,staticClass:"conceptDetail-note-tabs",attrs:{"no-body":""}},[n("b-tabs",{attrs:{"no-fade":"",card:""}},[e._l([[e.item.scopeNote,e.$t("conceptDetail.scope")],[e.item.editorialNote,e.$t("conceptDetail.editorial")],[e.item.altLabel,e.$t("conceptDetail.registerEntries")],[{de:e.item.__GNDTERMS__},e.$t("conceptDetail.gnd")]].filter(function(t){return null!=t[0]&&null!=e.$util.lmContent(t[0])&&e.$util.lmContent(t[0]).length}),function(t,i){var r=t[0],o=t[1];return n("b-tab",{key:"note"+i+"-"+e.iteration,staticClass:"conceptDetail-notes",attrs:{title:o,active:"GND"==o&&!e.hasNotes(e.item)}},[n("div",{staticClass:"conceptDetail-note"},[n("span",{domProps:{innerHTML:e._s(e.notesOptions.visiblePart(e.$util.lmContent(r)))}}),e._v(" "),n("b-collapse",{staticClass:"no-transition",attrs:{id:"note"+i,tag:"span"}},[n("span",{domProps:{innerHTML:e._s(e.notesOptions.hiddenPart(e.$util.lmContent(r)))}})]),e._v(" "),e.notesOptions.isTruncated(e.$util.lmContent(r))?n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"note"+i,expression:"'note'+index"}],attrs:{href:""},on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"when-opened"},[e._v(e._s(e.$t("conceptDetail.showLess")))]),e._v(" "),n("span",{staticClass:"when-closed"},[e._v(e._s(e.$t("conceptDetail.showMore")))])]):e._e()],1)])}),e._v(" "),n("b-tab",{key:"zzzzzzzzzz"+e.iteration,attrs:{title:e.$t("conceptDetail.info")}},[e._l([e.item.uri].concat(e.item.identifier).filter(function(e){return null!=e}),function(t,i){return n("div",{key:i,class:(t.startsWith("http"),"conceptDetail-identifier")},[n("font-awesome-icon",{attrs:{icon:t.startsWith("http")?"link":"id-card"},on:{dblclick:function(t){e.copyToClipboard(e.elementForEvent(t))}}}),e._v(" "),n("auto-link",{attrs:{link:t}})],1)}),e._v(" "),e._l([e.$util.getLanguage(e.item.prefLabel)].concat(Object.keys(e.item.prefLabel||{}).filter(function(t){return t!=e.$util.getLanguage(e.item.prefLabel)})).filter(function(e){return e&&"-"!=e}),function(t){return n("div",{key:"conceptDetail-prefLabel-"+t,staticClass:"conceptDetail-identifier"},[n("b",[e._v(e._s(e.$t("conceptDetail.prefLabel"))+" ("+e._s(t)+"):")]),e._v(" "+e._s(e.$util.prefLabel(e.item,t))+"\n        ")])}),e._v(" "),e.item.creator&&e.item.creator.length?n("div",{staticClass:"conceptDetail-identifier"},[n("font-awesome-icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.$util.prefLabel(e.item.creator[0]))+"\n        ")],1):e._e(),e._v(" "),e.item.created?n("div",{staticClass:"conceptDetail-identifier"},[n("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.created,!0))+"\n        ")]):e._e(),e._v(" "),e.item.modified?n("div",{staticClass:"conceptDetail-identifier"},[n("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.modified,!0))+"\n        ")]):e._e(),e._v(" "),e.item.definition?e._l([e.$util.getLanguage(e.item.definition)].concat(Object.keys(e.item.definition).filter(function(t){return t!=e.$util.getLanguage(e.item.definition)&&"-"!=t})),function(t){return n("div",{key:"conceptDetail-defintion-"+t,staticClass:"conceptDetail-identifier"},[n("b",[e._v(e._s(e.$t("conceptDetail.definition"))+" ("+e._s(t)+"):")]),e._v(" "+e._s(e.$util.definition(e.item,t).join(", "))+"\n          ")])}):e._e()],2),e._v(" "),e.config.searchLinks?n("b-tab",{attrs:{title:e.$t("conceptDetail.searchLinks")}},[n("ul",{staticStyle:{"margin-bottom":"0"}},e._l(e.searchLinks,function(t,i){return n("li",{key:"searchLink"+e.isLeft+i},[n("a",{attrs:{href:t.url,target:"_blank"}},[e._v("\n              "+e._s(t.label)+"\n            ")])])}),0)]):e._e()],2)],1),e._v(" "),n("item-detail-narrower",{attrs:{narrower:e.item.narrower,"is-left":e.isLeft}})],1):e._e()},jt=[],At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.narrower&&e.narrower.length>0?n("div",{staticClass:"itemDetailNarrower"},[null!=e.text?n("div",{staticClass:"fontWeight-heavy"},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e(),e._v(" "),e._l(e.narrower.filter(function(e){return null!=e}),function(t){return n("div",{key:t.uri,staticClass:"itemDetailNarrower-item"},[n("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-down-alt"}}),e._v(" "),n("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)}),e._v(" "),0!=e.narrower.length&&e.narrower.includes(null)?n("loading-indicator",{attrs:{size:"sm"}}):e._e()],2):e._e()},Ot=[],Bt={name:"ItemDetailNarrower",components:{ItemName:I["a"],LoadingIndicator:Me["a"]},props:{narrower:{type:Array,default:function(){return new Array}},text:{type:String,default:null},isLeft:{type:Boolean,default:!0}}},Rt=Bt,Et=(n("67ca0"),Object(y["a"])(Rt,At,Ot,!1,null,"4371872d",null)),It=Et.exports,Nt={name:"ConceptDetail",components:{AutoLink:_,ItemName:I["a"],LoadingIndicator:Me["a"],ItemDetailNarrower:It},mixins:[A["a"]],props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:function(){return{}}}},data:function(){return{showAncestors:!1,iteration:0,notesOptions:{divider:"∤",maximumCharacters:140,join:function(e){return Array.isArray(e)?e.join(this.divider):e},visiblePart:function(e){var t=this.join(e);return t=t.substring(0,this.cutPosition(t)),this.replaceDivider(t)},hiddenPart:function(e){var t=this.join(e);return this.replaceDivider(t.substring(this.cutPosition(t)))},cutPosition:function(e){var t=new RegExp(this.divider,"g"),n=this.maximumCharacters-10*Math.min((e.substring(0,this.maximumCharacters-20).match(t)||[]).length,9);if(this.showAll||e.length-n<=20)return e.length;var i=e.substring(0,n).lastIndexOf(" "),r=e.substring(0,n).lastIndexOf("\n"),o=e.substring(0,n).lastIndexOf(this.divider);return Math.max(i,r,o)},isTruncated:function(e){var t=this.join(e);return!this.showAll&&t.length>this.cutPosition(t)},replaceDivider:function(e){return e.split(this.divider).join("<br>")}}}},computed:{showAddToMappingButton:function(){return this.$store.getters["mapping/canAdd"](this.item,u.a.get(this.item,"inScheme[0]")||this.selected.scheme[this.isLeft],this.isLeft)},ancestors:function(){return u.a.get(this.item,"ancestors",[])||[]},broader:function(){return u.a.get(this.item,"broader",[])||[]},searchLinks:function(){var e=this,t=this.$i18n.locale,n=this.$util.notation(this.item),i=this.$util.prefLabel(this.item),r={language:t,notation:n,prefLabel:i},o=[],s=!0,a=!1,l=void 0;try{for(var c,p=function(){var t=c.value,n=e.selected.scheme[e.isLeft],i=t.schemeUris||[],s=!i.length,a=!0,l=!1,p=void 0;try{for(var m,d=i[Symbol.iterator]();!(a=(m=d.next()).done);a=!0){var h=m.value;e.$jskos.compare(n,{uri:h})&&(s=!0)}}catch(f){l=!0,p=f}finally{try{a||null==d.return||d.return()}finally{if(l)throw p}}if(!s)return"continue";var g=t.url;u.a.forOwn(r,function(e,t){g=u.a.replace(g,new RegExp("{".concat(t,"}"),"g"),e)}),o.push({url:g,label:e.$util.prefLabel(t)})},m=this.config.searchLinks[Symbol.iterator]();!(s=(c=m.next()).done);s=!0)p()}catch(d){a=!0,l=d}finally{try{s||null==m.return||m.return()}finally{if(a)throw l}}return o=o.filter(function(e,t,n){return t===n.findIndex(function(t){return t.url==e.url})}),o}},watch:{item:function(e,t){this.$jskos.compare(e,t)||this.refresh()},settings:function(){this.refresh()}},mounted:function(){this.refresh()},methods:{refresh:function(){this.showAncestors=!1,this.loadGndTerms(),this.notesOptions.showMore={},this.notesOptions.showAll=this.settings.showAllNotes,this.iteration+=1},loadGndTerms:function(){var e=this;if(this.item){var t=this.item,n=[],i={direction:"both",from:this.item},r=this._getObject({uri:"http://bartoc.org/en/node/430"});n.push(this.getMappings(i)),Promise.all(n).then(function(n){if(!e.$jskos.compare(t,e.item))return[];var i=[],o=!0,s=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)for(var p=l.value,u=["from","to"],m=0;m<u.length;m++){var d=u[m],h="from"==d?"to":"from",g=!0,f=!1,v=void 0;try{for(var y,b=p[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var _=y.value,w=i.length;e.$jskos.compare(_[h+"Scheme"],r)&&(i=i.concat(_[h].memberSet||_[h].memberChoice||[]));while(w<i.length)e.$set(i[w],"__GNDTYPE__",e.$jskos.mappingTypeByType(_.type)),w+=1}}catch(D){f=!0,v=D}finally{try{g||null==b.return||b.return()}finally{if(f)throw v}}}}catch(D){s=!0,a=D}finally{try{o||null==c.return||c.return()}finally{if(s)throw a}}var $=[],S=!0,C=!1,k=void 0;try{for(var x,M=function(){var n=x.value;e.$jskos.compare(n,t)||$.push(e.loadDetails(n,{scheme:r}).then(function(t){return t&&e.$set(t,"__GNDTYPE__",n.__GNDTYPE__),t}))},L=i[Symbol.iterator]();!(S=(x=L.next()).done);S=!0)M()}catch(D){C=!0,k=D}finally{try{S||null==L.return||L.return()}finally{if(C)throw k}}return Promise.all($)}).then(function(n){n=n.filter(function(e){return null!=e});for(var i=[],r=["conceptDetail.relevanceVeryHigh","conceptDetail.relevanceHigh","conceptDetail.relevanceMedium","conceptDetail.relevanceLow"],o=r,s=function(){var t=o[a],r="<strong>".concat(e.$parent.$t("conceptDetail.relevance"),": ").concat(e.$parent.$t(t),"</strong> - "),s=[],l=!0,c=!1,p=void 0;try{for(var m,d=n.filter(function(n){return n.__GNDTYPE__.RELEVANCE==e.$parent.$t(t,"en")})[Symbol.iterator]();!(l=(m=d.next()).done);l=!0){var h=m.value;h&&e.$util.prefLabel(h,null,!1)&&s.push(u.a.escape(e.$util.prefLabel(h)))}}catch(g){c=!0,p=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw p}}s.length>0&&(r+=s.join(", "),i.push(r))},a=0;a<o.length;a++)s();e.$set(t,"__GNDTERMS__",i)}).catch(function(e){console.error("ConceptDetail: Error when loading GND mappings:",e)})}},elementForEvent:function(e){var t=e.target;return"path"==t.tagName.toLowerCase()&&(t=t.parentElement),t=t.nextElementSibling,t},notesShowMore:function(e,t){this.notesOptions.showMore[t]=e,this.iteration+=1},hasNotes:function(e){for(var t=["scopeNote","editorialNote","altLabel"],n=!1,i=t,r=0;r<i.length;r++){var o=i[r];n=n||null!=e&&null!=e[o]&&null!=e[o].de&&e[o].de.length>0}return n}}},zt=Nt,Pt=(n("6820"),n("c93d"),Object(y["a"])(zt,Tt,jt,!1,null,"2c92c6ca",null)),Ft=Pt.exports,Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schemeDetail"},[n("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),e._v(" "),e.item.license?n("div",{staticClass:"schemeDetail-license"},e._l(e.item.license,function(t,i){return n("span",{key:i},[n("a",{attrs:{href:t.uri,target:"_blank"}},[e.$util.licenseBadges[t.uri]?n("img",{staticClass:"schemeDetail-licenseBadge",attrs:{src:e.$util.licenseBadges[t.uri]}}):n("span",[e._v("\n          "+e._s(t.uri)+"\n        ")])]),e._v(" "),e.licenseAttribution(e.item)?n("span",[e._v("\n        by "),t.uri.indexOf("by")>=0&&e.licenseAttribution(e.item).url?n("a",{attrs:{href:e.licenseAttribution(e.item).url,target:"_blank"}},[n("auto-link",{attrs:{link:e.licenseAttribution(e.item).label}})],1):n("span",[n("auto-link",{attrs:{link:e.licenseAttribution(e.item).label}})],1)]):e._e()])}),0):e._e(),e._v(" "),e._l([e.item.uri].concat(e.item.identifier).filter(function(e){return null!=e}),function(t,i){return n("div",{key:i,staticClass:"schemeDetail-identifier"},[n("font-awesome-icon",{attrs:{icon:t.startsWith("http")?"link":"id-card"}}),e._v(" "),n("auto-link",{attrs:{link:t}})],1)}),e._v(" "),e.item.created?n("div",{staticClass:"schemeDetail-identifier"},[n("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.created,!0))+"\n  ")]):e._e(),e._v(" "),e.item.modified?n("div",{staticClass:"schemeDetail-identifier"},[n("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.modified,!0))+"\n  ")]):e._e(),e._v(" "),e.item.languages?n("div",{staticClass:"schemeDetail-identifier"},[n("b",[e._v(e._s(e.$t("schemeDetail.languages"))+":")]),e._v(" "+e._s(e.item.languages.join(", "))+"\n  ")]):e._e(),e._v(" "),e.$util.notation(e.item)?n("div",{staticClass:"schemeDetail-identifier"},[n("a",{attrs:{href:"mappings.html?"+(e.isLeft?"fromScheme":"toScheme")+"="+e.$util.notation(e.item)+"&tab=1",target:"_blank"}},[e._v("\n      "+e._s(e.$t("schemeDetail.availableMappings"))+"\n    ")])]):e._e(),e._v(" "),e.settings.showTopConceptsInScheme&&e.topConcepts[e.item.uri]&&e.topConcepts[e.item.uri].length>0?n("item-detail-narrower",{attrs:{narrower:e.topConcepts[e.item.uri],"is-left":e.isLeft,text:"Top Concepts:"}}):e.settings.showTopConceptsInScheme?n("div",[e._v("\n    "+e._s(e.$t("schemeDetail.noTopConcepts"))+"\n  ")]):e._e()],2)},Ut=[],Vt={name:"SchemeDetail",components:{AutoLink:_,ItemName:I["a"],ItemDetailNarrower:It},props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:function(){return{}}}},methods:{licenseAttribution:function(e){var t=e.creator||e.publisher;return t&&0!=t.length?{url:t[0].url,label:this.$util.prefLabel(t[0])}:null}}},Wt=Vt,Gt=(n("34c9"),Object(y["a"])(Wt,Ht,Ut,!1,null,"7ef9761d",null)),qt=Gt.exports,Qt={name:"ItemDetail",components:{LoadingIndicatorFull:Ue["a"],Minimizer:$t,ConceptDetail:Ft,SchemeDetail:qt,DataModalButton:ce},props:{item:{type:Object,default:null},isScheme:{type:Boolean,default:!1},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,defaultSettings:{showGndTerms:!0,showSchemeInAncestors:!0,showTopConceptsInScheme:!1,showAllAncestors:!1,showAllNotes:!1}}},computed:{type:function(){return this.$jskos.isConcept(this.item)?"Concept":"Scheme"},internalSettings:function(){return Object.assign({},this.defaultSettings,{showAllAncestors:this.$settings.conceptDetailShowAllAncestors,showAllNotes:this.$settings.conceptDetailDoNotTruncateNotes},this.settings)},apiUrl:function(){if(!this.item||!this.item.uri)return null;var e;if(this.$jskos.isScheme(this.item)){var t=u.a.get(this.item,"inScheme[0]._provider")||u.a.get(this.item,"_provider");e=u.a.get(t,"registry.schemes")||u.a.get(t,"registry.concepts")||u.a.get(t,"registry.data")}else{var n=u.a.get(this.item,"inScheme[0]._provider");e=u.a.get(n,"registry.concepts")||u.a.get(n,"registry.data")}return e&&u.a.isString(e)?"".concat(e,"?uri=").concat(encodeURIComponent(this.item.uri)):null}},watch:{item:function(){this.$el.scrollTop=0}},mounted:function(){this.$el.scrollTop=0},methods:{droppedConcept:function(e){this.$router.push({path:this.getRouterUrl(e,this.isLeft,!0)})}}},Jt=Qt,Kt=(n("8d74"),Object(y["a"])(Jt,Lt,Dt,!1,null,"c9c35cc6",null)),Yt=Kt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.resizingSlider"),delay:e.$util.delay.medium,placement:e.isColumn?"right":"top"},expression:"{ title: $t('general.resizingSlider'), delay: $util.delay.medium, placement: isColumn ? 'right' : 'top' }",modifiers:{hover:!0}}],class:{resizingSliderCol:e.isColumn,resizingSliderRow:!e.isColumn},on:{mousedown:e.startResizing}},[n("div",[n("font-awesome-icon",{attrs:{icon:e.isColumn?"ellipsis-v":"ellipsis-h"}})],1)])},Zt=[];function en(e,t){return rn(e)||nn(e,t)||tn()}function tn(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function nn(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),t&&n.length===t)break}catch(l){r=!0,o=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}function rn(e){if(Array.isArray(e))return e}var on={name:"ResizingSlider",props:{isColumn:{type:Boolean,default:!1}},data:function(){return{resizing:!1,savedValues:{}}},computed:{flex:function(){return this.$settings.flex||{}}},watch:{flex:function(){this.refreshFlex()}},mounted:function(){this.refreshFlex()},methods:{getSiblings:function(){var e,t,n=this.$el,i=n.parentElement,r=window.getComputedStyle(n),o=r.getPropertyValue("order");try{o=parseInt(o)}catch(s){o=0}o>0?(e=i.querySelector(".order"+(o-1)),t=i.querySelector(".order"+(o+1))):(e=n.previousElementSibling,t=n.nextElementSibling);while(e&&(e.classList.contains("resizingSliderRow")||e.classList.contains("resizingSliderColumn")))e=e.previousElementSibling;while(t&&(t.classList.contains("resizingSliderRow")||t.classList.contains("resizingSliderColumn")))t=t.nextElementSibling;return[e,t]},startResizing:function(e){var t=this.getSiblings(),n=en(t,2),i=n[0],r=n[1];if(null!=i&&null!=r){var o=i.clientWidth,s=r.clientWidth,a=i.clientHeight,l=r.clientHeight,c=o+s,p=a+l,m=window.getComputedStyle(i),d=window.getComputedStyle(r),h=parseFloat(m.getPropertyValue("flex-grow"))+parseFloat(d.getPropertyValue("flex-grow")),g=parseInt(m.getPropertyValue("min-width")),f=parseInt(d.getPropertyValue("min-width")),v=parseInt(m.getPropertyValue("min-height")),y=parseInt(d.getPropertyValue("min-height")),b=parseInt(u.a.get(i,"dataset.minimized"))||0,_=parseInt(u.a.get(r,"dataset.minimized"))||0;if(b+_!=2){b+_==0&&(this.savedValues.previousWidth=o,this.savedValues.nextWidth=s,this.savedValues.previousHeight=a,this.savedValues.nextHeight=l);var w=this;if(this.resizing)S();else{this.resizing=!0;var $=w.isColumn?e.clientX:e.clientY;document.body.style.cursor=w.isColumn?"col-resize":"row-resize",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.addEventListener("mousemove",C),document.onmouseup=S}}}function S(){document.removeEventListener("mousemove",C),document.onmouseup=null,document.body.style.cursor="auto",document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto",w.resizing=!1}function C(e){var t=(w.isColumn?e.clientX:e.clientY)-$;if(w.isColumn){var n=o+t,u=s-t;if(n<g||u<f||b+_==1){if(n<=10||u<=10||n>=3*g&&1==b||u>=3*f&&1==_){var m=n<=10||1==b?i:r,d=m.getElementsByClassName("minimizer")[0];if(d.parentElement!=m&&d.parentElement.parentElement!=m)return;var C=d.__vue__;C&&(i.style.flex=w.savedValues.previousWidth/c*h,w.saveFlex(i),r.style.flex=w.savedValues.nextWidth/c*h,w.saveFlex(r),C.toggleMinimize(),S())}return}i.style.flex=n/c*h,w.saveFlex(i),r.style.flex=u/c*h,w.saveFlex(r)}else{var k=a+t,x=l-t;if(k<v||x<y||b+_==1){if(k<=10||x<=10||k>=3*v&&1==b||x>=3*y&&1==_){var M=k<=10||1==b?i:r,L=M.getElementsByClassName("minimizer")[0];if(L.parentElement!=M&&L.parentElement.parentElement!=M)return;var D=L.__vue__;D&&(i.style.flex=w.savedValues.previousHeight/p*h,w.saveFlex(i),r.style.flex=w.savedValues.nextHeight/p*h,w.saveFlex(r),D.toggleMinimize(),S())}return}i.style.flex=k/p*h,w.saveFlex(i),r.style.flex=x/p*h,w.saveFlex(r)}}},saveFlex:function(e){if(e&&e.id&&e.style){var t=u.a.cloneDeep(this.$settings.flex);t[e.id]=e.style.flex,this.$store.commit({type:"settings/set",prop:"flex",value:t})}},refreshFlex:function(){var e=this.getSiblings(),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;s&&s.id&&(null!=this.flex[s.id]&&(s.style.flex=this.flex[s.id]))}}catch(a){n=!0,i=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},sn=on,an=(n("f4aa"),Object(y["a"])(sn,Xt,Zt,!1,null,"44f686ca",null)),ln=an.exports,cn=n("bc3a"),pn=n.n(cn),un=n("622d"),mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conceptSchemeSelection",staticStyle:{overflow:"visible"},attrs:{id:"conceptSchemeSelection-"+e.id}},[e.scheme?n("div",{staticClass:"conceptSchemeSelection-collapsed"},[n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.popoverShown?e.$t("schemeSelection.popoverHide"):e.$t("schemeSelection.popoverShow"),delay:e.$util.delay.medium},expression:"{ title: popoverShown ? $t('schemeSelection.popoverHide') : $t('schemeSelection.popoverShow'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-expandButton button",attrs:{id:e.id+"-expandButton"},on:{click:e.togglePopover}},[n("font-awesome-icon",{attrs:{icon:e.popoverShown?"angle-left":"angle-down"}})],1),e._v(" "),n("div",{staticClass:"conceptSchemeSelection-schemeName"},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.$util.delay.medium},expression:"{ title: $jskos.isContainedIn(scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-star",class:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?"conceptSchemeSelection-starFavorite":"conceptSchemeSelection-starNormal",attrs:{icon:"star"},on:{click:function(t){return e.toggleFavoriteScheme(e.scheme)}}}),e._v(" "),n("item-name",{attrs:{item:e.scheme,"is-link":!0,"is-left":e.isLeft,"font-size":"large"}}),e._v(" "),e.scheme.license&&e.scheme.license.length?n("span",[e.$util.licenseBadges[e.scheme.license[0].uri]?n("img",{staticClass:"schemeDetail-licenseBadge",attrs:{src:e.$util.licenseBadges[e.scheme.license[0].uri]}}):e._e()]):e._e(),e._v(" "),n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.clearScheme"),delay:e.$util.delay.medium},expression:"{ title: $t('general.clearScheme'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{display:"inline-block","margin-right":"2px","margin-top":"-3px"},on:{click:e.clearScheme}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1),e._v(" "),n("concept-search",{ref:"conceptSearch",staticClass:"conceptSchemeSelection-conceptSearch",attrs:{"is-left":e.isLeft,scheme:e.scheme}})],1):e._e(),e._v(" "),n(null==e.scheme?"div":"b-popover",{tag:"div",staticClass:"conceptSchemeSelection-popover",attrs:{target:e.id+"-expandButton",container:"conceptSchemeSelection-"+e.id,triggers:"disabled",placement:"leftbottom"},on:{shown:function(t){e.popoverShown=!0},hidden:function(t){e.popoverShown=!1}}},[n("div",{ref:"popover",staticClass:"conceptSchemeSelection-expanded font-default text-dark color-primary-0-bg fontSize-normal"},[n("div",{staticClass:"componentTitle"},[e._v("\n        "+e._s(e.isLeft?e.$t("schemeSelection.source"):e.$t("schemeSelection.target"))+"\n      ")]),e._v(" "),n("b-form",{attrs:{inline:""},on:{submit:e.chooseFirst}},[n("b-form-input",{ref:"input",staticStyle:{flex:"1","margin-right":"5px"},attrs:{placeholder:e.$t("schemeSelection.schemeFilterPlaceholder"),autocomplete:"off",size:"sm"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hidePopover(t)}},model:{value:e.schemeFilter,callback:function(t){e.schemeFilter=t},expression:"schemeFilter"}}),e._v(" "),n("b-form-select",{staticClass:"fontSize-normal",attrs:{options:e.languageFilterOptions,size:"sm"},on:{change:e.focusAndSelectInput},model:{value:e.languageFilter,callback:function(t){e.languageFilter=t},expression:"languageFilter"}})],1),e._v(" "),n("ul",{staticClass:"conceptSchemeSelection-schemeList scrollable"},[e._l(e.favoriteSchemes||[],function(t,i){return n("li",{directives:[{name:"show",rawName:"v-show",value:!e.isFiltered,expression:"!isFiltered"}],key:t.uri+"-favorite-scheme-list-"+e.id+i},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("schemeSelection.starRemove"),delay:e.$util.delay.medium},expression:"{ title: $t('schemeSelection.starRemove'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-star conceptSchemeSelection-starFavorite",attrs:{icon:"star"},on:{click:function(n){return e.toggleFavoriteScheme(t)}}}),e._v(" "),n("item-name",{ref:0!=i||e.isFiltered?null:"firstScheme",refInFor:!0,attrs:{item:t,"is-link":!0,"is-left":e.isLeft}})],1)}),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:!e.isFiltered,expression:"!isFiltered"}]},[n("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.showAllSchemes=!e.showAllSchemes}}},[e._v("\n            "+e._s(e.showAllSchemes?e.$t("schemeSelection.hideAllSchemes",{count:e.filteredSchemes.length}):e.$t("schemeSelection.showAllSchemes",{count:e.filteredSchemes.length}))+"\n          ")])]),e._v(" "),e._l(e.filteredSchemes,function(t,i){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.showAllSchemes||e.isFiltered,expression:"showAllSchemes || isFiltered"}],key:t.uri+"-scheme-list-"+e.id+i},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(t,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.$util.delay.medium},expression:"{ title: $jskos.isContainedIn(_scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-star",class:e.$jskos.isContainedIn(t,e.favoriteSchemes)?"conceptSchemeSelection-starFavorite":"conceptSchemeSelection-starNormal",attrs:{icon:"star"},on:{click:function(n){return e.toggleFavoriteScheme(t)}}}),e._v(" "),n("item-name",{ref:0!=i||!e.isFiltered&&e.favoriteSchemes.length?null:"firstScheme",refInFor:!0,attrs:{item:t,"is-link":!0,"is-left":e.isLeft}})],1)})],2),e._v(" "),e.favoriteConcepts&&e.favoriteConcepts.length?n("div",{staticClass:"componentTitle",staticStyle:{"margin-top":"30px"}},[e._v("\n        "+e._s(e.$t("schemeSelection.conceptQuick"))+"\n      ")]):e._e(),e._v(" "),n("div",{staticClass:"conceptSchemeSelection-favoriteConcepts scrollable"},e._l(e.favoriteConcepts,function(t){return n("p",{key:t.uri+"-favorite-"+e.id},[n("item-name",{attrs:{item:t,"is-left":e.isLeft,"is-link":"","force-side":""}})],1)}),0)],1)])],1)},dn=[],hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conceptSearch",on:{mousemove:function(t){return e.mousemove()}}},[n("div",{staticClass:"conceptSearch-icon button",on:{click:e.focusSearch}},[n("font-awesome-icon",{attrs:{icon:"search"}})],1),e._v(" "),n("div",{staticClass:"conceptSearch-inputWrapper"},[e.isOpen&&!e.loading?n("div",{staticClass:"conceptSearch-resultCount",style:"right: "+(e.scheme.types&&e.scheme.types.length?27:10)+"px;"},[e._v("\n      "+e._s(e.searchResult.length)+" "+e._s(e.$tc("search.results",e.searchResult.length))+"\n    ")]):e._e(),e._v(" "),e.scheme.types&&e.scheme.types.length?n("div",{staticClass:"conceptSearch-filter button",attrs:{id:"conceptSearch-filter-"+(e.isLeft?"left":"right"),disabled:e.filterPopoverShow}},[n("font-awesome-icon",{attrs:{icon:"filter"}})],1):e._e(),e._v(" "),e.scheme.types&&e.scheme.types.length?n("b-popover",{attrs:{target:"conceptSearch-filter-"+(e.isLeft?"left":"right"),show:e.filterPopoverShow,triggers:"click",placement:"auto"},on:{"update:show":function(t){e.filterPopoverShow=t}}},[n("div",{ref:"filterPopover"},[n("b-form-checkbox-group",{staticClass:"conceptSearch-filterCheckboxes",attrs:{stacked:"",size:"sm"},model:{value:e.selectedTypes,callback:function(t){e.selectedTypes=t},expression:"selectedTypes"}},e._l(e.scheme.types,function(t){return n("b-form-checkbox",{key:t.uri,staticClass:"conceptSearch-filterCheckbox",attrs:{value:t.uri}},[e._v("\n            "+e._s(e.$util.prefLabel(t))+"\n          ")])}),1)],1)]):e._e(),e._v(" "),n("b-form-input",{ref:"searchInput",attrs:{placeholder:e.$t("search.placeholder"),size:"sm",autocomplete:"off"},nativeOn:{click:function(t){e.isOpen=""!=e.searchQuery},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onArrowDown(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onArrowUp(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.closeResults(t)}],keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter(t)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.$refs.searchInput.$el.blur(),e.closeResults()}],focus:function(t){e.isOpen=""!=e.searchQuery}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"conceptSearch-results"},[e.loading?n("div",{staticClass:"conceptSearch-loading"},[n("loading-indicator")],1):n("ul",{staticClass:"conceptSearch-results-list"},[e._l(e.searchResult,function(t,i){return n("li",{key:i,staticClass:"conceptSearch-results-item",class:{"conceptSearch-selected":i===e.searchSelected},attrs:{id:e.uniqueID+"-searchResult-"+i,draggable:"true"},on:{dragstart:function(n){return e.dragStartResult(t,n)},dragend:e.dragEnd,click:function(t){return e.chooseResult(i)},mouseover:function(t){return e.mouseover(i)}}},[n("span",{domProps:{innerHTML:e._s(e.highlightQueryInResult(t[0]))}})])}),e._v(" "),0==e.searchResult.length?n("li",{staticClass:"conceptSearch-results-item"},[n("div",[e._v(e._s(e.$t("search.noResults")))])]):e._e()],2)])],1)])},gn=[],fn={name:"ConceptSearch",components:{LoadingIndicator:Me["a"]},mixins:[A["a"]],props:{isLeft:{type:Boolean,default:!0},scheme:{type:Object,default:null}},data:function(){return{searchQuery:"",searchResult:[],isOpen:!1,isValid:!1,loading:!1,searchSelected:-1,preventHovering:!1,cancelToken:null,uniqueID:null,filterPopoverShow:!1}},computed:{typesForSchemes:function(){return this.$settings.typesForSchemes},selectedTypes:{get:function(){var e=this,t=Object.keys(this.$settings.typesForSchemes).find(function(t){return e.$jskos.compare(e.scheme,{uri:t})});return this.$settings.typesForSchemes[t]},set:function(e){var t=this;if(Array.isArray(e)){var n=Object.keys(this.$settings.typesForSchemes).find(function(e){return t.$jskos.compare(t.scheme,{uri:e})})||this.scheme.uri,i=u.a.cloneDeep(this.$settings.typesForSchemes);u.a.isEqual(e,i[n])||(i[n]=e,this.$store.commit({type:"settings/set",prop:"typesForSchemes",value:i}))}}},provider:function(){return u.a.get(this.scheme,"_provider")}},watch:{searchQuery:function(e){this.searchSelected=-1,null!=this.cancelToken&&(this.cancelToken.cancel("There was a newer search query."),this.cancelToken=null),""==e?(this.loading=!1,this.isOpen=!1):(this.searchResult=["Waiting for you to stop typing..."],this.loading=!0,this.isOpen=!0,this.debouncedGetAnswer()),this.isValid=!1},scheme:function(e,t){this.$jskos.compare(t,e)||(this.searchQuery="",this.searchResult=[],this.isOpen=!1,this.isValid=!1,this.loading=!1,this.searchSelected=-1),null!=e&&this._loadTypes(e)},typesForSchemes:function(){this.loading=!0,this.getAnswer()}},created:function(){this.debouncedGetAnswer=u.a.debounce(this.getAnswer,300),this.uniqueID=this.$util.generateID()},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)},methods:{chooseResult:function(e){this.closeResults(),this.searchSelected=-1,this.$router.push({path:this._getRouterUrl(this.searchResult[e])}),document.activeElement!=document.body&&document.activeElement.blur()},_getRouterUrl:function(e){var t=u.a.last(e),n={uri:t,inScheme:[this.scheme]};return n=this.saveObject(n,{type:"concept",scheme:this.scheme,provider:this.provider}),this.getRouterUrl(n,this.isLeft)},closeResults:function(){this.isOpen=!1},getAnswer:function(){var e=this;this.searchResult=[],this.cancelToken=this.provider.getCancelToken();var t=this.searchQuery;this.provider.suggest(t,{scheme:this.scheme,types:this.selectedTypes,cancelToken:this.cancelToken.token}).then(function(n){t==e.searchQuery&&(e.loading=!1,e.searchResult=u.a.zip(n[1],n[2],n[3]),e.isValid=!0)}).catch(function(n){-1==n.toString().toLowerCase().indexOf("cancel")&&t==e.searchQuery&&(e.loading=!1,e.isValid=!1,e.searchResult=[["Error! Could not reach the API. "+n]])})},handleClickOutside:function(e){this.filterPopoverShow||this.$el.contains(e.target)||(this.isOpen=!1,this.searchSelected=-1),this.$refs.filterPopover&&!this.$refs.filterPopover.contains(e.target)&&(this.filterPopoverShow=!1)},onArrowDown:function(){this.preventHovering=!0,this.searchSelected>=this.searchResult.length-1?this.searchSelected=0:this.searchSelected+=1,this.scrollSelectedIntoView()},onArrowUp:function(){this.preventHovering=!0,this.searchSelected<=0?this.searchSelected=this.searchResult.length-1:this.searchSelected-=1,this.scrollSelectedIntoView()},scrollSelectedIntoView:function(){var e=document.getElementById(this.uniqueID+"-searchResult-"+this.searchSelected),t=e.getBoundingClientRect(),n=e.parentElement.parentElement.getBoundingClientRect();t.bottom>n.bottom&&e.scrollIntoView(!1),t.top<n.top&&e.scrollIntoView()},onEnter:function(){var e;!this.loading&&this.isValid&&0!=this.searchResult.length&&(e=this.searchSelected<0||this.searchSelected>=this.searchResult.length?0:this.searchSelected,this.chooseResult(e))},mouseover:function(e){this.preventHovering||(this.searchSelected=e)},mousemove:function(){this.preventHovering=!1},focusSearch:function(){this.$refs.searchInput.focus(),this.isOpen=""!=this.searchQuery},highlightQueryInResult:function(e){if(!this.searchQuery.length)return e;var t=this.searchQuery,n=new RegExp(t,"ig"),i=n.exec(e),r=0,o="";while(i){var s=i.index;o+=u.a.escape(e.slice(r,s))+"<span class='conceptSearch-searchHighlight fontWeight-heavy'>"+u.a.escape(e.slice(s,s+t.length))+"</span>",r=s+t.length,i=n.exec(e)}return o+=u.a.escape(e.slice(r)),o},setSearchQuery:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.searchQuery=e,this.$nextTick(function(){t.isOpen=n})},_loadTypes:function(e){var t=this;this.loadTypes(e).then(function(e){t.selectedTypes||(t.selectedTypes=e.types.map(function(e){return e.uri}))})},dragStartResult:function(e,t){var n=u.a.last(e),i=this.getObject({uri:n},{scheme:this.scheme,type:"concept"});this.dragStart(i,t)}}},vn=fn,yn=(n("dd63"),n("b298"),Object(y["a"])(vn,hn,gn,!1,null,"fa12bc90",null)),bn=yn.exports;function _n(e){return Sn(e)||$n(e)||wn()}function wn(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function $n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Sn(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var Cn={name:"ConceptSchemeSelection",components:{ItemName:I["a"],ConceptSearch:bn},mixins:[A["a"]],props:{isLeft:{type:Boolean,default:!0}},data:function(){return{id:this.$util.generateID(),popoverShown:!1,schemeFilter:"",languageFilter:null,showAllSchemes:!1}},computed:{scheme:function(){return this.selected.scheme[this.isLeft]},isFiltered:function(){return""!=this.schemeFilter||null!=this.languageFilter||this.filteredSchemes.length<=10},filteredSchemes:function(){var e=this,t=this.schemeFilter.toLowerCase();return this.schemes.filter(function(n){return(Object.values(n.prefLabel||{}).find(function(e){return e.toLowerCase().startsWith(t)})||(n.notation||[]).find(function(e){return e.toLowerCase().startsWith(t)}))&&(null==e.languageFilter||(n.languages||[]).includes(e.languageFilter))})},languageFilterOptions:function(){var e,t=[{value:null,text:this.$t("schemeSelection.allLanguages")}],n=u.a.uniq((e=[]).concat.apply(e,_n(this.schemes.map(function(e){return e.languages||[]}))));return t=t.concat(n.map(function(e){return{value:e,text:e}})),t}},watch:{popoverShown:function(e){var t=this;e&&u.a.delay(function(){t.focusAndSelectInput()},100)}},mounted:function(){document.addEventListener("click",this.handleClickOutside),this.enableShortcuts()},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)},methods:{shortcutHandler:function(e){var t=e.action,n=e.isLeft;if(this.isLeft===n)switch(t){case"openSchemeSelection":this.scheme?this.togglePopover():this.focusAndSelectInput();break;case"openConceptSearch":this.$refs.conceptSearch&&this.$refs.conceptSearch.focusSearch();break}},handleClickOutside:function(e){this.popoverShown&&this.$refs.popover&&!this.$refs.popover.contains(e.target)&&this.hidePopover()},clearScheme:function(){var e=this;this.$router.push({path:this.getRouterUrl(null,this.isLeft)}),u.a.delay(function(){e.focusAndSelectInput()},100)},chooseFirst:function(e){e.preventDefault();var t=u.a.get(this,"$refs.firstScheme[0].item");t&&(this.$router.push({path:this.getRouterUrl(t,this.isLeft)}),this.hidePopover())},setConceptSearchQuery:function(e){this.$refs.conceptSearch&&this.$refs.conceptSearch.setSearchQuery(e)},toggleFavoriteScheme:function(e){this.$jskos.isContainedIn(e,this.favoriteSchemes)?this.$store.dispatch("removeSchemeFromFavorites",e):this.$store.dispatch("addSchemeToFavorites",e),this.focusAndSelectInput()},focusAndSelectInput:function(){var e=this.$refs.input.$el;e&&(e.focus(),e.select())},showPopover:function(){this.$root.$emit("bv::show::popover","".concat(this.id,"-expandButton"))},hidePopover:function(){this.$root.$emit("bv::hide::popover","".concat(this.id,"-expandButton"))},togglePopover:function(){this.popoverShown?this.hidePopover():this.showPopover()}}},kn=Cn,xn=(n("7d6e"),n("0397"),Object(y["a"])(kn,mn,dn,!1,null,"17a52834",null)),Mn=xn.exports;function Ln(e,t){return jn(e)||Tn(e,t)||Dn()}function Dn(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Tn(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),t&&n.length===t)break}catch(l){r=!0,o=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}function jn(e){if(Array.isArray(e))return e}var An=n("ae72");An.listen();var On={name:"App",components:{TheNavbar:F,ConceptTree:Mt,ItemDetail:Yt,MappingEditor:ye,MappingBrowser:lt,ResizingSlider:ln,LoadingIndicatorFull:Ue["a"],Minimizer:$t,ConceptSchemeSelection:Mn},mixins:[M["a"],A["a"]],data:function(){return{loading:!1,itemDetailSettings:{left:{showTopConceptsInScheme:!1},right:{showTopConceptsInScheme:!1}},loadFromParametersOnce:u.a.once(this.loadFromParameters)}},computed:{selectedConceptLeft:function(){return this.selected.concept[!0]},selectedSchemeRight:function(){return this.selected.scheme[!1]},selectedConceptRight:function(){return this.selected.concept[!1]},selectedSchemeLeft:function(){return this.selected.scheme[!0]},locale:function(){return this.$i18n.locale},settingsLocale:function(){var e=this.$settings.locale;return(this.config.languages||[]).includes(e)||(e="en"),e},settingsLoaded:function(){return this.$store.state.settings.loaded},configLoaded:function(){return this.$store.state.configLoaded}},watch:{settingsLoaded:function(){this.$i18n.locale=this.settingsLocale,this.start()},$route:function(e,t){for(var n=e.query,i=t.query,r=["from","fromScheme","to","toScheme"],o=!1,s=r,a=0;a<s.length;a++){var l=s[a],c=i[l],p=n[l],u=c&&this._getObject({uri:c}),m=p&&this._getObject({uri:p});u&&m?this.$jskos.compare(u,m)||(o=!0):c!=p&&(o=!0)}o&&this.loadFromParameters()},selectedConceptLeft:{handler:function(e,t){u.a.isEqual(u.a.get(e,"prefLabel"),u.a.get(t,"prefLabel"))||this.insertPrefLabel(!0)},deep:!0},selectedSchemeRight:function(e,t){var n=this;this.$jskos.compare(e,t)||u.a.delay(function(){n.insertPrefLabel(!0)},50)},selectedConceptRight:{handler:function(e,t){u.a.isEqual(u.a.get(e,"prefLabel"),u.a.get(t,"prefLabel"))||this.insertPrefLabel(!1)},deep:!0},selectedSchemeLeft:function(e,t){var n=this;this.$jskos.compare(e,t)||u.a.delay(function(){n.insertPrefLabel(!1)},50)},locale:function(e,t){var n=this;e!=t&&(this.$store.commit({type:"settings/set",prop:"locale",value:e}),u.a.delay(function(){n.insertPrefLabel(!0,!1),n.insertPrefLabel(!1,!1)},300))},settingsLocale:function(e){e!=this.locale&&(this.$i18n.locale=e)},user:function(e,t){this.user&&this.user.name!=this.userName&&this.$store.commit({type:"settings/set",prop:"creator",value:this.user.name}),void 0!==t&&!t&&e?this.alert(this.$t("alerts.loggedIn"),null,"success"):t&&!e&&this.alert(this.$t("alerts.loggedOut"),null,"danger")},userUris:function(){this.userUris&&this.userUris.length&&(this.userUris.includes(this.creator.uri)||this.$store.commit({type:"settings/set",prop:"creatorUri",value:this.userUris[0]}))},userName:function(){var e=this;this.authorized&&this.user&&this.userName!=this.user.name&&this.setName(this.userName).then(function(t){t||(e.$store.commit({type:"settings/set",prop:"creator",value:e.user.name}),e.alert(e.$t("alerts.nameError"),null,"danger"))})}},created:function(){var e=this;this.schemes.length||(this.loading=!0),this.load(),document.onmousemove=function(t){e.$store.commit({type:"setMousePosition",x:t.pageX,y:t.pageY})};var t=!1;setInterval(function(){pn.a.get("./build-info.json",{headers:{"Cache-Control":"no-cache"}}).then(function(e){return e.data}).then(function(n){n.gitCommit==e.config.buildInfo.gitCommit||t||(e.alert("".concat(e.$t("alerts.newVersionText"),' <a href="" class="alert-link">').concat(e.$t("alerts.newVersionLink"),"</a>"),0,"info"),t=!0)}).catch(function(){return null})},6e4)},methods:{load:function(){var e=this;this.$store.dispatch("loadConfig",u.a.get(this.$route,"query.config")).then(function(){return e.$store.dispatch("settings/load")}).then(function(){e.config.auth&&e.$store.dispatch("auth/init",e.config.auth)})},start:function(){var e=this;this.loadSchemes().then(function(){e.loadFromParametersOnce(!0)})},insertPrefLabel:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.$settings.autoInsertLabels)for(var n=this.$util.prefLabel(this.selected.concept[e],null,!1),i=/^[\s\wäüöÄÜÖß]*\w/.exec(n),r=t?[!0,!1]:[e],o=0;o<r.length;o++){var s=r[o],a=u.a.get(this,"$refs.conceptSchemeSelection".concat(s?"Left":"Right","[0]"));a&&a.setConceptSearchQuery(i?i[0]:"")}},refresh:function(e){"minimize"==e&&(this.itemDetailSettings.left.showTopConceptsInScheme=null!=this.conceptTreeLeft()&&"1"==this.conceptTreeLeft().$el.dataset.minimized,this.itemDetailSettings.right.showTopConceptsInScheme=null!=this.conceptTreeRight()&&"1"==this.conceptTreeRight().$el.dataset.minimized)},conceptTreeLeft:function(){return Array.isArray(this.$refs.conceptTreeLeft)?this.$refs.conceptTreeLeft[0]:this.$refs.conceptTreeLeft},conceptTreeRight:function(){return Array.isArray(this.$refs.conceptTreeRight)?this.$refs.conceptTreeRight[0]:this.$refs.conceptTreeRight},swapSides:function(){var e=this,t=this.$route.query;t=Object.assign(t,{from:t.to,fromScheme:t.toScheme,to:t.from,toScheme:t.fromScheme}),this.$router.push({query:t}),this.loadFromParameters(),u.a.delay(function(){e.insertPrefLabel(!0,!1),e.insertPrefLabel(!1,!1)},300)},loadFromParameters:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var n,i=this.$route.query,r=[];try{n=JSON.parse(i["mapping"])}catch(_){n=null}if(n&&t)for(var o=["from","to"],s=0;s<o.length;s++){var a=o[s];i[a+"Scheme"]||(i[a+"Scheme"]=u.a.get(n[a+"Scheme"],"uri"),this.$jskos.conceptsOfMapping(n,a).length&&(i[a]=u.a.get(this.$jskos.conceptsOfMapping(n,a),"[0].uri")))}for(var l={scheme:{true:i.fromScheme,false:i.toScheme},concept:{true:i.from,false:i.to}},c=[!0,!1],p=0;p<c.length;p++){var m=c[p],d=l.scheme[m],h=null;d&&(h=this._getObject({uri:d}));var g=null;h&&l.concept[m]&&(g=this.saveObject({uri:l.concept[m]},{scheme:h,type:"concept"})),r.push(this.setSelected({concept:g,scheme:h,isLeft:m,noQueryRefresh:!0}))}if(i["mapping"]){var f=new Promise(function(e){var t=null;try{t=JSON.parse(i["mapping"])}catch(_){}u.a.isEqual(t,{})?e(null):e(t)}),v=(i["identifier"]?this.getMappings({identifier:i["identifier"]}):Promise.resolve([])).then(function(t){if(i["identifier"]&&t.length){var n=t.find(function(e){return u.a.get(e,"_provider.has.canSaveMappings")})||t[0];return f.then(e.adjustMapping).then(function(e){return e?[e,n]:[n,n]})}return f.then(e.adjustMapping).then(function(e){return[e]})}),y=["from","to"],b=["memberSet","memberList","memberChoice"];r.push(v.then(function(t){for(var n=Ln(t,2),i=n[0],r=n[1],o=void 0===r?null:r,s=[],a=y,l=function(){for(var t=a[c],n=i["".concat(t,"Scheme")],r=b,o=function(){var o=r[l];if(!Array.isArray(i[t][o]))return"continue";u.a.forEach(i[t][o],function(r,a){s.push(e.loadDetails(r,{scheme:n}).then(function(e){i[t][o][a]=e}))})},l=0;l<r.length;l++)o()},c=0;c<a.length;c++)l();return Promise.all(s).then(function(){e.$store.commit({type:"mapping/set",mapping:i,original:o,noQueryRefresh:!0})})}))}r.length?Promise.all(r).then(function(){e.loading=!1,Object(un["b"])(e.$store)}).catch(function(t){e.loading=!1,console.warn(t),e.alert("There was an error loading data from URL.",null,"danger")}):this.loading=!1}}},Bn=On,Rn=(n("7c55"),Object(y["a"])(Bn,r,o,!1,null,null,null)),En=Rn.exports,In=n("4360"),Nn=n("41cb"),zn=n("eab2");n("f9e3"),n("2dd8");n("56d7"),new i["a"]({el:"#app",store:In["a"],router:Nn["a"],components:{App:En},template:"<App/>",i18n:zn["a"]})},c444:function(e,t,n){"use strict";var i=n("8424"),r=n.n(i);r.a},c93d:function(e,t,n){"use strict";var i=n("d08d"),r=n.n(i);r.a},cd28:function(e,t,n){"use strict";var i=n("0b99"),r=n.n(i);r.a},cf1c:function(e,t,n){},d08d:function(e,t,n){},d4b3:function(e,t,n){"use strict";var i=n("1c47"),r=n.n(i);r.a},dada:function(e,t,n){},dd63:function(e,t,n){"use strict";var i=n("074f"),r=n.n(i);r.a},ddcb:function(e,t,n){"use strict";var i=n("b552"),r=n.n(i);r.a},de0a:function(e,t,n){},e14d:function(e,t,n){"use strict";var i=n("1524"),r=n.n(i);r.a},e46c:function(e,t,n){"use strict";var i=n("de0a"),r=n.n(i);r.a},eb84:function(e,t,n){"use strict";var i=n("43e8"),r=n.n(i);r.a},f1aa:function(e,t,n){"use strict";var i=n("cf1c"),r=n.n(i);r.a},f4aa:function(e,t,n){"use strict";var i=n("1b3d"),r=n.n(i);r.a}});