(function(e){function t(t){for(var s,r,a=t[0],l=t[1],c=t[2],h=0,m=[];h<a.length;h++)r=a[h],n[r]&&m.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);p&&p(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],s=!0,a=1;a<i.length;a++){var l=i[a];0!==n[l]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},n={app:0},o=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var p=l;o.push([0,"chunk-vendors","chunk-common"]),i()})({0:function(e,t,i){e.exports=i("bd14")},"0397":function(e,t,i){"use strict";var s=i("9867"),n=i.n(s);n.a},"05c2":function(e,t,i){},"074f":function(e,t,i){},"0b99":function(e,t,i){},"13ae":function(e,t,i){"use strict";var s=i("86ca"),n=i.n(s);n.a},1524:function(e,t,i){},"17f9":function(e,t,i){},"1b3d":function(e,t,i){},"1c47":function(e,t,i){},"1ea4":function(e,t,i){},"23a6":function(e,t,i){"use strict";var s=i("2454"),n=i.n(s);n.a},2454:function(e,t,i){},"28e9":function(e,t,i){"use strict";var s=i("3195"),n=i.n(s);n.a},"30ae":function(e,t,i){},3195:function(e,t,i){},"34c9":function(e,t,i){"use strict";var s=i("6394"),n=i.n(s);n.a},"38c8":function(e,t,i){"use strict";var s=i("1ea4"),n=i.n(s);n.a},"3ee3":function(e,t,i){"use strict";var s=i("05c2"),n=i.n(s);n.a},"405c":function(e,t,i){},"43e8":function(e,t,i){},4670:function(e,t,i){"use strict";var s=i("b876"),n=i.n(s);n.a},"5c48":function(e,t,i){},6394:function(e,t,i){},"67ca0":function(e,t,i){"use strict";var s=i("17f9"),n=i.n(s);n.a},6820:function(e,t,i){"use strict";var s=i("dada"),n=i.n(s);n.a},7706:function(e,t,i){},"7c55":function(e,t,i){"use strict";var s=i("5c48"),n=i.n(s);n.a},"7d6e":function(e,t,i){"use strict";var s=i("93df"),n=i.n(s);n.a},8424:function(e,t,i){},"86ca":function(e,t,i){},"8c3d":function(e,t,i){},"8d74":function(e,t,i){"use strict";var s=i("30ae"),n=i.n(s);n.a},"8d99":function(e,t,i){},"93df":function(e,t,i){},9867:function(e,t,i){},"9c44":function(e,t,i){"use strict";var s=i("a8a4"),n=i.n(s);n.a},a75d:function(e,t,i){},a8a4:function(e,t,i){},ab2c:function(e,t,i){"use strict";var s=i("7706"),n=i.n(s);n.a},b1fa:function(e,t,i){"use strict";var s=i("405c"),n=i.n(s);n.a},b298:function(e,t,i){"use strict";var s=i("8c3d"),n=i.n(s);n.a},b552:function(e,t,i){},b6d1:function(e,t,i){"use strict";var s=i("a75d"),n=i.n(s);n.a},b876:function(e,t,i){},bc32:function(e,t,i){"use strict";var s=i("8d99"),n=i.n(s);n.a},bd14:function(e,t,i){"use strict";i.r(t);var s=i("a026"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"font-default text-dark color-primary-0-bg fontSize-normal",attrs:{id:"app"}},[i("div",{staticClass:"alertsContainer"},e._l(e.$store.state.alerts.alerts,function(t,s){return i("b-alert",{key:s,attrs:{variant:t.variant,show:t.countdown||!t.shouldCountdown,dismissible:!t.shouldCountdown,fade:""},on:{dismissed:function(i){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:0})},"dismiss-count-down":function(i){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:i})}}},[i("span",{domProps:{innerHTML:e._s(t.text)}})])}),1),e._v(" "),e.configLoaded?i("the-navbar"):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1],expression:"selected.scheme[true] || selected.scheme[false]"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.swapSides"),delay:e.$util.delay.medium},expression:"{ title: $t('general.swapSides'), delay: $util.delay.medium }",modifiers:{hover:!0}}],attrs:{id:"swapSides"},on:{click:e.swapSides}},[i("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),e._v(" "),e.loadingGlobal||e.loading?i("loading-indicator-full"):e._e(),e._v(" "),e.configLoaded&&e.schemes.length?i("div",{staticClass:"main"},[i("div",{staticClass:"flexbox-row"},[e._l([!0,!1],function(t,s){return i("div",{key:"browser-"+s,staticClass:"browser mainComponent",class:{order1:t,order5:!t},attrs:{id:"browserComponent_"+t}},[i("minimizer",{attrs:{"is-column":!0}}),e._v(" "),i("concept-scheme-selection",{ref:t?"conceptSchemeSelectionLeft":"conceptSchemeSelectionRight",refInFor:!0,staticClass:"mainComponent visualComponent",style:null!=e.selected.scheme[t]?"":"flex: 1;",attrs:{"is-left":t}}),e._v(" "),null!=e.selected.scheme[t]?i("div",{staticClass:"conceptBrowser"},[i("item-detail",{staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemDetail",attrs:{id:"itemDetailComponent_"+t,item:e.selected.concept[t]||e.selected.scheme[t],"is-left":t,settings:e.itemDetailSettings[t?"left":"right"]}}),e._v(" "),i("resizing-slider"),e._v(" "),i("concept-tree",{ref:t?"conceptTreeLeft":"conceptTreeRight",refInFor:!0,staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemTree",attrs:{id:"conceptTreeComponent_"+t,"is-left":t}})],1):e._e()],1)}),e._v(" "),i("resizing-slider",{staticClass:"order2",attrs:{"is-column":!0}}),e._v(" "),i("div",{staticClass:"mappingTool order3",attrs:{id:"mappingTool"}},[i("div",{staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingEditorComponent"}},[e.selected.scheme[!0]||e.selected.scheme[!1]?i("mapping-editor"):e._e(),e._v(" "),i("minimizer",{ref:"minimizer",attrs:{text:e.$t("mappingEditor.title")}})],1),e._v(" "),i("resizing-slider",{attrs:{"cocoda-red":!0}}),e._v(" "),i("div",{staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingBrowserComponent"}},[e.selected.scheme[!0]||e.selected.scheme[!1]?i("mapping-browser"):i("div",{staticClass:"placeholderComponentCenter"},[i("div",{staticClass:"fontWeight-heavy fontSize-large"},[i("p",[e._v(e._s(e.$t("general.welcome")))]),e._v(" "),i("p",[i("a",{attrs:{href:"https://gbv.github.io/cocoda/#manual",target:"_blank"}},[e._v(e._s(e.$t("general.manual")))]),e._v(" -\n                "),i("a",{attrs:{href:"https://gbv.github.io/cocoda/",target:"_blank"}},[e._v(e._s(e.$t("general.documentation")))]),e._v(" -\n                "),i("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[e._v(e._s(e.$t("general.github")))])]),e._v(" "),e.config.feedbackUrl?i("p",[i("br"),e._v(" "),i("a",{attrs:{href:e.config.feedbackUrl,target:"_blank"}},[e._v(e._s(e.$t("general.feedback")))]),e._v(" "),i("br"),e._v("\n                "+e._s(e.$t("general.feedback2"))+"\n              ")]):e._e()])]),e._v(" "),i("minimizer",{attrs:{text:e.$t("mappingBrowser.title")}})],1)],1),e._v(" "),i("resizing-slider",{staticClass:"order4",attrs:{"is-column":!0}})],2)]):e._e()],1)},o=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-navbar",{attrs:{toggleable:"md",type:"dark"}},[e._l(e.config.logos||[],function(e,t){return i("b-navbar-brand",{key:t,attrs:{href:e.url,target:"_blank"}},[i("img",{staticStyle:{height:"42px"},attrs:{src:"./"+e.file,alt:e.alt||"logo"}})])}),e._v(" "),i("b-navbar-brand",{attrs:{href:"https://coli-conc.gbv.de/cocoda/",target:"_blank"}},[e._v("\n    "+e._s(e.config.title)+"\n  ")]),e._v(" "),i("b-navbar-nav",{staticClass:"ml-auto"},[e._l(e.config.menu,function(t){return i("b-nav-item",{key:t.url,attrs:{href:t.url,target:"_blank"}},[e._v("\n      "+e._s(e.$util.prefLabel(t))+"\n    ")])}),e._v(" "),i("b-nav-item-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.right",value:e.favoriteCanBeDropped?"drop here to favorite":"",expression:"favoriteCanBeDropped ? 'drop here to favorite' : ''",modifiers:{right:!0}}],ref:"favoriteConceptsDropdown",attrs:{id:"favoriteConceptsDropdown","extra-menu-classes":"favoriteConceptsDropdown","no-caret":"",right:""},on:{hide:e.favoriteConceptsDropdownHide},nativeOn:{mouseover:function(t){return e.favoriteConceptsDropdownMouseover(t)},mouseout:function(t){return e.favoriteConceptsDropdownMouseout(t)}}},[i("template",{slot:"button-content"},[i("font-awesome-icon",{class:e.favoriteCanBeDropped?"favoriteConceptsDropdown-iconTarget":"",attrs:{icon:"star"},on:{dragover:e.dragOver,drop:e.drop}})],1),e._v(" "),i("b-dropdown-header",[e._v("Favorite Concepts")]),e._v(" "),e._l(e.favoriteConcepts,function(t){return i("b-dropdown-item",{key:"theNavbar-"+t.uri+"-favorite",attrs:{draggable:""},on:{dragstart:function(i){return e.favoriteConceptDragStart(t)},dragend:e.favoriteConceptDragEnd}},[i("item-name",{attrs:{item:t}}),e._v(" "),i("div",{staticClass:"button favoriteConceptsDropdown-removeButton",on:{click:function(i){return e.removeFavoriteConcept(t)}}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)})],2),e._v(" "),i("b-nav-item",{staticClass:"navbar-identitySettings",attrs:{href:e.userIdentityImage&&e.creator&&e.creator.uri,target:"_blank"}},[e.userIdentityImage&&e.creator.uri?i("span",[i("img",{attrs:{src:e.userIdentityImage}})]):i("span",{style:"color: "+(e.$store.state.auth.available?e.authorized?"green":e.$store.state.auth.connected?"red":"yellow":"black")+" !important;"},[i("font-awesome-icon",{attrs:{icon:"user"}})],1)]),e._v(" "),i("b-nav-item",{on:{click:function(t){return e.$refs.settings.show()}}},[e._v("\n      "+e._s(e.creatorName||e.$t("navbar.settings"))+"\n    ")]),e._v(" "),e.$store.getters.getCurrentRegistry?i("b-nav-item",[i("registry-notation",{staticStyle:{opacity:"0.7",cursor:"default"},attrs:{registry:e.$store.getters.getCurrentRegistry}})],1):e._e(),e._v(" "),i("the-settings",{ref:"settings"})],2)],2)},a=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"settingsModal",attrs:{id:"settingsModal",title:e.$t("settings.title"),"hide-footer":"",centered:"",size:"lg"}},[i("b-card",{attrs:{"no-body":"","footer-tag":"footer"}},[i("b-tabs",{attrs:{pills:"",card:"",vertical:""}},[i("b-tab",{attrs:{title:e.$t("settings.tabAccount"),active:""}},[e.localSettings?i("div",[i("h4",[e._v(e._s(e.$t("settings.creatorTitle")))]),e._v(" "),i("p",[e._v("\n            "+e._s(e.$t("settings.creatorInfo"))+"\n          ")]),e._v(" "),i("p",[i("b",[e._v(e._s(e.$t("settings.creator")))]),e._v(" "),e.user&&e.localSettings.creatorUri!=e.user.uri?i("span",[i("div",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"flex-grow-1"},[i("b-form-input",{attrs:{value:e.creatorName,type:"text",disabled:""}})],1),e._v(" "),e.userIdentityProvider?i("div",{staticClass:"ml-2"},[e.userIdentityImage?i("img",{attrs:{src:e.userIdentityImage,height:"24px"}}):e._e(),e._v("\n                  "+e._s(e.userIdentityProvider.name)+"\n                ")]):e._e()])]):i("span",[i("b-form-input",{attrs:{placeholder:e.$t("settings.creatorPlaceholder"),type:"text"},model:{value:e.localSettings.creator,callback:function(t){e.$set(e.localSettings,"creator",t)},expression:"localSettings.creator"}})],1)]),e._v(" "),i("p",[i("b",[e._v(e._s(e.$t("settings.creatorUri")))]),e._v(" "),e.user&&e.userUris&&e.userUris.length?i("span",[i("b-form-select",{model:{value:e.localSettings.creatorUri,callback:function(t){e.$set(e.localSettings,"creatorUri",t)},expression:"localSettings.creatorUri"}},e._l(e.userUris,function(t){return i("option",{key:"settings-uris-"+t,domProps:{value:t}},[e._v("\n                  "+e._s(t)+"\n                ")])}),0)],1):i("span",[i("b-form-input",{attrs:{placeholder:"https://",type:"text"},model:{value:e.localSettings.creatorUri,callback:function(t){e.$set(e.localSettings,"creatorUri",t)},expression:"localSettings.creatorUri"}})],1)]),e._v(" "),e.user&&e.authorized?i("p",[i("span",{staticClass:"text-success"},[e._v("\n              "+e._s(e.$t("settings.loggedIn"))+"\n            ")]),e._v(" "),i("a",{attrs:{href:e.$store.state.auth.about.baseUrl+"/account",target:"_blank"}},[e._v("\n              "+e._s(e.$t("settings.accountPage"))+"\n            ")]),e._v(" •\n            "),i("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.login(null)}}},[e._v("\n              Logout\n            ")])]):e._e(),e._v(" "),e.$store.state.auth.available&&!e.user&&e.providers.length?i("p",e._l(e.providers,function(t){return i("b-button",{key:"login-provider-"+t.id,attrs:{block:"",variant:"light"},on:{click:function(i){return e.login(t)}}},[t.image?i("img",{staticStyle:{"margin-right":"5px"},attrs:{src:t.image,height:"20px"}}):e._e(),e._v("\n              Login via "+e._s(t.name)+"\n            ")])}),1):e._e(),e._v(" "),e.$store.state.auth.connected?i("div",[i("p",[i("span",{domProps:{innerHTML:e._s(e.$t("settings.accountInfo",{url:e.config.auth}))}}),e._v(" "),e.$store.state.auth.about.urls.imprint?i("a",{attrs:{href:e.$store.state.auth.about.urls.imprint,target:"_blank"}},[e._v("\n                "+e._s(e.$t("settings.impressum"))+"\n              ")]):e._e(),e._v(" •\n              "),e.$store.state.auth.about.urls.privacy?i("a",{attrs:{href:e.$store.state.auth.about.urls.privacy,target:"_blank"}},[e._v("\n                "+e._s(e.$t("settings.privacyPolicy"))+"\n              ")]):e._e()])]):e._e(),e._v(" "),e.availableMappingRegistries.length?i("div",[i("h4",[e._v(e._s(e.$t("settings.mappingRegistry")))]),e._v(" "),i("p",[e._v("\n              "+e._s(e.$t("settings.mappingRegistryExplanation"))+"\n              "),i("b-form-select",{staticStyle:{"margin-bottom":"10px"},model:{value:e.localSettings.mappingRegistry,callback:function(t){e.$set(e.localSettings,"mappingRegistry",t)},expression:"localSettings.mappingRegistry"}},e._l(e.availableMappingRegistries,function(t){return i("option",{key:"settings-registry-"+t.uri,domProps:{value:t.uri}},[e._v("\n                  "+e._s(e.$util.prefLabel(t))+"\n                ")])}),0),e._v(" "),i("registry-info",{attrs:{registry:e.$store.getters.getCurrentRegistry}})],1)]):e._e()]):e._e()]),e._v(" "),i("b-tab",{attrs:{title:e.$t("settings.tabLayout")}},[e.localSettings?i("p",[i("b",[e._v(e._s(e.$t("settings.language")))]),e._v(" "),i("b-form-select",{model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}},e._l(e.config.languages,function(t){return i("option",{key:t,domProps:{value:t}},[e._v("\n              "+e._s(e.$t("languages."+t))+"\n            ")])}),0),e._v(" "),i("br"),i("br"),i("span",{domProps:{innerHTML:e._s(e.$t("settings.languageContribution"))}})],1):e._e(),e._v(" "),e.localSettings?i("p",[i("b-form-checkbox",{model:{value:e.localSettings.conceptDetailShowAllAncestors,callback:function(t){e.$set(e.localSettings,"conceptDetailShowAllAncestors",t)},expression:"localSettings.conceptDetailShowAllAncestors"}},[e._v("\n            "+e._s(e.$t("settings.showAllAncestors"))+"\n          ")])],1):e._e(),e._v(" "),e.localSettings?i("p",[i("b-form-checkbox",{model:{value:e.localSettings.conceptDetailDoNotTruncateNotes,callback:function(t){e.$set(e.localSettings,"conceptDetailDoNotTruncateNotes",t)},expression:"localSettings.conceptDetailDoNotTruncateNotes"}},[e._v("\n            "+e._s(e.$t("settings.truncateNotes"))+"\n          ")])],1):e._e(),e._v(" "),e.localSettings?i("p",[i("b-form-checkbox",{model:{value:e.localSettings.autoInsertLabels,callback:function(t){e.$set(e.localSettings,"autoInsertLabels",t)},expression:"localSettings.autoInsertLabels"}},[e._v("\n            "+e._s(e.$t("settings.autoInsertLabels"))+"\n          ")])],1):e._e(),e._v(" "),e.localSettings?i("p",[i("b-form-checkbox",{model:{value:e.localSettings.conceptTreeAddToMappingSelectsConcept,callback:function(t){e.$set(e.localSettings,"conceptTreeAddToMappingSelectsConcept",t)},expression:"localSettings.conceptTreeAddToMappingSelectsConcept"}},[e._v("\n            "+e._s(e.$t("settings.conceptTreeAddToMappingSelectsConcept"))+"\n          ")])],1):e._e(),e._v(" "),i("p",[i("b-button",{attrs:{variant:"primary"},on:{click:e.resetFlex}},[e._v("\n            "+e._s(e.$t("settings.resetSizes"))+"\n          ")])],1),e._v(" "),i("br")]),e._v(" "),e.config.shortcuts&&e.config.shortcuts.length?i("b-tab",{attrs:{title:e.$t("settings.tabShortcuts")}},[i("h4",[e._v(" "+e._s(e.$t("settings.tabShortcuts")))]),e._v(" "),e._l(e.config.shortcuts,function(t){return i("p",{key:"settingsModal-shortcuts-"+t.id},[i("b",[e._v(e._s(e.$util.prefLabel(t)||t.action))]),i("br"),e._v(" "),i("span",{domProps:{innerHTML:e._s(t.keys.split(",").map(function(t){return t.split("+").map(function(t){return"<kbd>"+e.replaceKey(t)+"</kbd>"}).join(" + ")}).join(" "+e.$t("general.or")+" "))}})])})],2):e._e(),e._v(" "),i("b-tab",{attrs:{title:e.$t("settings.tabSources")}},e._l(e.config.registries,function(e,t){return i("registry-info",{key:"settingsModal-registries-"+t,staticClass:"settings-sources",attrs:{registry:e}})}),1),e._v(" "),e.localMappingsSupported?i("b-tab",{attrs:{title:e.$t("settings.tabLocalMappings")}},[i("div",[i("h4",[e._v(e._s(e.$t("settings.tabLocalMappings")))]),e._v(" "),i("p",[e._v(e._s(e.$t("settings.localMappingsInfo")))])]),e._v(" "),e.localMappingsSupported&&e.dlAllMappings&&e.dlMappingsReady?i("div",[i("h4",[e._v(e._s(e.$t("settings.localDownload")))]),e._v(" "),e._l(e.dlMappings,function(t,s){return i("span",{key:s},[e._v("\n            "+e._s(t.label)+" ("+e._s(t.mappings.length)+"):\n            "),i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),e.downloadFile(t.filename+".ndjson",t.ndjson)}}},[e._v("\n              JSKOS\n            ")]),e._v(" "),i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),e.downloadFile(t.filename+".csv",t.csv)}}},[e._v("\n              CSV\n            ")]),e._v(" "),i("br")])}),e._v(" "),i("br"),e._v(" "),i("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.downloadFile("mappings.ndjson",e.dlAllMappings)}}},[e._v("\n            "+e._s(e.$t("settings.localDownloadJskos",[e.dlAllMappings.split("\n").length]))+"\n          ")])],2):e._e(),e._v(" "),i("br"),e._v(" "),e.localMappingsSupported?i("div",[i("h4",[e._v(e._s(e.$t("settings.localUpload")))]),e._v(" "),i("b-form-file",{ref:"fileUpload",attrs:{state:Boolean(e.uploadedFile),placeholder:e.$t("settings.localUploadPlaceholder"),accept:".ndjson"},model:{value:e.uploadedFile,callback:function(t){e.uploadedFile=t},expression:"uploadedFile"}}),e._v(" "),i("p",[e._v("\n            "+e._s(e.uploadedFileStatus)+"\n          ")])],1):e._e(),e._v(" "),e.localMappingsSupported&&e.dlAllMappings?i("div",[i("h4",[e._v(e._s(e.$t("settings.localDeleteTitle")))]),e._v(" "),i("b-button",{attrs:{disabled:!e.dlAllMappings,variant:"danger","hide-footer":""},on:{click:function(t){e.deleteMappingsButtons=!0}}},[e._v("\n            "+e._s(e.$t("settings.localDeleteText"))+"\n          ")]),e._v(" "),e.deleteMappingsButtons?i("p",[e._v("\n            "+e._s(e.$t("settings.localDeleteSure"))+"\n            "),i("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:e.deleteMappings}},[e._v("\n              "+e._s(e.$t("general.yes"))+"\n            ")]),e._v(" "),i("b-button",{attrs:{variant:"success",size:"sm"},on:{click:function(t){e.deleteMappingsButtons=!1}}},[e._v("\n              "+e._s(e.$t("general.no"))+"\n            ")])],1):e._e()],1):e._e(),e._v(" "),i("br"),i("br"),e._v(" "),e.localMappingsSupported&&e.dlAllMappings?i("div",[i("h4",[e._v(e._s(e.$t("settings.creatorRewriteTitle")))]),e._v(" "),i("p",{domProps:{innerHTML:e._s(e.$t("settings.creatorRewriteText"))}}),e._v(" "),i("p",{staticClass:"fontSize-small"},[i("b",[e._v("Name:")]),e._v(" "+e._s(e.$util.prefLabel(e.creator))),i("br"),e._v(" "),i("b",[e._v("URI:")]),e._v(" "+e._s(e.creator.uri)+"\n          ")]),e._v(" "),i("p",[i("b-button",{attrs:{variant:e.creatorRewritten?"success":"warning"},on:{click:e.rewriteCreator}},[e._v("\n              "+e._s(e.$t("settings.creatorRewriteButton"))+"\n            ")])],1)]):e._e()]):e._e()],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[i("font-awesome-icon",{attrs:{icon:["fab","github"]}}),e._v("\n        GitHub\n      ")],1),e._v(" "),e.config.buildInfo.version&&""!=e.config.buildInfo.version?i("span",[e._v("\n        •\n        "+e._s(e.$t("settings.version"))+" "+e._s(e.config.buildInfo.version)+"\n      ")]):e._e(),e._v(" "),e.config.buildInfo.gitCommit&&e.config.buildInfo.gitCommitShort?i("span",[e._v("\n        •\n        "+e._s(e.$t("settings.currentCommit"))+":\n        "),i("a",{attrs:{href:"https://github.com/gbv/cocoda/commit/"+e.config.buildInfo.gitCommit,target:"_blank"}},[e._v("\n          "+e._s(e.config.buildInfo.gitCommitShort)+"\n        ")])]):e._e(),e._v(" "),e.config.buildInfo.buildDate?i("span",[e._v("\n        •\n        "+e._s(e.$t("settings.buildDate"))+": "+e._s(e.$util.dateToString(e.config.buildInfo.buildDate))+"\n      ")]):e._e(),e._v(" "),e.config.impressum?i("span",[e._v("\n        •\n        "),i("a",{attrs:{href:e.config.impressum,target:"_blank"}},[e._v("\n          "+e._s(e.$t("settings.impressum"))+"\n        ")])]):e._e(),e._v(" "),i("br"),e._v(" "),i("span",[e._v("\n        "+e._s(e.$t("settings.suggestions1"))+"\n        "),i("a",{attrs:{href:"https://github.com/gbv/cocoda/issues",target:"_blank"}},[e._v(e._s(e.$t("settings.suggestions2")))]),e._v(e._s(e.$t("settings.suggestions3"))+"\n      ")])])],1)],1)},c=[],p=i("2ef0"),h=i.n(p),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"registry-info"},[i("div",[i("registry-notation",{attrs:{registry:e.registry}}),e._v(" "),i("div",{staticClass:"settings-info-title fontWeight-heavy",staticStyle:{display:"inline-block"}},[e._v("\n      "+e._s(e.$util.prefLabel(e.registry))+"\n    ")])],1),e._v(" "),i("div",{staticClass:"settings-info-definition"},[e._v("\n    "+e._s(e.$util.definition(e.registry).join(" "))+"\n  ")]),e._v(" "),i("div",{staticClass:"settings-info-uri fontSize-small"},[i("auto-link",{attrs:{link:e.registry.uri}})],1),e._v(" "),i("div",{staticClass:"settings-info-capabilities"},[e._l(["schemes","concepts","mappings","occurrences"],function(t){return i("span",{key:"settings-info-capabilities-"+t},[e.registry.provider.has[t]?i("span",[e.registry.provider.has[t]?i("font-awesome-icon",{staticStyle:{color:"green","margin-left":"5px"},attrs:{icon:"check"}}):e._e(),e._v("\n        "+e._s(e.$t("registryInfo."+t))+"\n      ")],1):e._e()])}),e._v(" "),e.registry.provider.has.auth?i("span",{staticStyle:{"margin-left":"5px"}},[e.authorized?i("span",{staticStyle:{color:"green"}},[i("font-awesome-icon",{attrs:{icon:"lock-open"}}),e._v("\n        "+e._s(e.$t("registryInfo.authenticated"))+"\n      ")],1):i("span",{staticStyle:{color:"red"}},[i("font-awesome-icon",{attrs:{icon:"lock"}}),e._v("\n        "+e._s(e.$t("registryInfo.notAuthenticated"))+"\n      ")],1)]):e._e()],2)])},d=[],u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isValidURL(e.link)?i("a",{staticClass:"u-textBreak",attrs:{href:e.link,target:"_blank"}},[e._v(e._s(e.text||e.link))]):i("span",[e._v(e._s(e.text||e.link))])},g=[],f={name:"AutoLink",props:{link:{type:String,default:""},text:{type:String,default:null}},methods:{isValidURL:function(e){return e&&!!e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/g)}}},v=f,y=i("2877"),b=Object(y["a"])(v,u,g,!1,null,null,null),_=b.exports,$=function(){var e,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.left",value:t.tooltip?t.$util.prefLabel(t.registry):"",expression:"tooltip ? $util.prefLabel(registry) : ''",modifiers:{html:!0,left:!0}}],staticClass:"registry-notation",class:(e={},e[t.isCurrentRegistry?"registry-current-enabled":"registry-enabled"]=!t.disabled,e["registry-notation-current"]=t.isCurrentRegistry,e),style:"width: "+(18+12*(t.$util.notation(t.registry).length-1))+"px;"},[t._v("\n  "+t._s(t.$util.notation(t.registry))+"\n")])},w=[],S={name:"RegistryNotation",props:{registry:{type:Object,default:null},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!0}},computed:{isCurrentRegistry(){return this.$jskos.compare(this.registry,this.$store.getters.getCurrentRegistry)}}},C=S,k=(i("3ee3"),Object(y["a"])(C,$,w,!1,null,null,null)),x=k.exports,M=i("a189"),L={name:"RegistryInfo",components:{AutoLink:_,RegistryNotation:x},mixins:[M["a"]],props:{registry:{type:Object,default:null}}},D=L,T=(i("eb84"),Object(y["a"])(D,m,d,!1,null,"7de7c5a2",null)),j=T.exports,A=i("a085"),B={name:"TheSettings",components:{RegistryInfo:j},mixins:[M["a"],A["a"]],data(){return{localSettings:null,creatorRewritten:!1,dlMappingsReady:!1,dlAllMappings:null,dlMappings:[],uploadedFile:null,uploadedFileStatus:"",deleteMappingsButtons:!1}},computed:{localMappingsSupported(){let e=this.config.registries.find(e=>"http://coli-conc.gbv.de/registry/local-mappings"==e.uri);return null!=e},availableMappingRegistries(){return this.config.registries.filter(e=>e.provider.has.canSaveMappings)}},watch:{localSettings:{handler(){this.$store.commit({type:"settings/save",settings:this.localSettings}),this.creatorRewritten=!1},deep:!0},uploadedFile(){if(this.uploadedFile&&this.localMappingsSupported){let e=new FileReader;e.onloadend=(e=>{let t,i,s=e.target.result;t=s.split("\n"),i={imported:0,skipped:0,error:0,empty:0};let n=[];for(let r of t)if(""!==r)try{let e=JSON.parse(r);n.push({mapping:e})}catch(o){i.error+=1}else i.empty+=1;this.$store.dispatch({type:"mapping/saveMappings",mappings:n,registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(e=>{i.imported=e.length,i.skipped=t.length-i.imported-i.error-i.empty,this.uploadedFileStatus="".concat(i.imported," mappings imported, ").concat(i.skipped," skipped, ").concat(i.error," errored"),this.$refs.fileUpload.reset(),this.refreshDownloads(),this.$store.commit("mapping/setRefresh",{registry:"http://coli-conc.gbv.de/registry/local-mappings"})})}),e.readAsText(this.uploadedFile)}}},methods:{show(){this.$refs.settingsModal.show(),this.localSettings=h.a.cloneDeep(this.$settings),this.refreshDownloads()},refreshDownloads(){if(!this.localMappingsSupported)return;this.dlMappingsReady=!1,this.dlAllMappings=null,this.dlMappings=[];let e=[];this.getMappings({registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(t=>{e=t;let i=[];for(let s of e)for(let e of["from","to"])for(let t of this.$jskos.conceptsOfMapping(s,e)){let n=s[e+"Scheme"];t.inScheme&&t.inScheme.length||(t.inScheme=[n]),i.push(this.loadDetails(t,{scheme:n}))}return Promise.all(i)}).then(()=>{let t=e=>{let t=this.$jskos.minifyMapping(e);for(let i of this.$jskos.conceptsOfMapping(t)){let e=this._getObject(i),t=this.$util.getLanguage(h.a.get(e,"prefLabel"));t&&(i.prefLabel=h.a.pick(e.prefLabel,[t]))}return JSON.stringify(t)};this.dlAllMappings=e.map(t).join("\n");for(let i of e){i.fromScheme=this._getObject(i.fromScheme)||i.fromScheme,i.toScheme=this._getObject(i.toScheme)||i.toScheme;let e=this.dlMappings.find(e=>this.$jskos.compare(i.fromScheme,e.fromScheme)&&this.$jskos.compare(i.toScheme,e.toScheme));e?e.mappings.push(i):(e={fromScheme:i.fromScheme,toScheme:i.toScheme,mappings:[i]},this.dlMappings.push(e))}for(let e of this.dlMappings){e.ndjson=e.mappings.map(t).join("\n");let i='"fromNotation","fromLabel","toNotation","toLabel","type"\r\n',s=this.$jskos.mappingToCSV({lineTerminator:"\r\n",language:"de"});e.mappings=e.mappings.map(e=>this.$jskos.minifyMapping(e));for(let t of e.mappings){for(let e of this.$jskos.conceptsOfMapping(t)){let t=this._getObject(e),i=this.$util.getLanguage(h.a.get(t,"prefLabel"));i&&(e.prefLabel={de:h.a.get(t.prefLabel,i)})}i+=s(t)}e.csv=i,e.label=(this.$util.notation(h.a.get(e,"fromScheme"),"scheme")||"?")+" to "+(this.$util.notation(h.a.get(e,"toScheme"),"scheme")||"?"),e.filename="".concat(this.$util.notation(h.a.get(e,"fromScheme"),"scheme")||"?","_to_").concat(this.$util.notation(h.a.get(e,"toScheme"),"scheme")||"?","_").concat(this.localSettings.creator)}this.dlMappingsReady=!0})},rewriteCreator(){this.localMappingsSupported&&this.$store.dispatch({type:"mapping/getMappings",registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(e=>{for(let t of e)h.a.set(t,"creator",[this.creator]);return this.$store.dispatch({type:"mapping/saveMappings",mappings:e.map(e=>({mapping:e,original:e})),registry:"http://coli-conc.gbv.de/registry/local-mappings"})}).then(()=>{this.creatorRewritten=!0,this.$store.commit("mapping/setRefresh",{registry:"http://coli-conc.gbv.de/registry/local-mappings"}),this.refreshDownloads()})},resetFlex(){let e=h.a.cloneDeep(this.localSettings.flex);h.a.forOwn(e,(t,i)=>{e[i]=""}),this.$store.commit({type:"settings/set",prop:"flex",value:e})},deleteMappings(){this.localMappingsSupported&&this.$store.dispatch({type:"mapping/getMappings",registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(e=>{return this.$store.dispatch({type:"mapping/removeMappings",mappings:e,registry:"http://coli-conc.gbv.de/registry/local-mappings"}).then(t=>{let i=t.filter(e=>e).length;e.length!=i&&console.warn("Error when removing mappings, tried to remove ".concat(e.length,", but only removed ").concat(i,".")),this.$store.commit("mapping/setRefresh",{registry:"http://coli-conc.gbv.de/registry/local-mappings"}),this.refreshDownloads(),this.deleteMappingsButtons=!1})})},login(e){let t,i;e?(t=e.loginURL,i="login"):(t=this.config.auth+"logout",i="logout"),this.$store.commit({type:"auth/openWindow",url:t,eventType:i})},replaceKey(e){let t={shift:"Shift",alt:"Alt",option:"Alt",ctrl:"Ctrl",meta:"Cmd",command:"Cmd"};return t[e]||e}}},R=B,O=(i("cd28"),i("38c8"),Object(y["a"])(R,l,c,!1,null,"7e5e0efc",null)),E=O.exports,I=i("68bc"),N={name:"TheNavbar",components:{TheSettings:E,ItemName:I["a"],RegistryNotation:x},mixins:[M["a"],A["a"]],computed:{favoriteCanBeDropped(){return null!=this.draggedConcept&&!this.$jskos.isScheme(this.draggedConcept)&&!this.$jskos.isContainedIn(this.draggedConcept,this.favoriteConcepts)}},watch:{draggedConcept(e){e?h.a.delay(()=>{this.$root.$emit("bv::show::tooltip","favoriteConceptsDropdown")},100):this.$root.$emit("bv::hide::tooltip","favoriteConceptsDropdown")}},methods:{favoriteConceptDragStart(e){event.dataTransfer.setData("text",e.uri),this.draggedConcept=e},favoriteConceptDragEnd(e){"none"!=e.dataTransfer.dropEffect&&this.$refs.favoriteConceptsDropdown.hide(),this.draggedConcept=null},favoriteConceptsDropdownMouseover(){this.$refs.favoriteConceptsDropdown.show()},favoriteConceptsDropdownMouseout(){this.$refs.favoriteConceptsDropdown.hide()},favoriteConceptsDropdownHide(){this.$refs.favoriteConceptsDropdown.$el.getElementsByClassName("favoriteConceptsDropdown")[0].scrollTop=0},droppedConcept(e){this.$store.dispatch("addConceptToFavorites",e)},removeFavoriteConcept(e){this.$store.dispatch("removeConceptFromFavorites",e)}}},z=N,P=(i("28e9"),i("b1fa"),Object(y["a"])(z,r,a,!1,null,"2e2202ff",null)),F=P.exports,H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.canSaveMapping?"mappingEditor-notSaved":e.canExportMapping&&!e.hasChangedFromOriginal?"mappingEditor-saved":"mappingEditor-cantSave",attrs:{id:"mappingEditor"}},[i("div",{attrs:{id:"mappingEditor-settingsButton"}},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.settingsButton"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.settingsButton'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{id:"mappingEditor-settingsButton-icon",icon:"cog"}}),e._v(" "),i("b-popover",{attrs:{show:e.settingsShow,target:"mappingEditor-settingsButton-icon",triggers:"click",placement:"bottomleft"},on:{"update:show":function(t){e.settingsShow=t}}},[i("div",{ref:"settingsPopover"},[i("p",[i("b",[e._v(e._s(e.$t("navbar.settings")))])]),e._v(" "),i("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.settingClearOnSaveTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.settingClearOnSaveTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.clearOnSave,callback:function(t){e.clearOnSave=t},expression:"clearOnSave"}},[e._v("\n          "+e._s(e.$t("mappingEditor.settingClearOnSave"))+"\n        ")]),e._v(" "),i("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.settingOnly1to1mappingsTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.settingOnly1to1mappingsTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.only1to1mappings,callback:function(t){e.only1to1mappings=t},expression:"only1to1mappings"}},[e._v("\n          "+e._s(e.$t("mappingEditor.settingOnly1to1mappings"))+"\n        ")])],1)])],1),e._v(" "),i("div",{staticClass:"mappingEditorToolbar"},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSwapMapping?e.$t("mappingEditor.swapMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canSwapMapping ? $t('mappingEditor.swapMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSwapMapping,"button-disabled":!e.canSwapMapping},on:{click:e.swapMapping}},[i("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),e._v(" "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSaveMapping?e.$t("mappingEditor.saveMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canSaveMapping ? $t('mappingEditor.saveMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSaveMapping,"button-disabled":!e.canSaveMapping},on:{click:e.saveMapping}},[i("font-awesome-icon",{attrs:{icon:"save"}})],1),e._v(" "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canDeleteMapping?e.$t("mappingEditor.deleteMapping"):!e.$store.getters.getCurrentRegistry.provider.has.auth||e.$store.getters.getCurrentRegistry.provider.auth?"":e.$t("general.authNecessary"),delay:e.$util.delay.medium},expression:"{ title: canDeleteMapping ? $t('mappingEditor.deleteMapping') : ((!$store.getters.getCurrentRegistry.provider.has.auth || $store.getters.getCurrentRegistry.provider.auth) ? '' : $t('general.authNecessary')), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{"button-delete":e.canDeleteMapping,"button-disabled":!e.canDeleteMapping},on:{click:e.deleteMapping}},[i("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1),e._v(" "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canClearMapping?e.$t("mappingEditor.clearMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canClearMapping ? $t('mappingEditor.clearMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canClearMapping,"button-disabled":!e.canClearMapping},on:{click:e.clearMapping}},[i("font-awesome-icon",{attrs:{icon:"ban"}})],1)]),e._v(" "),e._l([!0,!1],function(t,s){return i("div",{key:s,staticClass:"mappingEditorPart",class:{"mappingEditorPart-noConcepts":null==e.$store.getters["mapping/getScheme"](t)||!e.$store.getters["mapping/getConcepts"](t).length,"mappingEditorPart-dropTarget":null!=e.draggedConcept},style:{order:2*s},on:{dragover:e.dragOver,drop:function(i){return e.drop(i,t)}}},[null!=e.$store.getters["mapping/getScheme"](t)&&e.$store.getters["mapping/getConcepts"](t).length?i("div",[i("div",{staticClass:"mappingScheme fontWeight-heavy"},[i("item-name",{attrs:{item:e.$store.getters["mapping/getScheme"](t),"is-link":!0,"is-left":t,"show-text":!1,"show-tooltip":!0}})],1),e._v(" "),i("div",{staticClass:"mappingConceptList"},[i("ul",e._l(e.$store.getters["mapping/getConcepts"](t),function(s,n){return i("li",{key:n},[i("item-name",{attrs:{item:s,"is-link":!0,"is-left":t,"is-highlighted":e.$jskos.compare(s,e.selected.concept[!0])||e.$jskos.compare(s,e.selected.concept[!1]),"font-size":"large"}}),e._v(" "),i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.removeConceptFromMapping"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingEditor.removeConceptFromMapping'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button fontSize-large",on:{click:function(i){return e.$store.commit({type:"mapping/remove",concept:s,isLeft:t})}}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)}),0)])]):i("div",[i("div",{staticClass:"mappingNoConcepts"},[null==e.draggedConcept?i("div",{staticStyle:{"margin-bottom":"-12px"}},[e._v("\n          "+e._s(e.$t("mappingEditor.placeholder"))),i("br"),i("br")]):i("div",{staticClass:"fontWeight-heavy"},[e._v("\n          "+e._s(e.$t("mappingEditor.placeholderDragging"))+"\n        ")]),e._v(" "),null==e.draggedConcept?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.isAddButtonEnabled(t)?e.$t("mappingEditor.addConcept"):"",delay:e.$util.delay.medium},expression:"{ title: isAddButtonEnabled(isLeft) ? $t('mappingEditor.addConcept') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditor-addButton",class:{button:e.isAddButtonEnabled(t),"button-disabled":!e.isAddButtonEnabled(t)},on:{click:function(i){return e.addToMappingInternal(t)}}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()])])])}),e._v(" "),i("div",{staticClass:"mappingTypeSelection"},[i("mapping-type-selection",{directives:[{name:"show",rawName:"v-show",value:null!=e.selected.scheme[!0]||null!=e.selected.scheme[!1],expression:"selected.scheme[true] != null || selected.scheme[false] != null"}],attrs:{mapping:e.$store.state.mapping.mapping}})],1),e._v(" "),i("div",{staticClass:"mappingEditor-comment"},[i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canExportMapping?e.$t("mappingEditor.commentMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canExportMapping ? $t('mappingEditor.commentMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],class:{button:e.canExportMapping,"button-disabled":!e.canExportMapping},on:{click:function(t){e.canExportMapping&&e.$refs.commentModal.show()}}},[i("font-awesome-icon",{attrs:{icon:"comment"}})],1),e._v("\n    "+e._s(e.mappingComments.join(", "))+"\n  ")]),e._v(" "),i("div",{staticClass:"mappingEditor-creator"},[e._v("\n    "+e._s(e.creatorName)+"\n  ")]),e._v(" "),i("div",{staticClass:"mappingEditor-title"},[e._v("\n    "+e._s(e.$t("mappingEditor.title"))+"\n  ")]),e._v(" "),i("b-modal",{ref:"deleteModal",staticClass:"mappingEditor-deleteModal",attrs:{title:e.$t("mappingEditor.deleteTitle"),"hide-footer":""}},[i("b-button",{attrs:{variant:"danger"},on:{click:function(t){e.deleteOriginalMapping(!0)&&e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.deleteAndClear"))+"\n    ")]),e._v(" "),i("b-button",{directives:[{name:"show",rawName:"v-show",value:e.hasChangedFromOriginal,expression:"hasChangedFromOriginal"}],attrs:{variant:"warning"},on:{click:function(t){e.deleteOriginalMapping()&&e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.deleteAndKeep"))+"\n    ")]),e._v(" "),i("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.clearMapping()&&e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.keepAndClear"))+"\n    ")]),e._v(" "),i("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$refs.deleteModal.hide()}}},[e._v("\n      "+e._s(e.$t("mappingEditor.cancel"))+"\n    ")])],1),e._v(" "),i("b-modal",{ref:"commentModal",attrs:{title:e.$t("mappingEditor.commentMappingTitle"),"hide-header-close":"","ok-only":""},on:{shown:e.focusNote,hide:function(t){e.comments=e.mappingComments},ok:e.saveComment}},e._l(e.comments,function(t,s){return i("b-form-textarea",{key:"mappingEditor-comment-"+s,attrs:{id:"mappingEditor-comment-"+s,rows:2,"max-rows":6},on:{input:e.saveComment},nativeOn:{keydown:function(t){return e.textareaKeydown(t)}},model:{value:e.comments[s],callback:function(t){e.$set(e.comments,s,t)},expression:"comments[index]"}})}),1),e._v(" "),i("data-modal-button",{attrs:{data:e.mapping,type:"mapping"}})],2)},U=[],V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mappingTypes",on:{mouseover:function(t){e.hovered=!0},mouseout:function(t){e.hovered=!1}}},e._l(e.mappingTypes,function(t){return i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:{title:e.$util.prefLabel(t),delay:e.$util.delay.medium},expression:"{ title: $util.prefLabel(mappingType), delay: $util.delay.medium }",modifiers:{hover:!0,right:!0}}],key:t.uri,staticClass:"mappingType",class:{mappingTypeSelected:e.hovered&&t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri,"fontWeight-heavy":t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri,mappingTypeHovered:t&&e.mappingTypeHovered&&t.uri==e.mappingTypeHovered.uri},style:"display: "+(t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri||e.hovered?"inline-block":"none")+";",on:{click:function(i){return e.choose(t)}}},[e._v("\n    "+e._s(e.$util.notation(t))+"\n  ")])}),0)},W=[],G={name:"MappingTypeSelection",props:{mapping:{type:Object,default:null}},data(){return{hovered:!1,mappingTypes:this.$jskos.mappingTypes,mappingTypeHovered:null}},computed:{mappingTypeSelected(){let e=this.mapping;return this.$jskos.mappingTypeByType(e?e.type:null)}},methods:{choose(e){this.$store.commit({type:"mapping/setType",uri:e.uri})}}},q=G,Q=(i("e46c"),Object(y["a"])(q,V,W,!1,null,"6667fc9a",null)),J=Q.exports,K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"dataModalButton",on:{click:e.openDataModal}},[i("font-awesome-icon",{attrs:{icon:"code"}})],1),e._v(" "),i("data-modal",{ref:"dataModal",attrs:{data:e.data,type:e.type,url:e.url}})],1)},Y=[],X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"dataModal",staticClass:"fontSize-normal",attrs:{title:e.$t("dataModal.title"),centered:"",size:"lg"}},[i("span",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("span",[e._v("\n      "+e._s(e.numberText)+" |\n    ")]),e._v(" "),e.url?i("span",[i("a",{attrs:{href:e.url,target:"_blank"}},[e._v("\n        API URL\n      ")]),e._v("\n      |\n    ")]):e._e(),e._v(" "),e._v("\n    JSKOS "+e._s(e.$t("settings.version"))+" "+e._s(e.$jskos.version)+"\n    |\n    "),i("a",{attrs:{href:"https://gbv.github.io/jskos/jskos.html",target:"_blank"}},[e._v("\n      "+e._s(e.$t("dataModal.jskosSpecification"))+"\n    ")])]),e._v(" "),i("p",[i("b-button",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyToClipboard(e.$refs.jsonCode)}}},[e._v("\n      "+e._s(e.$t("dataModal.exportClipboard"))+"\n    ")]),e._v(" "),i("b-button",{attrs:{href:"data:application/json;charset=utf-8,"+e.encodedData,download:e.filename+".json",target:"_blank",variant:"outline-warning"}},[e._v("\n      "+e._s(e.$t("dataModal.exportJson"))+"\n    ")]),e._v(" "),e.encodedDataNdjson?i("b-button",{attrs:{href:"data:application/json;charset=utf-8,"+e.encodedDataNdjson,download:e.filename+".ndjson",target:"_blank",variant:"outline-warning"}},[e._v("\n      "+e._s(e.$t("dataModal.exportNdjson"))+"\n    ")]):e._e()],1),e._v(" "),i("div",{staticClass:"dataModal-json"},[i("pre",[i("code",{ref:"jsonCode",domProps:{innerHTML:e._s(e.jsonHtml)}})])])])},Z=[],ee=i("efd0"),te=i.n(ee),ie={name:"DataModal",components:{},props:{data:{type:[Object,Array],default:null},type:{type:String,default:null,validator:function(e){return-1!==["concept","scheme","mapping","annotation"].indexOf(e)}},url:{type:String,default:null}},data(){return{}},computed:{computedType(){return this.type||(this.$jskos.isConcept(this.isArray?this.data[0]:this.data)?"concept":this.$jskos.isScheme(this.isArray?this.data[0]:this.data)?"scheme":null)},numberText(){let e=h.a.isArray(this.data)?this.data.length:this.data?1:0;return this.$tc("dataModal.".concat(this.computedType),e,{count:e})},isArray(){return h.a.isArray(this.data)},filename(){let e=this.computedType||"resource";return this.isArray&&(e+="s"),e},preparedData(){if(null==this.data)return null;let e=this.data;this.isArray||(e=[this.data]);let t=[];for(let i of e){let e;"mapping"==this.computedType?(e=this.$jskos.minifyMapping(i),e=this.$jskos.addMappingIdentifiers(e)):(e=this.$jskos.copyDeep(i),e=h.a.pick(e,h.a.keys(e).filter(t=>null!=e[t]))),e&&t.push(e)}return this.isArray?t:t[0]},jsonData(){return JSON.stringify(this.preparedData,null,2)},jsonHtml(){return te()(this.preparedData)},encodedData(){return encodeURIComponent(this.jsonData)},encodedDataNdjson(){return this.isArray?this.preparedData.map(e=>JSON.stringify(e)).join("\n"):null},validated(){let e=this.computedType,t=h.a.get(this.$jskos.validate,e,this.$jskos.validate&&this.$jskos.validate.resource);if(!this.preparedData||!t)return!1;let i=!0;for(let s of this.isArray?this.preparedData:[this.preparedData])i=i&&t(s);return i}},watch:{},methods:{show(){this.$refs.dataModal.show()}}},se=ie,ne=(i("bc32"),Object(y["a"])(se,X,Z,!1,null,"4246964d",null)),oe=ne.exports,re={name:"DataModalButton",components:{DataModal:oe},props:{data:{type:[Object,Array],default:null},type:{type:String,default:null,validator:function(e){return-1!==["concept","scheme","mapping"].indexOf(e)}},url:{type:String,default:null}},methods:{openDataModal(){this.$refs.dataModal.show()}}},ae=re,le=(i("ab2c"),Object(y["a"])(ae,K,Y,!1,null,"5d378a48",null)),ce=le.exports;function pe(e,t){return de(e)||me(e,t)||he()}function he(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function me(e,t){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){n=!0,o=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function de(e){if(Array.isArray(e))return e}var ue={name:"MappingEditor",components:{ItemName:I["a"],MappingTypeSelection:J,DataModalButton:ce},mixins:[M["a"],A["a"]],data(){return{comments:[""],settingsShow:!1}},computed:{mapping(){return this.$store.state.mapping.mapping},original(){return this.$store.state.mapping.original},canSaveMapping(){return(null==this.original||this.hasChangedFromOriginal)&&this.mapping.fromScheme&&this.mapping.toScheme},canDeleteMapping(){return h.a.get(this.original,"_provider.has.canRemoveMappings",!1)&&(!this.$store.getters.getCurrentRegistry.provider.has.auth||this.$store.getters.getCurrentRegistry.provider.auth)},canClearMapping(){return this.mapping.fromScheme||this.mapping.toScheme},canExportMapping(){return this.mapping.fromScheme&&this.mapping.toScheme},canSwapMapping(){return this.$jskos.conceptsOfMapping(this.mapping,"to").length<=1&&this.$jskos.conceptsOfMapping(this.mapping).length>0},mappingEncoded(){return encodeURIComponent(JSON.stringify(this.prepareMapping()))},hasChangedFromOriginal(){return this.$store.getters["mapping/hasChangedFromOriginal"]},mappingComments(){return this.$util.lmContent(this.mapping,"note")||[]},haveNotesChanged(){let e=this.comments.filter(e=>""!=e);return!h.a.isEqual(e,this.mappingComments)},schemeRight(){return this.selected.scheme[!1]},clearOnSave:{get(){return this.$settings.mappingEditorClearOnSave},set(e){this.$store.commit({type:"settings/set",prop:"mappingEditorClearOnSave",value:e})}},only1to1mappings:{get(){return"1-to-1"==this.$settings.mappingCardinality},set(e){this.$store.commit({type:"settings/set",prop:"mappingCardinality",value:e?"1-to-1":"1-to-n"})}}},watch:{mappingEncoded(){let e=h.a.get(this.$el.parentElement.getElementsByClassName("minimizer"),"[0].__vue__");e&&e.toggleMinimize(!1),this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},comments(){let e=this.comments.filter(e=>""!=e);e.length||e.push(""),h.a.isEqual(e,this.comments)||(this.comments=e)},mappingComments(e,t){h.a.isEqual(t,e)||(this.comments=h.a.clone(e))},schemeRight(){this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},creator(){this.setCreator()},original(){this.setCreator()}},mounted(){document.addEventListener("click",this.handleClickOutside),this.enableShortcuts()},destroyed(){document.removeEventListener("click",this.handleClickOutside)},methods:{shortcutHandler(e){let t=e.action,i=e.isLeft;switch(t){case"saveMapping":this.saveMapping();break;case"clearMapping":this.clearMapping();break;case"addConcept":this.addToMappingInternal(i);break;case"commentMapping":this.canExportMapping&&this.$refs.commentModal.show();break}},handleClickOutside(e){let t=this.$refs.settingsPopover;t&&!t.contains(e.target)&&(this.settingsShow=!1)},saveMapping(){if(!this.canSaveMapping)return!1;if(!this.creatorName||""==this.creatorName)return this.alert("Please set your name in Settings (top right of the page)."),!1;this.setCreator(),this.$refs.commentModal.hide();let e=this.prepareMapping(),t=this.original;this.loadingGlobal=!0,this.$store.dispatch({type:"mapping/saveMappings",mappings:[{mapping:e,original:t}]}).then(e=>{if(!e.length||!e[0]){let e=this.$t("alerts.mappingNotSaved");return this.$store.getters.getCurrentRegistry.provider.has.auth&&!this.$store.getters.getCurrentRegistry.provider.auth&&(e+=" "+this.$t("general.authNecessary")),void this.alert(e,null,"danger")}this.alert(this.$t("alerts.mappingSaved"),null,"success2");let t=e[0];this.$store.commit({type:"mapping/set",original:t}),this.clearOnSave&&this.clearMapping()}).catch(e=>{console.error("MappingEditor - error in saveMapping:",e)}).then(()=>{this.loadingGlobal=!1,this.$store.commit("mapping/setRefresh",{registry:h.a.get(this.$store.getters.getCurrentRegistry,"uri")})})},setCreator(){let e=(this.mapping.contributor||[]).concat((this.mapping.creator||[]).filter(e=>!(this.creator.uri&&e.uri&&this.creator.uri==e.uri)&&!(this.creatorName&&this.$util.prefLabel(e,null,!1)&&this.creatorName==this.$util.prefLabel(e,null,!1)))),t=[this.creator];this.$store.commit({type:"mapping/setCreator",creator:t}),this.$store.commit({type:"mapping/setContributor",contributor:e})},deleteMapping(){return!!this.canDeleteMapping&&(this.$refs.deleteModal.show(),!0)},deleteOriginalMapping(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.prepareMapping(this.original);return this.loadingGlobal=!0,this.$store.dispatch({type:"mapping/removeMappings",mappings:[t]}).then(t=>{let i=pe(t,1),s=i[0];s?(this.alert(this.$t("alerts.mappingDeleted"),null,"success2"),this.$store.commit("mapping/setRefresh",{registry:h.a.get(this.$store.getters.getCurrentRegistry,"uri")}),e&&this.clearMapping()):this.alert(this.$t("alerts.mappingNotDeleted"),null,"danger")}).catch(e=>{console.error("MappingEditor - error in deleteOriginalMapping:",e)}).then(()=>{this.loadingGlobal=!1}),!0},clearMapping(){return!!this.canClearMapping&&(this.$store.commit({type:"mapping/empty"}),this.$refs.commentModal.hide(),!0)},prepareMapping(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e=e||this.$jskos.minifyMapping(this.mapping),e=this.$jskos.addMappingIdentifiers(e),e},labelForScheme(e){return this.$util.notation(e,"scheme")},isAddButtonEnabled(e){let t=e?this.selected.concept[!0]:this.selected.concept[!1];return!!this.$store.getters["mapping/checkScheme"](e?this.selected.scheme[!0]:this.selected.scheme[!1],e)&&(null!=t&&!this.$store.getters["mapping/added"](t,e))},isDeleteAllButtonEnabled(e){return this.$store.getters["mapping/getConcepts"](e).length>0},addButtonDisabledReason(e){let t=e?this.selected.concept[!0]:this.selected.concept[!1];return this.$store.getters["mapping/checkScheme"](e?this.selected.scheme[!0]:this.selected.scheme[!1],e)?null==t?"Please select a concept.":this.$store.getters["mapping/added"](t,e)?"Selected concept is already in mapping.":"Other reason.":"Scheme does not match."},addToMappingInternal(e){if(!this.isAddButtonEnabled(e))return;let t=e?this.selected.concept[!0]:this.selected.concept[!1];this.addToMapping({concept:t,scheme:this.selected.scheme[e],isLeft:e})},deleteAll(e){this.$store.commit({type:"mapping/removeAll",isLeft:e})},droppedConcept(e,t){this.$jskos.isConcept(e)&&(this.addToMapping({concept:e,scheme:e.inScheme&&e.inScheme[0]||this.selected.scheme[t],isLeft:t}),this.loadDetails(e))},saveComment(){let e=this.comments.filter(e=>""!=e).slice();if(this.haveNotesChanged){let t=this.$util.getLanguage(h.a.get(this,"mapping.note"))||this.$util.fallbackLanguage();this.$store.commit({type:"mapping/setNote",note:{[t]:e}})}},focusNote(){document.getElementById("mappingEditor-comment-0").focus()},textareaKeydown(e){13==e.keyCode&&(e.metaKey||e.ctrlKey)&&this.$refs.commentModal.hide()},swapMapping(){this.canSwapMapping&&this.$store.commit({type:"mapping/switch"})}}},ge=ue,fe=(i("f1aa"),Object(y["a"])(ge,H,U,!1,null,"24fd14e6",null)),ve=fe.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mappingBrowser"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.selected.scheme[!0]||null!=e.selected.scheme[!1],expression:"selected.scheme[true] != null || selected.scheme[false] != null"}],attrs:{id:"mappingBrowserWrapper"}},[i("div",{staticClass:"mappingBrowser-title"},[e._v("\n      "+e._s(e.$t("mappingBrowser.title"))+"\n    ")]),e._v(" "),i("div",{attrs:{id:"mappingBrowser-settingsButton"}},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.settingsButton"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.settingsButton'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{id:"mappingBrowser-settingsButton-icon",icon:"cog"}}),e._v(" "),i("b-popover",{attrs:{show:e.settingsShow,target:"mappingBrowser-settingsButton-icon",triggers:"click",placement:"bottomleft"},on:{"update:show":function(t){e.settingsShow=t}}},[i("div",{ref:"settingsPopover"},[i("p",[i("b",[e._v(e._s(e.$t("navbar.settings")))])]),e._v(" "),i("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.settingShowAllSchemesTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.settingShowAllSchemesTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.showAllSchemes,callback:function(t){e.showAllSchemes=t},expression:"showAllSchemes"}},[e._v("\n            "+e._s(e.$t("mappingBrowser.settingShowAllSchemes"))+"\n          ")]),e._v(" "),i("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.settingShowAllResultsTooltip"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.settingShowAllResultsTooltip'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"user-select":"none"},model:{value:e.showAllResults,callback:function(t){e.showAllResults=t},expression:"showAllResults"}},[e._v("\n            "+e._s(e.$t("mappingBrowser.settingShowAllResults"))+"\n          ")]),e._v(" "),e.settingsDownloadCurrent?i("p",[i("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.downloadFile("mappings.ndjson",e.settingsDownloadCurrent)}}},[i("br"),i("font-awesome-icon",{attrs:{icon:"download"}}),e._v("\n              "+e._s(e.$t("settings.localDownloadJskos",[e.settingsDownloadCurrent.split("\n").length]))+"\n            ")],1)]):0!=e.itemCount?i("p",[i("loading-indicator",{attrs:{size:"sm"}})],1):e._e()],1)])],1),e._v(" "),i("div",{attrs:{id:"mappingBrowser-settings"}},e._l(e.registryGroups,function(t){return i("div",{key:t.uri,staticClass:"mappingBrowser-settings-registryGroup"},[i("span",{staticClass:"mappingBrowser-settings-registryGroup-title fontWeight-heavy button",attrs:{id:"registryGroup-"+t.uri}},[e._v("\n          "+e._s(e.$util.prefLabel(t))+" "),i("font-awesome-icon",{attrs:{icon:"caret-down"}}),i("br")],1),e._v(" "),e._l(t.registries,function(t){return i("registry-notation",{key:t.uri,staticClass:"mappingBrowser-settings-registryGroup-notation",attrs:{registry:t,disabled:!e.showRegistry[t.uri]},nativeOn:{click:function(i){e.showRegistry[t.uri]=!e.showRegistry[t.uri]},mouseover:function(i){e.hoveredRegistry=t},mouseout:function(t){e.hoveredRegistry=null}}})}),e._v(" "),i("b-popover",{attrs:{target:"registryGroup-"+t.uri,show:e.registryGroupShow[t.uri],triggers:"click",placement:"bottom"},on:{"update:show":function(i){return e.$set(e.registryGroupShow,t.uri,i)}}},[i("div",{ref:"registryGroup-"+t.uri+"-popover",refInFor:!0,staticClass:"mappingBrowser-settings-registryGroup-popover"},e._l(t.registries,function(t,s){return i("b-form-checkbox",{key:"registry_"+s,staticClass:"mappingBrowser-settings-registryGroup-popover-item",nativeOn:{mouseover:function(i){e.hoveredRegistry=t},mouseout:function(t){e.hoveredRegistry=null}},model:{value:e.showRegistry[t.uri],callback:function(i){e.$set(e.showRegistry,t.uri,i)},expression:"showRegistry[registry.uri]"}},[i("registry-name",{attrs:{registry:t}})],1)}),1)])],2)}),0),e._v(" "),i("div",{staticClass:"mappingBrowser-table-container"},[i("flexible-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],staticClass:"mappingBrowser-table",attrs:{items:e.tableItems,fields:e.fields},on:{hover:function(t){e.hoveredMapping=t&&t.mapping,e.hoveredId=t&&t.uniqueId}},scopedSlots:e._u([{key:"sourceScheme",fn:function(t){var s=t.value;return i("span",{},[i("item-name",{staticClass:"fontWeight-heavy",attrs:{item:s,"show-text":!1,"show-tooltip":!0,"font-size":"sm"}}),e._v(" "),null===s?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopLeftAdjustment"},[e._v('\n            "\n          ')]):e._e(),e._v(" "),void 0===s?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopAdjustment mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],1)}},{key:"sourceConcepts",fn:function(t){var s=t.value;return i("span",{},[e._l(s,function(t){return i("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?i("loading-indicator",{attrs:{size:"sm"}}):i("item-name",{attrs:{item:t,"show-text":!1,"show-tooltip":!0,"is-link":!0,"is-left":!0,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!0])||e.$jskos.compare(t,e.selected.concept[!1])}})],1)}),e._v(" "),0===s.length?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"sourceConceptsLong",fn:function(t){var s=t.value;return i("span",{},[e._l(s,function(t){return i("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?i("loading-indicator",{attrs:{size:"sm"}}):i("item-name",{attrs:{item:t,"show-text":!0,"show-tooltip":!1,"is-link":!0,"is-left":!0,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!0])||e.$jskos.compare(t,e.selected.concept[!1])}})],1)}),e._v(" "),0===s.length?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"targetScheme",fn:function(t){var s=t.value;return i("span",{},[i("item-name",{staticClass:"fontWeight-heavy",attrs:{item:s,"show-text":!1,"show-tooltip":!0,"font-size":"sm"}}),e._v(" "),null===s?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopLeftAdjustment"},[e._v('\n            "\n          ')]):e._e(),e._v(" "),void 0===s?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopAdjustment mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],1)}},{key:"targetConcepts",fn:function(t){var s=t.value;return i("span",{},[e._l(s,function(t){return i("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?i("loading-indicator",{attrs:{size:"sm"}}):i("span",[i("item-name",{attrs:{item:t,"show-text":!1,"show-tooltip":!0,"is-link":!0,"is-left":!1,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!1])||e.$jskos.compare(t,e.selected.concept[!0])}}),i("br")],1)],1)}),e._v(" "),0===s.length?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"targetConceptsLong",fn:function(t){var s=t.value;return i("span",{},[e._l(s,function(t){return i("span",{key:t.uri},[e.$jskos.isContainedIn(t,e.loadingConcepts)?i("loading-indicator",{attrs:{size:"sm"}}):i("span",[i("item-name",{attrs:{item:t,"show-text":!0,"show-tooltip":!1,"is-link":!0,"is-left":!1,"is-highlighted":e.$jskos.compare(t,e.selected.concept[!1])||e.$jskos.compare(t,e.selected.concept[!0])}}),i("br")],1)],1)}),e._v(" "),0===s.length?i("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v("\n            —\n          ")]):e._e()],2)}},{key:"type",fn:function(t){var s=t.value;return i("span",{},[null!=s&&"→"!=e.$util.notation(s)?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:s.prefLabel.en,delay:e.$util.delay.medium},expression:"{ title: value.prefLabel.en, delay: $util.delay.medium }",modifiers:{hover:!0}}]},[e._v("\n            "+e._s(e.$util.notation(s))+"\n          ")]):e._e()])}},{key:"creator",fn:function(t){var s=t.item;return i("span",{},[s.mapping&&s.mapping.creator&&s.mapping.creator[0]&&s.mapping.creator[0].uri&&e.userUris&&e.userUris.includes(s.mapping.creator[0].uri)&&(e.$util.prefLabel(s.mapping.creator[0])!=e.$util.prefLabel(e.creator)||s.mapping.creator[0].uri!=e.creator.uri)?i("span",[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.$t("mappingBrowser.creatorIsDifferent"),expression:"$t('mappingBrowser.creatorIsDifferent')",modifiers:{hover:!0}}],staticClass:"text-warning",attrs:{icon:"exclamation"}})],1):e._e(),e._v(" "),null!=s.creator?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:s.creator,delay:e.$util.delay.long},expression:"{ title: item.creator, delay: $util.delay.long }",modifiers:{hover:!0}}]},[e._v("\n            "+e._s(s.creator)+"\n          ")]):e._e()])}},{key:"source",fn:function(e){var t=e.item;return i("span",{},[i("registry-notation",{attrs:{registry:t.registry}})],1)}},{key:"actions",fn:function(t){return i("span",{},[t.item.mapping&&t.item.mapping.annotations?i("div",{staticClass:"button fontWeight-heavy",staticStyle:{display:"inline-block",position:"relative","min-width":"18px"},style:"color: "+e.annotationButtonColor(t.item.mapping.annotations)+";",attrs:{id:"mappingBrowser-hoveredMapping-annotationButton-"+t.item.uniqueId}},[e._v("\n            "+e._s(e.annotationsScore(t.item.mapping.annotations).sign)+e._s(e.annotationsScore(t.item.mapping.annotations).score)+"\n          ")]):e._e(),e._v(" "),t.item.mapping?i("div",{staticClass:"mappingBrowser-toolbar-button"},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showDetail"),delay:e.$util.delay.medium},expression:"{ title: $t('mappingBrowser.showDetail'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"info-circle"},on:{click:function(i){(e.mappingDetailMapping=t.item.mapping)&&e.$refs.mappingDetail.show()}}}),e._v(" "),t.item.mapping.note?i("font-awesome-icon",{staticClass:"mappingBrowser-noteIcon",attrs:{icon:"comment"}}):e._e()],1):e._e(),e._v(" "),i("div",{staticClass:"mappingBrowser-toolbar-button"},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSave(t.item.mapping)?e.$t("mappingBrowser.saveAndEdit"):e.$t("mappingBrowser.edit"),delay:e.$util.delay.medium},expression:"{ title: canSave(data.item.mapping) ? $t('mappingBrowser.saveAndEdit') : $t('mappingBrowser.edit'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"edit"},on:{click:function(i){return e.edit(t)}}})],1),e._v(" "),e.$jskos.compare(t.item.registry,e.$store.getters.getCurrentRegistry)?i("div",{staticClass:"mappingBrowser-toolbar-button"},[e.canRemove(t)&&t.item.registry.provider.has.canRemoveMappings&&("http://coli-conc.gbv.de/registry/local-mappings"==t.item.registry.uri||null!=t.item.mapping.uri)?i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$store.getters.getCurrentRegistry.provider.has.auth&&!e.$store.getters.getCurrentRegistry.provider.auth?e.$t("general.authNecessary"):e.$t("mappingBrowser.delete"),delay:e.$util.delay.medium},expression:"{ title: $store.getters.getCurrentRegistry.provider.has.auth && !$store.getters.getCurrentRegistry.provider.auth ? $t('general.authNecessary') : $t('mappingBrowser.delete'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button-delete",attrs:{icon:"trash-alt"},on:{click:function(i){return e.removeMapping(t.item.mapping)}}}):e._e()],1):i("div",{staticClass:"mappingBrowser-toolbar-button"},[e.canSave(t.item.mapping)?i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSave(t.item.mapping)?e.$t("mappingBrowser.saveAsMapping"):"",delay:e.$util.delay.medium},expression:"{ title: canSave(data.item.mapping) ? $t('mappingBrowser.saveAsMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"save"},on:{click:function(i){e.canSave(t.item.mapping)&&e.saveMapping(t.item.mapping)}}}):e._e()],1)])}},{key:"ITEM_ROW",fn:function(t){var s=t.item,n=t.value;return i("span",{},["more"==s.type?i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showMore")+" ("+e.$util.prefLabel(s.registry)+")",delay:e.$util.delay.medium},expression:"{ title: `${$t('mappingBrowser.showMore')} (${$util.prefLabel(item.registry)})`, delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"ellipsis-h"},on:{click:function(t){return e.showMore(n)}}}):e._e(),e._v(" "),"loading"==s.type?i("loading-indicator",{attrs:{size:"sm"}}):e._e(),e._v(" "),"noItems"==s.type?i("span",[i("registry-notation",{attrs:{registry:s.registry,disabled:!0,tooltip:!1}}),e._v("\n            "+e._s(e.$util.prefLabel(s.registry))+": "+e._s(e.$t("mappingBrowser.noItems"))+"\n          ")],1):e._e()],1)}},{key:"count",fn:function(t){return i("span",{},[null==t.item.occurrence?i("span"):-1==t.item.occurrence.count?i("span",[e._v("-")]):i("span",[i("auto-link",{attrs:{link:t.item.occurrence.url,text:String(t.item.occurrence.count)}})],1)])}}])},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),i("span",{attrs:{slot:"HEAD_actions"},slot:"HEAD_actions"})])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.loading&&0==e.items.length,expression:"loading == 0 && items.length == 0"}],staticClass:"noItems fontWeight-heavy"},[e._v("\n      "+e._s(e.$t("mappingBrowser.chooseConcept"))+"\n    ")])]),e._v(" "),i("data-modal-button",{attrs:{data:e.items.map(function(e){return e.mapping}).filter(function(e){return null!=e}),type:"mapping"}}),e._v(" "),i("mapping-detail",{ref:"mappingDetail",attrs:{mapping:e.mappingDetailMapping}}),e._v(" "),i("annotation-popover",{attrs:{id:e.hoveredId,mapping:e.hoveredMapping,"id-prefix":"mappingBrowser-hoveredMapping-annotationButton-"}})],1)},be=[],_e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.right",value:e.tooltip,expression:"tooltip",modifiers:{html:!0,right:!0}}],domProps:{innerHTML:e._s(e.registryName)}})},$e=[],we={name:"RegistryName",props:{registry:{type:Object,default:null}},computed:{registryName:function(){let e=this.$util.prefLabel(this.registry),t=this.$util.notation(this.registry);return e?e.replace(t,function(){return"<b>"+t+"</b>"}):(t=0,t||"?")},tooltip(){return this.$util.definition(this.registry).join("<br>")}}},Se=we,Ce=Object(y["a"])(Se,_e,$e,!1,null,null,null),ke=Ce.exports,xe=i("b758"),Me=i("ae75"),Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-modal",{ref:"mappingDetail",staticClass:"fontSize-normal",attrs:{title:e.$t("mappingDetail.title"),centered:"","hide-footer":"","no-enforce-focus":"",size:"lg"}},[e.mapping?i("div",[i("b-container",{staticClass:"mappingDetail-container",attrs:{fluid:""}},[i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.sourceScheme"))+":\n          ")]),e._v(" "),i("b-col",[i("item-name",{attrs:{draggable:!1,item:e.mapping.fromScheme}})],1)],1),e._v(" "),i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$tc("mappingDetail.sourceConcept",e.$jskos.conceptsOfMapping(e.mapping,"from").length))+":\n          ")]),e._v(" "),i("b-col",e._l(e.$jskos.conceptsOfMapping(e.mapping,"from"),function(e){return i("p",{key:"mappingDetail-from-"+e.uri},[i("item-name",{attrs:{draggable:!1,item:e}})],1)}),0)],1),e._v(" "),i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.targetScheme"))+":\n          ")]),e._v(" "),i("b-col",[i("item-name",{attrs:{draggable:!1,item:e.mapping.toScheme}})],1)],1),e._v(" "),i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$tc("mappingDetail.targetConcept",e.$jskos.conceptsOfMapping(e.mapping,"to").length))+":\n          ")]),e._v(" "),i("b-col",e._l(e.$jskos.conceptsOfMapping(e.mapping,"to"),function(e){return i("p",{key:"mappingDetail-to-"+e.uri},[i("item-name",{attrs:{draggable:!1,item:e}})],1)}),0)],1),e._v(" "),e.mapping.type&&e.mapping.type.length?i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.mappingType"))+":\n          ")]),e._v(" "),i("b-col",[i("a",{attrs:{href:e.$jskos.mappingTypeByType(e.mapping.type).uri,target:"_blank"}},[e._v("\n              "+e._s(e.$util.prefLabel(e.$jskos.mappingTypeByType(e.mapping.type)))+" ("+e._s(e.$util.notation(e.$jskos.mappingTypeByType(e.mapping.type)))+")\n            ")])])],1):e._e(),e._v(" "),i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.creator"))+":\n          ")]),e._v(" "),i("b-col",e._l(e.mapping.creator||[],function(t,s){return i("p",{key:"mappingDetail-creator-"+s},[i("auto-link",{attrs:{link:t.url||t.uri,text:e.$util.prefLabel(t)}})],1)}),0)],1),e._v(" "),i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.created"))+":\n          ")]),e._v(" "),i("b-col",[e._v(e._s(e.$util.dateToString(e.mapping.created)))])],1),e._v(" "),i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.modified"))+":\n          ")]),e._v(" "),i("b-col",[e._v(e._s(e.$util.dateToString(e.mapping.modified)))])],1),e._v(" "),e.mapping.annotations&&e.mapping.annotations.length?i("b-row",{staticStyle:{position:"relative"}},[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.annotations"))+":\n          ")]),e._v(" "),i("b-col",[i("annotation-list",{attrs:{annotations:e.mapping.annotations}})],1),e._v(" "),i("div",{staticClass:"dataModalButton",on:{click:function(t){return e.$refs.dataModalAnnotations.show()}}},[i("font-awesome-icon",{attrs:{icon:"code"}})],1)],1):e._e(),e._v(" "),e.mapping.note?i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.note"))+":\n          ")]),e._v(" "),i("b-col",{staticStyle:{"max-height":"200px",overflow:"scroll"},domProps:{innerHTML:e._s((e.$util.lmContent(e.mapping,"note")||[]).map(function(e){return"<p>"+e.split("\n").join("<br>")+"</p>"}).join(""))}})],1):e._e(),e._v(" "),e.mapping.partOf?i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.partOf"))+":\n          ")]),e._v(" "),i("b-col",e._l(e.mapping.partOf,function(t,s){return i("p",{key:"mappingDetail-partOf-"+s},[i("auto-link",{attrs:{link:t.uri,text:e.$util.prefLabel(t)}})],1)}),0)],1):e._e(),e._v(" "),e.mapping.identifier?i("b-row",[i("b-col",{attrs:{cols:"3"}},[e._v("\n            "+e._s(e.$t("mappingDetail.identifier"))+":\n          ")]),e._v(" "),i("b-col",e._l(e.mapping.identifier,function(e,t){return i("p",{key:"mappingDetail-identifier-"+t},[i("auto-link",{attrs:{link:e}})],1)}),0)],1):e._e()],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dataModalButton",on:{click:function(t){return e.$refs.dataModal.show()}}},[i("font-awesome-icon",{attrs:{icon:"code"}})],1)]),e._v(" "),e.mapping?i("data-modal",{ref:"dataModal",attrs:{data:e.mapping,url:e.mapping.uri,type:"mapping"}}):e._e(),e._v(" "),e.mapping&&e.mapping.annotations&&e.mapping.annotations.length?i("data-modal",{ref:"dataModalAnnotations",attrs:{data:e.mapping.annotations,type:"annotation"}}):e._e()],1)},De=[],Te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"annotationList"},e._l(e.annotations,function(t){return i("div",{key:t.uri},[i("div",{staticClass:"fontSize-normal fontWeight-heavy",class:{"text-success":"+1"===t.bodyValue,"text-danger":"-1"===t.bodyValue}},[e._v("\n      "+e._s(t.bodyValue)+"\n    ")]),e._v(" "),i("div",{staticClass:"fontSize-verySmall"},[e._v("\n      "+e._s(e.$util.dateToString(t.created,!0))),i("br"),e._v(" "),i("auto-link",{class:{"fontWeight-heavy":e.$util.annotations.creatorMatches(t,e.userUris)},attrs:{link:e.$util.annotations.creatorUri(t),text:e.$util.annotations.creatorName(t)}})],1)])}),0)},je=[],Ae={name:"AnnotationList",components:{AutoLink:_},mixins:[M["a"]],props:{annotations:{type:Array,default:()=>[]}}},Be=Ae,Re=(i("b6d1"),Object(y["a"])(Be,Te,je,!1,null,"e95d7848",null)),Oe=Re.exports,Ee={name:"MappingDetail",components:{DataModal:oe,ItemName:I["a"],AutoLink:_,AnnotationList:Oe},props:{mapping:{type:Object,default:null}},methods:{show(){this.$refs.mappingDetail.show()}}},Ie=Ee,Ne=(i("9c44"),Object(y["a"])(Ie,Le,De,!1,null,"78855d12",null)),ze=Ne.exports,Pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"annotationPopoverTop",attrs:{id:"annotationPopoverTop-"+e.iid}},[e.enable?i("b-popover",{ref:"annotationPopover",attrs:{target:e.element,container:"annotationPopoverTop-"+e.iid,show:e.show,boundary:"window",placement:"lefttop"},on:{"update:show":function(t){e.show=t}}},[e.loading?i("loading-indicator-full",{staticStyle:{"z-index":"1100"}}):e._e(),e._v(" "),i("div",{ref:"annotationPopoverDiv",staticClass:"annotationPopover"},[e.annotations.length?i("div",{staticClass:"annotationPopover-left"},[i("annotation-list",{staticClass:"annotationPopover-history",attrs:{annotations:e.annotations}})],1):e._e(),e._v(" "),i("div",{staticClass:"annotationPopover-voting"},[i("div"),e._v(" "),i("div",[i("font-awesome-icon",{class:{"annotationPopover-voting-button-current":"+1"==e.ownScore,button:e.provider&&e.provider.auth,"button-disabled":!e.provider||!e.provider.auth,"annotationPopover-voting-button":!0},attrs:{icon:"thumbs-up"},on:{click:function(t){e.provider&&e.provider.auth&&e.assessing("+1")}}})],1),e._v(" "),i("div",{staticClass:"annotationPopover-score"},[i("span",{staticClass:"fontWeight-heavy",class:{"text-success":e.score.startsWith("+"),"text-danger":e.score.startsWith("-")}},[e._v("\n            "+e._s(e.score)+"\n          ")])]),e._v(" "),i("div",[i("font-awesome-icon",{class:{"annotationPopover-voting-button-current":"-1"==e.ownScore,button:e.provider&&e.provider.auth,"button-disabled":!e.provider||!e.provider.auth,"annotationPopover-voting-button":!0},attrs:{icon:"thumbs-down"},on:{click:function(t){e.provider&&e.provider.auth&&e.assessing("-1")}}})],1)])])],1):e._e()],1)},Fe=[],He=i("a4fe");function Ue(e,t){return Ge(e)||We(e,t)||Ve()}function Ve(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function We(e,t){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){n=!0,o=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function Ge(e){if(Array.isArray(e))return e}var qe={name:"AnnotationPopover",components:{LoadingIndicatorFull:He["a"],AnnotationList:Oe},mixins:[M["a"]],props:{id:{type:String,default:null},idPrefix:{type:String,default:""},mapping:{type:Object,default:null}},data(){return{iid:null,imapping:null,show:!1,loading:!1}},computed:{enable(){return this.iid&&this.element},elementId(){return this.idPrefix+(this.iid||"")},element(){return document.getElementById(this.elementId)},mousePosition(){return this.$store.state.mousePosition},annotations(){return h.a.get(this.imapping,"annotations")||[]},score(){let e=0;for(let i of this.annotations.filter(e=>"assessing"==e.motivation)){let t=i.bodyValue;e+=parseInt(t)||0}let t=e>0?"+":e<0?"-":"±";return"".concat(t).concat(Math.abs(e))},ownAssessment(){return this.annotations.find(e=>this.$util.annotations.creatorMatches(e,this.userUris))},ownScore(){return h.a.get(this.ownAssessment,"bodyValue")},provider(){return h.a.get(this.imapping,"_provider")}},watch:{id(){this.id&&this.id!=this.iid&&(this.iid=null,h.a.delay(()=>{this.iid=this.id,this.imapping=this.mapping},50))},mousePosition(e){let t=e.x,i=e.y;if(this.element){let e=!1;for(let n of[[this.$refs.annotationPopoverDiv,25],[this.element,0]]){var s=Ue(n,2);let o=s[0],r=s[1];if(o){let s=o.getBoundingClientRect(),n=s.top,a=s.bottom,l=s.left,c=s.right;i<a+r&&i>n-r&&t<c+r&&t>l-r&&(e=!0)}}this.show=e}},show(){this.scrollToBottom()},annotations(){this.scrollToBottom()},iid(){this.scrollToBottom()}},methods:{scrollToBottom(){this.show&&h.a.delay(()=>{if(this.$refs.annotationPopoverDiv){let e=this.$refs.annotationPopoverDiv.getElementsByClassName("annotationPopover-history")[0];e&&(e.scrollTop=2e4)}},50)},alertInternal(e){this.$store.getters.getCurrentRegistry.provider.has.auth&&!this.$store.getters.getCurrentRegistry.provider.auth&&(e+=" "+this.$t("general.authNecessary")),this.alert(e,null,"danger")},assessing(e){let t=this.provider;if(!t||!t.has.annotations)return void console.warn("No provider found to add annotation.");let i,s=h.a.get(this.imapping,"uri");if(s){if(this.loading=!0,this.ownAssessment)i=this.ownScore!=e?t.editAnnotation(this.ownAssessment,{bodyValue:e}).then(t=>{t?this.ownAssessment.bodyValue=e:this.alertInternal("Editing annotation failed.")}):this.remove(this.annotations.indexOf(this.ownAssessment));else{let n={target:s,motivation:"assessing",bodyValue:e};this.creator&&this.creator.uri&&this.creatorName&&(n.creator={id:this.creator.uri,name:this.creatorName}),i=t.addAnnotation(n).then(e=>{let t=h.a.get(this.imapping,"uri");s==t&&e?this.imapping.annotations.push(e):this.alertInternal("Adding annotation failed.")})}i.then(()=>{this.loading=!1})}else console.warn("No URI found to add annotation.")},remove(e){let t=this.provider;if(!t||!t.has.annotations)return void console.warn("No provider found to add annotation.");let i=this.annotations[e];return i?(this.loading=!0,t.removeAnnotation(i).then(t=>{this.loading=!1,i.id==this.annotations[e].id&&t?this.$delete(this.imapping.annotations,e):this.alertInternal("Removing annotation failed.")})):void 0}}},Qe=qe,Je=(i("d4b3"),i("23a6"),Object(y["a"])(Qe,Pe,Fe,!1,null,"62a13de5",null)),Ke=Je.exports;function Ye(e,t){return et(e)||Ze(e,t)||Xe()}function Xe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ze(e,t){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){n=!0,o=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function et(e){if(Array.isArray(e))return e}function tt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){it(e,t,i[t])})}return e}function it(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var st={name:"MappingBrowser",components:{ItemName:I["a"],RegistryName:ke,AutoLink:_,LoadingIndicator:xe["a"],FlexibleTable:Me["a"],RegistryNotation:x,DataModalButton:ce,MappingDetail:ze,AnnotationPopover:Ke},mixins:[M["a"],A["a"]],data(){return{loading:0,items:[],previousSelected:{concept:{[!0]:null,[!1]:null},scheme:{[!0]:null,[!1]:null}},localMappingsCurrent:0,showMoreValues:{},loadingId:null,registryGroupShow:{},settingsShow:!1,settingsDownloadCurrent:null,loadingConcepts:[],errorConcepts:[],tableItemsRecompute:null,refreshTimers:{},mappingDetailMapping:null,hoveredRegistry:null,hoveredId:null}},computed:{itemCount(){return this.items.filter(e=>null!=e.mapping||"loading"==e.type).length},tableItems(){this.tableItemsRecompute;let e=" mappingBrowser-separatorPaddingBottom",t=" mappingBrowser-separatorPaddingTop",i=" mappingBrowser-separatorBorder",s=this.$store.state.mapping.original,n=this.$store.getters["mapping/hasChangedFromOriginal"],o=this.items.slice(),r=[],a=null,l=null,c=null,p=null,m=0,d=!1;const u=5;for(let g of o){g=h.a.clone(g),this.$jskos.compare(a,g.registry)||(l=null,c=null,m=0,d=!1,a=g.registry,g._rowClass+=i+t,p&&(p._rowClass+=e)),m+=1;let o=h.a.get(this.showMoreValues,'["'.concat(g.registry.uri,'"]'),1)*u;!d&&!this.showAllResults&&m>o&&(d=!0,r.push({_wholeRow:!0,_rowClass:"mappingBrowser-table-row-showMore fontSize-small",value:g.registry.uri,type:"more",registry:g.registry})),d||(g.sourceScheme&&this.$jskos.compare(g.sourceScheme,l)?g.sourceScheme=null:l=g.sourceScheme,g.targetScheme&&this.$jskos.compare(g.targetScheme,c)?g.targetScheme=null:c=g.targetScheme,g.uniqueId=this.$util.generateID(),s&&this.$jskos.compareMappingsDeep(s,g.mapping)&&(g._rowClass+=n?" mappingBrowser-table-row-editing-notSaved":" mappingBrowser-table-row-editing-saved"),r.push(g),p=g)}for(let h of r.filter(e=>this.$jskos.compare(e.registry,this.hoveredRegistry)))h._rowClass+=" mappingBrowser-hoveredRegistry";return r},fields(){return[{key:"source",label:"",width:"0%",minWidth:"",align:"left",sortable:!1,class:"mappingBrowser-table-source"},{key:"sourceScheme",label:"",width:"4%",minWidth:"",align:"left",sortable:!1,class:"fontSize-small"},{key:"sourceConcepts",label:this.$t("mappingBrowser.from"),width:"10%",minWidth:"",align:"left",sortable:!1,compare:(e,t)=>this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"from"),class:"mappingBrowser-table-concepts"},{key:"sourceConceptsLong",label:this.$t("mappingBrowser.from"),width:"25%",minWidth:"",align:"left",sortable:!1,compare:(e,t)=>this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"from"),class:"mappingBrowser-table-conceptsLong"},{key:"type",label:"",width:"4%",minWidth:"",sortable:!1,compare:(e,t)=>{let i=h.a.get(e,"type.prefLabel.en",""),s=h.a.get(t,"type.prefLabel.en","");return i<s?-1:i>s?1:0}},{key:"targetScheme",label:"",width:"4%",minWidth:"",align:"left",sortable:!1,class:"fontSize-small"},{key:"targetConcepts",label:this.$t("mappingBrowser.to"),width:"10%",minWidth:"",align:"left",sortable:!1,compare:(e,t)=>this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"to"),class:"mappingBrowser-table-concepts"},{key:"targetConceptsLong",label:this.$t("mappingBrowser.to"),width:"25%",minWidth:"",align:"left",sortable:!1,compare:(e,t)=>this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"to"),class:"mappingBrowser-table-conceptsLong"},{key:"creator",label:this.$t("mappingBrowser.creator"),width:"9%",minWidth:"",align:"left",sortable:!1,class:"mappingBrowser-table-creator"},{key:"count",label:"",width:"4%",minWidth:"",align:"right",sortable:!1,compare:(e,t)=>{let i=h.a.get(e,"occurrence.count",-1),s=h.a.get(t,"occurrence.count",-1);return i<s?-1:i>s?1:0}},{key:"actions",label:"",width:"12%",minWidth:"",align:"right",sortable:!1}]},needsRefresh(){return this.$store.state.mapping.mappingsNeedRefresh},showRegistry(){let e={};for(let t of this.mappingRegistries)Object.defineProperty(e,t.uri,{get:()=>{let e=this.$settings.mappingBrowserShowRegistry[t.uri];return null==e||e},set:e=>{this.$store.commit({type:"settings/set",prop:"mappingBrowserShowRegistry",value:Object.assign({},this.$settings.mappingBrowserShowRegistry,{[t.uri]:e})}),this.$store.commit("mapping/setRefresh",{registry:t.uri})}});return e},mappingRegistries(){let e=this.config.registries.filter(e=>e.provider&&(e.provider.has.mappings||e.provider.has.occurrences)&&(e.provider.supportsScheme&&e.provider.supportsScheme(this.selected.scheme[!0])||e.provider.supportsScheme&&e.provider.supportsScheme(this.selected.scheme[!1]))),t=e.findIndex(e=>this.$jskos.compare(e,this.currentRegistry));if(-1!==t){let i=e[t];h.a.pullAt(e,[t]),e=[i].concat(e)}return e},currentRegistry(){return this.$store.getters.getCurrentRegistry},registryGroups(){let e=h.a.cloneDeep(this.config.registryGroups);for(let i of e)i.registries=[];let t={uri:"http://coli-conc.gbv.de/registry-group/other-mappings",prefLabel:{de:"Andere Mappings",en:"Other Mappings"},registries:[]};for(let i of this.mappingRegistries){let s=e.find(e=>e.uri==h.a.get(i,"subject[0].uri"))||t;s.registries.push(i)}return e.push(t),e=e.filter(e=>e.registries.length>0),e},showAllSchemes:{get(){return this.$settings.mappingBrowserAllSchemes},set(e){this.$store.commit({type:"settings/set",prop:"mappingBrowserAllSchemes",value:e}),this.$store.commit("mapping/setRefresh")}},showAllResults:{get(){return this.$settings.mappingBrowserShowAll},set(e){this.$store.commit({type:"settings/set",prop:"mappingBrowserShowAll",value:e}),this.$store.commit("mapping/setRefresh")}}},watch:{needsRefresh(e){if(e){let e=this.$store.state.mapping.mappingsNeedRefreshRegistry;e?this.reload(!0,e):this.reload(!0),this.$store.commit("mapping/setRefresh",{refresh:!1})}},selected:{handler(){this.reload()},deep:!0},settingsShow(e){e?this.refreshSettingsDownload():this.settingsDownloadCurrent=null},locale(){this.$store.commit("mapping/setRefresh")},currentRegistry(e,t){this.$jskos.compare(e,t)||this.$store.commit("mapping/setRefresh")}},created(){this.reload=h.a.debounce(this.internalReload,100);for(let e of this.registryGroups)this.$set(this.registryGroupShow,e.uri,!1)},mounted(){this.$util.setupTableScrollSync(),this.reload(),document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)},methods:{refreshSettingsDownload(){let e=e=>{let t=this.$jskos.minifyMapping(e);for(let i of this.$jskos.conceptsOfMapping(t)){let e=this._getObject(i),t=this.$util.getLanguage(h.a.get(e,"prefLabel"));t&&(i.prefLabel=h.a.pick(e.prefLabel,[t]))}return JSON.stringify(t)},t=this.items.map(e=>e.mapping).filter(e=>null!=e);this.settingsDownloadCurrent=t.map(e).join("\n")},handleClickOutside(e){for(let i of this.registryGroups){let t=h.a.get(this.$refs["registryGroup-".concat(i.uri,"-popover")],"[0]");t&&!t.contains(e.target)&&(this.registryGroupShow[i.uri]=!1)}let t=this.$refs.settingsPopover;t&&!t.contains(e.target)&&(this.settingsShow=!1)},internalReload(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,i=[],s=()=>{this.previousSelected={},this.previousSelected.concept={[!0]:this.selected.concept[!0]?{uri:this.selected.concept[!0].uri}:null,[!1]:this.selected.concept[!1]?{uri:this.selected.concept[!1].uri}:null},this.previousSelected.scheme={[!0]:this.selected.scheme[!0]?{uri:this.selected.scheme[!0].uri}:null,[!1]:this.selected.scheme[!1]?{uri:this.selected.scheme[!1].uri}:null}};if(!this.selected.concept[!0]&&!this.selected.concept[!1])return this.items=[],void s();if(!e&&this.$jskos.compare(this.selected.concept[!0],this.previousSelected.concept[!0])&&this.$jskos.compare(this.selected.concept[!1],this.previousSelected.concept[!1])&&this.$jskos.compare(this.selected.scheme[!0],this.previousSelected.scheme[!0])&&this.$jskos.compare(this.selected.scheme[!1],this.previousSelected.scheme[!1]))return void s();s(),e||(this.showMoreValues={});let n=!0;t||(this.items=[],n=!1),this.loading=1;let o=this.$util.generateID();this.loadingId=o;let r={direction:"both",mode:"or",selected:this.selected},a=h.a.get(this,"selected.concept[true]"),l=h.a.get(this,"selected.concept[false]");a&&(r["from"]=a),l&&(r["to"]=l);let c=[];for(let p of this.mappingRegistries){this.refreshTimers[p.uri]&&window.clearInterval(this.refreshTimers[p.uri]);let s={_wholeRow:!0,_rowClass:"mappingBrowser-table-row-loading",value:"",type:"loading",registry:p};this.showRegistry[p.uri]||(s={_wholeRow:!0,_rowClass:"mappingBrowser-table-row-hidden",value:"",registry:p});let a=this.items.findIndex(e=>this.$jskos.compare(e.registry,p));if(n&&-1!=a){if(p.uri!=t)continue;e&&this.showRegistry[p.uri]&&this.items[a].mapping||(this.items=this.items.filter(e=>!this.$jskos.compare(e.registry,p)),this.items=this.items.slice(0,a).concat([s],this.items.slice(a,this.items.length)))}else this.items.push(s);if(!this.showRegistry[p.uri])continue;let l=this.getMappings(tt({},r,{registry:p.uri,all:!0})).then(e=>{if(this.loadingId!=o)return;let t=[];e=e.sort((e,t)=>{if(e._occurrence||t._occurrence)return h.a.get(t,"_occurrence.count",0)-h.a.get(e,"_occurrence.count",0);const i=(e,t)=>{for(let i of e)if(this.$jskos.compare(i,t))return!0;return!1},s=(e,t)=>{let i=t?"from":"to";return h.a.get(e,"".concat(i,".memberSet"))||h.a.get(e,"".concat(i,".memberChoice"))||h.a.get(e,"".concat(i,".memberList"))||[]};let n={a:10,b:10};if(h.a.forOwn({a:e,b:t},(e,t)=>{let o=s(e,!0),r=s(e,!1);i(o,this.selected.concept[!0])&&(n[t]-=6),i(r,this.selected.concept[!1])&&(n[t]-=4),i(o,this.selected.concept[!1])&&(n[t]-=3),i(r,this.selected.concept[!0])&&(n[t]-=2),this.$jskos.compare(e.fromScheme,this.selected.scheme[!0])&&(n[t]-=1),this.$jskos.compare(e.toScheme,this.selected.scheme[!1])&&(n[t]-=1)}),n.a-n.b!=0)return n.a-n.b;let o=this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"from");return 0!=o?o:this.$util.compareMappingsByConcepts(e.mapping,t.mapping,"to")});for(let s of e){let e={mapping:s,registry:p};if(e.sourceScheme=h.a.get(s,"fromScheme")||void 0,e.targetScheme=h.a.get(s,"toScheme")||void 0,!this.showAllSchemes&&this.selected.scheme[!0]&&this.selected.scheme[!1]){let t=!0;for(let i of[e.sourceScheme,e.targetScheme]){let e=!1;for(let t of[!0,!1])this.$jskos.compare(i,this.selected.scheme[t])&&(e=!0);t=t&&e}if(!t)continue}if(e.sourceConcepts=this.$jskos.conceptsOfMapping(s,"from").filter(e=>null!=e),e.targetConcepts=this.$jskos.conceptsOfMapping(s,"to").filter(e=>null!=e),c=c.concat(e.sourceConcepts).concat(e.targetConcepts),e.sourceConceptsLong=e.sourceConcepts,e.targetConceptsLong=e.targetConcepts,h.a.get(s,"from")||0!=e.sourceConcepts.length||(e.sourceScheme=void 0),h.a.get(s,"to")||0!=e.targetConcepts.length||(e.targetScheme=void 0),e.sourceConcepts.length+e.targetConcepts.length==0)continue;let i=!1;for(let t of e.sourceConcepts)this.selected.concept[!0]&&t.uri==this.selected.concept[!0].uri&&(i=!0),t.inScheme=h.a.get(t,"inScheme")||[s.fromScheme];let n=!1;for(let t of e.targetConcepts)this.selected.concept[!1]&&t.uri==this.selected.concept[!1].uri&&(n=!0),t.inScheme=h.a.get(t,"inScheme")||[s.toScheme];e._rowClass="",i&&n&&(e._rowClass="mappingBrowser-table-row-match"),e.creator=s.creator&&s.creator[0]||"","object"===typeof e.creator&&(e.creator=this.$util.prefLabel(e.creator)),e.source=this.$util.prefLabel(p),e.sourceShort=this.$util.notation(p),e.type=this.$jskos.mappingTypeByType(s.type),e.occurrence=s._occurrence,t.push(e)}let i=this.items.findIndex(e=>this.$jskos.compare(e.registry,p));if(i>=0){if(0==t.length){let e={_wholeRow:!0,_rowClass:"mappingBrowser-table-row-loading mappingBrowser-table-row-noItems fontSize-small text-grey",value:"",type:"noItems",registry:p};t=[e]}let e=this.items.filter(e=>!this.$jskos.compare(e.registry,p));this.items=e.slice(0,i).concat(t,e.slice(i,e.length))}p.autoRefresh&&(window.clearInterval(this.refreshTimers[p.uri]),this.refreshTimers[p.uri]=setInterval(()=>{this.$store.commit("mapping/setRefresh",{registry:p.uri})},h.a.isInteger(p.autoRefresh)?p.autoRefresh:5e3))}).catch(e=>{console.warn("Error",e)});i.push(l)}Promise.all(i).then(()=>{this.loadingId==o&&(this.loading=0,this.loadingId=null,this.mbLoadConcepts(c),this.settingsShow&&this.refreshSettingsDownload())})},showMore(e){this.showMoreValues[e]=h.a.get(this.showMoreValues,'["'.concat(e,'"]'),1)+1,this.tableItemsRecompute=Math.random()},edit(e){let t=this.canEdit(e),i=e=>{let t=this.$jskos.copyDeep(e);return t.from.memberSet=e.from.memberSet.slice(),t.to.memberSet?t.to.memberSet=e.to.memberSet.slice():t.to.memberList?t.to.memberList=e.to.memberList.slice():t.to.memberChoice&&(t.to.memberChoice=e.to.memberChoice.slice()),t._provider=e._provider,t.fromScheme=e.fromScheme,t.toScheme=e.toScheme,t},s=i(e.item.mapping);this.mbLoadConcepts([].concat(s.from.memberSet,s.to.memberSet,s.to.memberList,s.to.memberChoice)),this.canSave(s)?this.saveMapping(s).then(e=>{this.$store.commit({type:"mapping/set",mapping:e,original:t?e:null})}):this.$store.commit({type:"mapping/set",mapping:s,original:t&&s._provider&&s._provider.has.canSaveMappings&&this.$jskos.compare(s._provider.registry,this.currentRegistry)?i(s):null})},mbLoadConcepts(e){let t=[];for(let i of e)i&&(h.a.isEmpty(i.prefLabel)||h.a.isEmpty(i.notation))&&!this.$jskos.isContainedIn(i,this.loadingConcepts)&&!this.$jskos.isContainedIn(i,this.errorConcepts)&&this.getProvider(i)&&t.push(i);this.loadConcepts(t)},canEdit(e){if(!e.item.mapping)return!1;if(!e.item.registry.provider.has.auth)return!0;let t=e.item.mapping,i=(t.creator||[]).map(e=>e.uri).filter(e=>e);return!!h.a.intersection(i,this.userUris).length},canRemove(e){return this.canEdit(e)&&(!this.currentRegistry.provider.has.auth||this.currentRegistry.provider.auth)},removeMapping(e){this.loadingGlobal=!0,this.$store.dispatch({type:"mapping/removeMappings",mappings:[e]}).then(e=>{let t=Ye(e,1),i=t[0];i?this.alert(this.$t("alerts.mappingDeleted"),null,"success2"):this.alert(this.$t("alerts.mappingNotDeleted"),null,"danger"),this.$store.commit("mapping/setRefresh",{registry:h.a.get(this.currentRegistry,"uri")})}).catch(e=>{console.error("MappingBrowser - error in removeMapping:",e)}).then(()=>{this.loadingGlobal=!1})},canSave(e){if(!e||!e.fromScheme||!e.toScheme)return!1;if(e._provider&&this.$jskos.compare(e._provider.registry,this.currentRegistry))return!1;e.identifier||(e=this.$jskos.addMappingIdentifiers(e));let t=(e.identifier||[]).find(e=>e.startsWith("urn:jskos:mapping:content"));return!!t},saveMapping(e){this.loading=1,this.loadingGlobal=!0;let t=this.creator,i=this.$util.prefLabel(t,null,!1);return e.contributor=(e.contributor||[]).concat((e.creator||[]).filter(e=>!(t.uri&&e.uri&&t.uri==e.uri)&&!(i&&this.$util.prefLabel(e,null,!1)&&i==this.$util.prefLabel(e,null,!1)))),0==e.contributor.length&&this.$delete(e,"contributor"),e.creator=[t],this.$store.dispatch({type:"mapping/saveMappings",mappings:[{mapping:e}]}).then(e=>{return e[0]}).catch(()=>{return null}).then(e=>{if(!e){let e=this.$t("alerts.mappingNotSaved");this.currentRegistry.provider.has.auth&&!this.currentRegistry.provider.auth&&(e+=" "+this.$t("general.authNecessary")),this.alert(e,null,"danger")}return e}).catch(e=>{return console.error("MappingBrowser - error in saveMapping:",e),null}).then(e=>{return this.loadingGlobal=!1,this.$store.commit("mapping/setRefresh",{registry:h.a.get(this.currentRegistry,"uri")}),this.adjustMapping(e)})},annotationsScore(e){let t=0;for(let s of e.filter(e=>"assessing"==e.motivation)){let e=s.bodyValue;t+=parseInt(e)||0}let i=t>0?"+":t<0?"-":"±";return t=Math.abs(t),{score:t,sign:i}},annotationButtonColor(e){let t=3,i=this.annotationsScore(e),s=i.score,n=i.sign,o=150*Math.min(s/t,1),r=85,a=85,l=85;"-"==n?(r+=o,a-=50,l-=50):"+"==n&&(a+=o,r-=50,l-=50);let c="rgb(".concat(r,", ").concat(a,", ").concat(l,")");return c}}},nt=st,ot=(i("4670"),i("c444"),Object(y["a"])(nt,ye,be,!1,null,"5a3539be",null)),rt=ot.exports,at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptTree",style:e.noTree?"min-height: 50px; max-height: 50px;":""},[i("minimizer",{attrs:{text:e.$t("conceptTree.title")}}),e._v(" "),i("div",{ref:"conceptTreeItems",staticClass:"conceptTreeItems scrollable"},e._l(e.items,function(t,s){var n=t.concept,o=t.depth,r=t.isSelected;return i("concept-tree-item",{key:s,attrs:{concept:n,depth:o,"is-selected":r,index:s,"is-left":e.isLeft}})}),1),e._v(" "),e.noTree?i("div",{staticClass:"fillAndCenter fontWeight-heavy"},[e._v("\n    "+e._s(e.$t("conceptTree.noTree"))+"\n  ")]):e._e(),e._v(" "),e.loading||e._topConcepts.includes(null)?i("loading-indicator-full"):e._e()],1)},lt=[],ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!=e.concept?i("div",{staticClass:"conceptTreeItem",class:{hovered:e.isHovered,selected:e.isSelected},style:"padding-left: "+10*e.depth+"px",attrs:{"data-uri":e.concept.uri}},[i("div",{staticClass:"conceptBox",attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragStart(e.concept,t)},dragend:function(t){return e.dragEnd()}}},[e.hasChildren?i("div",{staticClass:"arrowBox",on:{click:function(t){return e.openByArrow(!e.isOpen)}}},[i("i",{class:{right:!e.isOpen,down:e.isOpen}})]):e._e(),e._v(" "),i("router-link",{staticClass:"labelBox",class:{labelBoxFull:!e.hasChildren,labelBoxSelected:e.isSelected},attrs:{to:e.url},nativeOn:{mouseover:function(t){return e.hovering(e.concept)},mouseout:function(t){return e.hovering(null)},click:function(t){return t.stopPropagation(),t.preventDefault(),e.onClick(t)}}},[i("item-name",{attrs:{item:e.concept,"is-highlighted":e.isSelected,"prevent-external-hover":!0}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.canAddToMapping,expression:"canAddToMapping"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.addToMapping"),delay:e.$util.delay.medium},expression:"{ title: $t('general.addToMapping'), delay: $util.delay.medium}",modifiers:{hover:!0}}],staticClass:"addToMapping",on:{click:function(t){return e.addConcept()},mouseover:function(t){return e.hovering(e.concept)},mouseout:function(t){return e.hovering(null)}}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1)],1),e._v(" "),i("loading-indicator",{directives:[{name:"show",rawName:"v-show",value:e.hasChildren&&e.isOpen&&e.concept.narrower.includes(null),expression:"hasChildren && isOpen && concept.narrower.includes(null)"}],staticStyle:{"margin-left":"36px"},attrs:{size:"sm"}})],1):e._e()},pt=[],ht={name:"ConceptTreeItem",components:{LoadingIndicator:xe["a"],ItemName:I["a"]},mixins:[A["a"]],props:{concept:{type:Object,default:null},depth:{type:Number,default:null},index:{type:Number,default:null},isLeft:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!1}},data(){return{isHoveredFromHere:!1,loadingChildren:!1,preventClick:!1,preventClickArrow:!1,canAddToMapping:!1,interval:null,url:""}},computed:{hasChildren(){return 0!=h.a.get(this.concept,"narrower.length",1)},isHovered(){return this.isHoveredFromHere},childrenLoaded(){return!this.concept.narrower||!this.concept.narrower.includes(null)},isOpen(){return h.a.get(this.concept,"__ISOPEN__[".concat(this.isLeft,"]"),!1)}},methods:{hovering(e){this.hoveredConcept=e,this.isHoveredFromHere=null!=e,this.canAddToMapping=this.$store.getters["mapping/canAdd"](this.concept,this.selected.scheme[this.isLeft],this.isLeft),window.clearInterval(this.interval),null!=e&&(this.interval=setInterval(()=>{this.isMouseOver()||(this.isHoveredFromHere=!1,window.clearInterval(this.interval))},500)),this.url=e?this.getRouterUrl(e,this.isLeft):""},openByArrow(e){this.preventClickArrow||(this.open(this.concept,this.isLeft,e),this.loadChildren(),this.preventClickArrow=!0,h.a.delay(()=>{h.a.delay(()=>{this.preventClickArrow=!1},200)},50))},select(e){this.setSelected({isLeft:this.isLeft,concept:e})},onClick(){this.preventClick||this.isSelected&&this.hasChildren&&(this.preventClick=!0,h.a.delay(()=>{this.open(this.concept,this.isLeft,!this.isOpen),h.a.delay(()=>{this.preventClick=!1},200)},50))},addConcept(){!this.isSelected&&this.$settings.conceptTreeAddToMappingSelectsConcept&&this.select(this.concept),this.addToMapping({concept:this.concept,scheme:this.selected.scheme[this.isLeft],isLeft:this.isLeft})},loadChildren(){this.loadingChildren=!0,this.loadNarrower(this.concept).then(e=>{this.loadingChildren=!1,e.__ISOPEN__&&e.__ISOPEN__[this.isLeft]&&this.scrollTo()})},scrollTo(){let e=this.$el.parentElement;while(!e.classList.contains("scrollable"))e=e.parentElement;var t={container:e,easing:"ease-in",offset:-20,cancelable:!0,x:!1,y:!0};this.$scrollTo(this.$el,200,t)}}},mt=ht,dt=(i("e14d"),Object(y["a"])(mt,ct,pt,!1,null,"41439c95",null)),ut=dt.exports,gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"minimizer"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.minimized,expression:"!minimized"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.minimize"),delay:e.$util.delay.medium},expression:"{ title: $t('minimizer.minimize'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"utilityButton minimizeButton",on:{click:function(t){return e.toggleMinimize()},mouseover:function(t){e.minimizeHovered=!0},mouseout:function(t){e.minimizeHovered=!1}}},[i("font-awesome-icon",{attrs:{icon:"window-minimize"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.minimized,expression:"minimized"}],staticClass:"minimizedOverlay",on:{click:function(t){return e.toggleMinimize()}}},[i("div",[e._v("\n      "+e._s(e.text)+"\n      "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.maximize"),delay:e.$util.delay.medium},expression:"{ title: $t('minimizer.maximize'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"maximizeButton"},[i("font-awesome-icon",{attrs:{icon:"plus-square"}})],1)])]),e._v(" "),e.minimizeHovered?i("div",{staticClass:"minimizedHoverOverlay"}):e._e()])},ft=[],vt={name:"Minimizer",props:{text:{type:String,default:""},isColumn:{type:Boolean,default:!1}},data(){return{previousFlex:"",previousMinSizes:[],minimizerSize:"40px",minimizeHovered:!1}},computed:{minimized:{get(){return this.$settings.minimized[this.parentComponentName()]||!1},set(e){let t=h.a.cloneDeep(this.$settings.minimized);t[this.parentComponentName()]=e,this.$store.commit({type:"settings/set",prop:"minimized",value:t})}}},watch:{minimized(){this.refreshMinimize()}},mounted(){},methods:{parentComponentName(){return this.$el?this.$el.parentElement.id:"fallback"},toggleMinimize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.minimized=null!=e?e:!this.minimized},refreshMinimize(){this.minimized&&(this.previousMinSizes=[]);let e=this.$el;while(!e.classList.contains("mainComponent"))if(e=e.parentElement,this.minimized){let t,i=window.getComputedStyle(e);t=this.isColumn?i.getPropertyValue("min-width"):i.getPropertyValue("min-height"),this.previousMinSizes.push({element:e,minSize:t}),this.isColumn?(e.style.minWidth=this.minimizerSize,e.style.maxWidth=this.minimizerSize):(e.style.minHeight=this.minimizerSize,e.style.maxHeight=this.minimizerSize)}let t=window.getComputedStyle(e);if(this.minimized){e.classList.add("mainComponent-minimized"),this.previousFlex=t.getPropertyValue("flex"),e.style.flex="0 1 "+this.minimizerSize,e.dataset.minimized=1,this.refresh("minimize");let i=window.getComputedStyle(this.$el.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index");for(let t of e.getElementsByClassName("minimizer"))if(t!=this.$el){let e=t.__vue__;e.minimized&&window.getComputedStyle(t.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index")>=i&&(t.getElementsByClassName("minimizedOverlay")[0].style.zIndex=i-1)}}else{e.classList.remove("mainComponent-minimized"),e.style.flex=this.previousFlex;for(let e of this.previousMinSizes)this.isColumn?(e.element.style.minWidth=e.minSize,e.element.style.maxWidth=""):(e.element.style.minHeight=e.minSize,e.element.style.maxHeight="");e.dataset.minimized=0,this.refresh("minimize")}}}},yt=vt,bt=(i("ddcb"),Object(y["a"])(yt,gt,ft,!1,null,"0d5f80bd",null)),_t=bt.exports,$t=i("2e22"),wt={name:"ConceptTree",components:{LoadingIndicatorFull:He["a"],ConceptTreeItem:ut,Minimizer:_t},mixins:[A["a"]],props:{isLeft:{type:Boolean,default:!0}},data(){return{loading:!1,currentSelectedConcept:null,shouldScroll:!0,scrollTo:Object($t["a"])()}},computed:{schemeSelected(){return this.selected.scheme[this.isLeft]},conceptSelected(){return this.selected.concept[this.isLeft]},items(){let e=[];for(let i of this._topConcepts){e.push(i);let t=this.children(i);e=e.concat(t)}let t=[];for(let i of e)t.push({concept:i,depth:i&&i.ancestors&&i.ancestors.length||0,isSelected:this.$jskos.compare(this.conceptSelected,i)});return t},_topConcepts(){let e=h.a.get(this.selected.scheme[this.isLeft],"uri",null);return h.a.get(this.topConcepts,e)},noTree(){return 0==this.items.length&&!this.loading}},watch:{conceptSelected:{handler(){let e=this.conceptSelected;if(e!=this.currentSelectedConcept&&(this.currentSelectedConcept=e,this.shouldScroll=!0),this.$jskos.isConcept(e))if(e.ancestors&&!e.ancestors.includes(null)){let t=!0;for(let i of e.ancestors)i.narrower&&!i.narrower.includes(null)||(t=!1);if(t&&this.shouldScroll){this.shouldScroll=!1;for(let e of this.conceptSelected.ancestors)this.open(e,this.isLeft,!0);h.a.delay(()=>{if(this.shouldScroll)return;let t=document.querySelectorAll("[data-uri='".concat(e.uri,"']"))[0];var i={container:this.$refs.conceptTreeItems,easing:"ease-in",offset:-50,cancelable:!0,x:!1,y:!0};t&&this.scrollTo(t,200,i),this.loading=!1},100)}else t||(this.loading=!0)}else this.loading=!0},deep:!0}},methods:{children(e){let t=[];if(e&&e.__ISOPEN__&&e.__ISOPEN__[this.isLeft])for(let i of e.narrower)t.push(i),t=t.concat(this.children(i));return t}}},St=wt,Ct=(i("13ae"),Object(y["a"])(St,at,lt,!1,null,"3417ff5a",null)),kt=Ct.exports,xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"itemDetail",on:{dragover:e.dragOver,drop:e.drop}},[i("minimizer",{attrs:{text:e.type+" Detail"}}),e._v(" "),null!=e.item?i("div",{staticClass:"itemDetail-content"},[i("Concept"==e.type?"ConceptDetail":"SchemeDetail",{tag:"component",attrs:{item:e.item,"is-left":e.isLeft,settings:e.internalSettings}})],1):e.loading?e._e():i("div",{staticClass:"fillAndCenter fontSize-normal fontWeight-heavy"},[e._v("\n    "+e._s(e.$t("itemDetail.pleaseSelect"))+"\n  ")]),e._v(" "),i("data-modal-button",{attrs:{data:e.item,url:e.apiUrl}}),e._v(" "),e.loading?i("loading-indicator-full"):e._e()],1)},Mt=[],Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!=e.item?i("div",{staticClass:"conceptDetail"},[i("div",{staticClass:"conceptDetail-ancestors"},[e.ancestors.length>3&&!e.settings.showAllAncestors?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.showAncestors?e.$t("conceptDetail.showLessAncestors"):e.$t("conceptDetail.showAllAncestors"),delay:e.$util.delay.medium},expression:"{ title: showAncestors ? $t('conceptDetail.showLessAncestors') : $t('conceptDetail.showAllAncestors'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button conceptDetail-ancestors-expand",on:{click:function(t){e.showAncestors=!e.showAncestors}}},[i("font-awesome-icon",{attrs:{icon:e.showAncestors?"angle-down":"angle-right"}})],1):e._e(),e._v(" "),e._l(e.ancestors.filter(function(e){return null!=e}),function(t,s){return i("div",{key:t.uri},[e.showAncestors||e.settings.showAllAncestors||0==s||s==e.ancestors.length-1||e.ancestors.length<=3?i("span",[i("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-up-alt"}}),e._v(" "),i("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1):1==s?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.showAllAncestors"),delay:e.$util.delay.medium},expression:"{ title: $t('conceptDetail.showAllAncestors'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-ancestors-more button",on:{click:function(t){e.showAncestors=!0}}},[i("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"ellipsis-v"}})],1):e._e()])}),e._v(" "),e._l((0==e.ancestors.length&&e.item.__BROADERLOADED__?e.broader:[]).filter(function(e){return null!=e}),function(t){return i("div",{key:t.uri},[i("font-awesome-icon",{attrs:{icon:"sort-up"}}),e._v(" "),i("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)}),e._v(" "),0!=e.ancestors.length&&e.ancestors.includes(null)||0==e.ancestors.length&&0!=e.broader.length&&!e.item.__BROADERLOADED__?i("loading-indicator",{attrs:{size:"sm"}}):e._e()],2),e._v(" "),i("div",{staticClass:"conceptDetail-name"},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.clearConcept"),delay:e.$util.delay.medium},expression:"{ title: $t('conceptDetail.clearConcept'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{display:"inline-block",margin:"0px 2px 0px 2px"},on:{click:function(t){e.$router.push({path:e.getRouterUrl(e.selected.scheme[e.isLeft],e.isLeft)})}}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),e._v(" "),i("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),e._v(" "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.showAddToMappingButton?e.$t("general.addToMapping"):"",delay:e.$util.delay.medium},expression:"{ title: showAddToMappingButton ? $t('general.addToMapping') : '', delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-name-addButton",class:{button:e.showAddToMappingButton,"button-disabled":!e.showAddToMappingButton},on:{click:function(t){e.addToMapping({concept:e.item,scheme:e.item.inScheme&&e.item.inScheme[0]||e.selected.scheme[e.isLeft],isLeft:e.isLeft})}}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1)],1),e._v(" "),i("b-card",{key:"conceptDetail-note-tabs"+e.iteration,staticClass:"conceptDetail-note-tabs",attrs:{"no-body":""}},[i("b-tabs",{attrs:{"no-fade":"",card:""}},[e._l([[e.item.scopeNote,e.$t("conceptDetail.scope")],[e.item.editorialNote,e.$t("conceptDetail.editorial")],[e.item.altLabel,e.$t("conceptDetail.registerEntries")],[{de:e.item.__GNDTERMS__},e.$t("conceptDetail.gnd")]].filter(function(t){return null!=t[0]&&null!=e.$util.lmContent(t[0])&&e.$util.lmContent(t[0]).length}),function(t,s){var n=t[0],o=t[1];return i("b-tab",{key:"note"+s+"-"+e.iteration,staticClass:"conceptDetail-notes",attrs:{title:o,active:"GND"==o&&!e.hasNotes(e.item)}},[i("div",{staticClass:"conceptDetail-note"},[i("span",{domProps:{innerHTML:e._s(e.notesOptions.visiblePart(e.$util.lmContent(n)))}}),e._v(" "),i("b-collapse",{staticClass:"no-transition",attrs:{id:"note"+s,tag:"span"}},[i("span",{domProps:{innerHTML:e._s(e.notesOptions.hiddenPart(e.$util.lmContent(n)))}})]),e._v(" "),e.notesOptions.isTruncated(e.$util.lmContent(n))?i("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"note"+s,expression:"'note'+index"}],attrs:{href:""},on:{click:function(e){e.preventDefault()}}},[i("span",{staticClass:"when-opened"},[e._v(e._s(e.$t("conceptDetail.showLess")))]),e._v(" "),i("span",{staticClass:"when-closed"},[e._v(e._s(e.$t("conceptDetail.showMore")))])]):e._e()],1)])}),e._v(" "),i("b-tab",{key:"zzzzzzzzzz"+e.iteration,attrs:{title:e.$t("conceptDetail.info")}},[e._l([e.item.uri].concat(e.item.identifier).filter(function(e){return null!=e}),function(t,s){return i("div",{key:s,class:(t.startsWith("http"),"conceptDetail-identifier")},[i("font-awesome-icon",{attrs:{icon:t.startsWith("http")?"link":"id-card"},on:{dblclick:function(t){e.copyToClipboard(e.elementForEvent(t))}}}),e._v(" "),i("auto-link",{attrs:{link:t}})],1)}),e._v(" "),e._l([e.$util.getLanguage(e.item.prefLabel)].concat(Object.keys(e.item.prefLabel||{}).filter(function(t){return t!=e.$util.getLanguage(e.item.prefLabel)})).filter(function(e){return e&&"-"!=e}),function(t){return i("div",{key:"conceptDetail-prefLabel-"+t,staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.prefLabel"))+" ("+e._s(t)+"):")]),e._v(" "+e._s(e.$util.prefLabel(e.item,t))+"\n        ")])}),e._v(" "),e.item.creator&&e.item.creator.length?i("div",{staticClass:"conceptDetail-identifier"},[i("font-awesome-icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.$util.prefLabel(e.item.creator[0]))+"\n        ")],1):e._e(),e._v(" "),e.item.created?i("div",{staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.created,!0))+"\n        ")]):e._e(),e._v(" "),e.item.modified?i("div",{staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.modified,!0))+"\n        ")]):e._e(),e._v(" "),e.item.definition?e._l([e.$util.getLanguage(e.item.definition)].concat(Object.keys(e.item.definition).filter(function(t){return t!=e.$util.getLanguage(e.item.definition)&&"-"!=t})),function(t){return i("div",{key:"conceptDetail-defintion-"+t,staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.definition"))+" ("+e._s(t)+"):")]),e._v(" "+e._s(e.$util.definition(e.item,t).join(", "))+"\n          ")])}):e._e()],2),e._v(" "),e.config.searchLinks?i("b-tab",{attrs:{title:e.$t("conceptDetail.searchLinks")}},[i("ul",{staticStyle:{"margin-bottom":"0"}},e._l(e.searchLinks,function(t,s){return i("li",{key:"searchLink"+e.isLeft+s},[i("a",{attrs:{href:t.url,target:"_blank"}},[e._v("\n              "+e._s(t.label)+"\n            ")])])}),0)]):e._e()],2)],1),e._v(" "),i("item-detail-narrower",{attrs:{narrower:e.item.narrower,"is-left":e.isLeft}})],1):e._e()},Dt=[],Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.narrower&&e.narrower.length>0?i("div",{staticClass:"itemDetailNarrower"},[null!=e.text?i("div",{staticClass:"fontWeight-heavy"},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e(),e._v(" "),e._l(e.narrower.filter(function(e){return null!=e}),function(t){return i("div",{key:t.uri,staticClass:"itemDetailNarrower-item"},[i("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-down-alt"}}),e._v(" "),i("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)}),e._v(" "),0!=e.narrower.length&&e.narrower.includes(null)?i("loading-indicator",{attrs:{size:"sm"}}):e._e()],2):e._e()},jt=[],At={name:"ItemDetailNarrower",components:{ItemName:I["a"],LoadingIndicator:xe["a"]},props:{narrower:{type:Array,default:()=>new Array},text:{type:String,default:null},isLeft:{type:Boolean,default:!0}}},Bt=At,Rt=(i("67ca0"),Object(y["a"])(Bt,Tt,jt,!1,null,"4371872d",null)),Ot=Rt.exports,Et={name:"ConceptDetail",components:{AutoLink:_,ItemName:I["a"],LoadingIndicator:xe["a"],ItemDetailNarrower:Ot},mixins:[A["a"]],props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>{return{}}}},data(){return{showAncestors:!1,iteration:0,notesOptions:{divider:"∤",maximumCharacters:140,join(e){return Array.isArray(e)?e.join(this.divider):e},visiblePart(e){let t=this.join(e);return t=t.substring(0,this.cutPosition(t)),this.replaceDivider(t)},hiddenPart(e){let t=this.join(e);return this.replaceDivider(t.substring(this.cutPosition(t)))},cutPosition(e){let t=new RegExp(this.divider,"g"),i=this.maximumCharacters-10*Math.min((e.substring(0,this.maximumCharacters-20).match(t)||[]).length,9);if(this.showAll||e.length-i<=20)return e.length;let s=e.substring(0,i).lastIndexOf(" "),n=e.substring(0,i).lastIndexOf("\n"),o=e.substring(0,i).lastIndexOf(this.divider);return Math.max(s,n,o)},isTruncated(e){let t=this.join(e);return!this.showAll&&t.length>this.cutPosition(t)},replaceDivider(e){return e.split(this.divider).join("<br>")}}}},computed:{showAddToMappingButton(){return this.$store.getters["mapping/canAdd"](this.item,h.a.get(this.item,"inScheme[0]")||this.selected.scheme[this.isLeft],this.isLeft)},ancestors(){return h.a.get(this.item,"ancestors",[])||[]},broader(){return h.a.get(this.item,"broader",[])||[]},searchLinks(){let e=this.$i18n.locale,t=this.$util.notation(this.item),i=this.$util.prefLabel(this.item),s={language:e,notation:t,prefLabel:i},n=[];for(let o of this.config.searchLinks){let e=this.selected.scheme[this.isLeft],t=o.schemeUris||[],i=!t.length;for(let s of t)this.$jskos.compare(e,{uri:s})&&(i=!0);if(!i)continue;let r=o.url;h.a.forOwn(s,(e,t)=>{r=h.a.replace(r,new RegExp("{".concat(t,"}"),"g"),e)}),n.push({url:r,label:this.$util.prefLabel(o)})}return n=n.filter((e,t,i)=>t===i.findIndex(t=>t.url==e.url)),n}},watch:{item(e,t){this.$jskos.compare(e,t)||this.refresh()},settings(){this.refresh()}},mounted(){this.refresh()},methods:{refresh(){this.showAncestors=!1,this.loadGndTerms(),this.notesOptions.showMore={},this.notesOptions.showAll=this.settings.showAllNotes,this.iteration+=1},loadGndTerms(){if(!this.item)return;let e=this.item,t=[],i={direction:"both",from:this.item},s=this._getObject({uri:"http://bartoc.org/en/node/430"});t.push(this.getMappings(i)),Promise.all(t).then(t=>{if(!this.$jskos.compare(e,this.item))return[];let i=[];for(let e of t)for(let t of["from","to"]){let n="from"==t?"to":"from";for(let t of e){let e=i.length;this.$jskos.compare(t[n+"Scheme"],s)&&(i=i.concat(t[n].memberSet||t[n].memberChoice||[]));while(e<i.length)this.$set(i[e],"__GNDTYPE__",this.$jskos.mappingTypeByType(t.type)),e+=1}}let n=[];for(let o of i)this.$jskos.compare(o,e)||n.push(this.loadDetails(o,{scheme:s}).then(e=>{return e&&this.$set(e,"__GNDTYPE__",o.__GNDTYPE__),e}));return Promise.all(n)}).then(t=>{t=t.filter(e=>null!=e);let i=[],s=["conceptDetail.relevanceVeryHigh","conceptDetail.relevanceHigh","conceptDetail.relevanceMedium","conceptDetail.relevanceLow"];for(let e of s){let s="<strong>".concat(this.$parent.$t("conceptDetail.relevance"),": ").concat(this.$parent.$t(e),"</strong> - "),n=[];for(let i of t.filter(t=>t.__GNDTYPE__.RELEVANCE==this.$parent.$t(e,"en")))i&&this.$util.prefLabel(i,null,!1)&&n.push(h.a.escape(this.$util.prefLabel(i)));n.length>0&&(s+=n.join(", "),i.push(s))}this.$set(e,"__GNDTERMS__",i)}).catch(e=>{console.error("ConceptDetail: Error when loading GND mappings:",e)})},elementForEvent(e){let t=e.target;return"path"==t.tagName.toLowerCase()&&(t=t.parentElement),t=t.nextElementSibling,t},notesShowMore(e,t){this.notesOptions.showMore[t]=e,this.iteration+=1},hasNotes(e){let t=["scopeNote","editorialNote","altLabel"],i=!1;for(let s of t)i=i||null!=e&&null!=e[s]&&null!=e[s].de&&e[s].de.length>0;return i}}},It=Et,Nt=(i("6820"),i("c93d"),Object(y["a"])(It,Lt,Dt,!1,null,"2c92c6ca",null)),zt=Nt.exports,Pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"schemeDetail"},[i("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),e._v(" "),e.item.license?i("div",{staticClass:"schemeDetail-license"},e._l(e.item.license,function(t,s){return i("span",{key:s},[i("a",{attrs:{href:t.uri,target:"_blank"}},[e.$util.licenseBadges[t.uri]?i("img",{staticClass:"schemeDetail-licenseBadge",attrs:{src:e.$util.licenseBadges[t.uri]}}):i("span",[e._v("\n          "+e._s(t.uri)+"\n        ")])]),e._v(" "),e.licenseAttribution(e.item)?i("span",[e._v("\n        by "),t.uri.indexOf("by")>=0&&e.licenseAttribution(e.item).url?i("a",{attrs:{href:e.licenseAttribution(e.item).url,target:"_blank"}},[i("auto-link",{attrs:{link:e.licenseAttribution(e.item).label}})],1):i("span",[i("auto-link",{attrs:{link:e.licenseAttribution(e.item).label}})],1)]):e._e()])}),0):e._e(),e._v(" "),e._l([e.item.uri].concat(e.item.identifier).filter(function(e){return null!=e}),function(t,s){return i("div",{key:s,staticClass:"schemeDetail-identifier"},[i("font-awesome-icon",{attrs:{icon:t.startsWith("http")?"link":"id-card"}}),e._v(" "),i("auto-link",{attrs:{link:t}})],1)}),e._v(" "),e.item.created?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.created,!0))+"\n  ")]):e._e(),e._v(" "),e.item.modified?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "+e._s(e.$util.dateToString(e.item.modified,!0))+"\n  ")]):e._e(),e._v(" "),e.item.languages?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("schemeDetail.languages"))+":")]),e._v(" "+e._s(e.item.languages.join(", "))+"\n  ")]):e._e(),e._v(" "),e.$util.notation(e.item)?i("div",{staticClass:"schemeDetail-identifier"},[i("a",{attrs:{href:"mappings.html?"+(e.isLeft?"fromScheme":"toScheme")+"="+e.$util.notation(e.item)+"&tab=1",target:"_blank"}},[e._v("\n      "+e._s(e.$t("schemeDetail.availableMappings"))+"\n    ")])]):e._e(),e._v(" "),e.settings.showTopConceptsInScheme&&e.topConcepts[e.item.uri]&&e.topConcepts[e.item.uri].length>0?i("item-detail-narrower",{attrs:{narrower:e.topConcepts[e.item.uri],"is-left":e.isLeft,text:"Top Concepts:"}}):e.settings.showTopConceptsInScheme?i("div",[e._v("\n    "+e._s(e.$t("schemeDetail.noTopConcepts"))+"\n  ")]):e._e()],2)},Ft=[],Ht={name:"SchemeDetail",components:{AutoLink:_,ItemName:I["a"],ItemDetailNarrower:Ot},props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>{return{}}}},methods:{licenseAttribution(e){let t=e.creator||e.publisher;return t&&0!=t.length?{url:t[0].url,label:this.$util.prefLabel(t[0])}:null}}},Ut=Ht,Vt=(i("34c9"),Object(y["a"])(Ut,Pt,Ft,!1,null,"7ef9761d",null)),Wt=Vt.exports,Gt={name:"ItemDetail",components:{LoadingIndicatorFull:He["a"],Minimizer:_t,ConceptDetail:zt,SchemeDetail:Wt,DataModalButton:ce},props:{item:{type:Object,default:null},isScheme:{type:Boolean,default:!1},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>{return{}}}},data(){return{loading:!1,defaultSettings:{showGndTerms:!0,showSchemeInAncestors:!0,showTopConceptsInScheme:!1,showAllAncestors:!1,showAllNotes:!1}}},computed:{type(){return this.$jskos.isConcept(this.item)?"Concept":"Scheme"},internalSettings(){return Object.assign({},this.defaultSettings,{showAllAncestors:this.$settings.conceptDetailShowAllAncestors,showAllNotes:this.$settings.conceptDetailDoNotTruncateNotes},this.settings)},apiUrl(){if(!this.item||!this.item.uri)return null;let e;if(this.$jskos.isScheme(this.item)){let t=h.a.get(this.item,"inScheme[0]._provider")||h.a.get(this.item,"_provider");e=h.a.get(t,"registry.schemes")||h.a.get(t,"registry.concepts")||h.a.get(t,"registry.data")}else{let t=h.a.get(this.item,"inScheme[0]._provider");e=h.a.get(t,"registry.concepts")||h.a.get(t,"registry.data")}return e&&h.a.isString(e)?"".concat(e,"?uri=").concat(encodeURIComponent(this.item.uri)):null}},watch:{item:function(){this.$el.scrollTop=0}},mounted(){this.$el.scrollTop=0},methods:{droppedConcept(e){this.$router.push({path:this.getRouterUrl(e,this.isLeft,!0)})}}},qt=Gt,Qt=(i("8d74"),Object(y["a"])(qt,xt,Mt,!1,null,"c9c35cc6",null)),Jt=Qt.exports,Kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.resizingSlider"),delay:e.$util.delay.medium,placement:e.isColumn?"right":"top"},expression:"{ title: $t('general.resizingSlider'), delay: $util.delay.medium, placement: isColumn ? 'right' : 'top' }",modifiers:{hover:!0}}],class:{resizingSliderCol:e.isColumn,resizingSliderRow:!e.isColumn},on:{mousedown:e.startResizing}},[i("div",[i("font-awesome-icon",{attrs:{icon:e.isColumn?"ellipsis-v":"ellipsis-h"}})],1)])},Yt=[];function Xt(e,t){return ti(e)||ei(e,t)||Zt()}function Zt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ei(e,t){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){n=!0,o=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function ti(e){if(Array.isArray(e))return e}var ii={name:"ResizingSlider",props:{isColumn:{type:Boolean,default:!1}},data(){return{resizing:!1,savedValues:{}}},computed:{flex(){return this.$settings.flex||{}}},watch:{flex(){this.refreshFlex()}},mounted(){this.refreshFlex()},methods:{getSiblings(){let e,t,i=this.$el,s=i.parentElement,n=window.getComputedStyle(i),o=n.getPropertyValue("order");try{o=parseInt(o)}catch(r){o=0}o>0?(e=s.querySelector(".order"+(o-1)),t=s.querySelector(".order"+(o+1))):(e=i.previousElementSibling,t=i.nextElementSibling);while(e&&(e.classList.contains("resizingSliderRow")||e.classList.contains("resizingSliderColumn")))e=e.previousElementSibling;while(t&&(t.classList.contains("resizingSliderRow")||t.classList.contains("resizingSliderColumn")))t=t.nextElementSibling;return[e,t]},startResizing(e){let t=this.getSiblings(),i=Xt(t,2),s=i[0],n=i[1];if(null==s||null==n)return;let o=s.clientWidth,r=n.clientWidth,a=s.clientHeight,l=n.clientHeight,c=o+r,p=a+l,m=window.getComputedStyle(s),d=window.getComputedStyle(n),u=parseFloat(m.getPropertyValue("flex-grow"))+parseFloat(d.getPropertyValue("flex-grow")),g=parseInt(m.getPropertyValue("min-width")),f=parseInt(d.getPropertyValue("min-width")),v=parseInt(m.getPropertyValue("min-height")),y=parseInt(d.getPropertyValue("min-height")),b=parseInt(h.a.get(s,"dataset.minimized"))||0,_=parseInt(h.a.get(n,"dataset.minimized"))||0;if(b+_==2)return;b+_==0&&(this.savedValues.previousWidth=o,this.savedValues.nextWidth=r,this.savedValues.previousHeight=a,this.savedValues.nextHeight=l);let $=this;function w(){document.removeEventListener("mousemove",C),document.onmouseup=null,document.body.style.cursor="auto",document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto",$.resizing=!1}if(this.resizing)return void w();this.resizing=!0;let S=$.isColumn?e.clientX:e.clientY;function C(e){let t=($.isColumn?e.clientX:e.clientY)-S;if($.isColumn){let e=o+t,i=r-t;if(e<g||i<f||b+_==1){if(e<=10||i<=10||e>=3*g&&1==b||i>=3*f&&1==_){let t=e<=10||1==b?s:n,i=t.getElementsByClassName("minimizer")[0];if(i.parentElement!=t&&i.parentElement.parentElement!=t)return;let o=i.__vue__;o&&(s.style.flex=$.savedValues.previousWidth/c*u,$.saveFlex(s),n.style.flex=$.savedValues.nextWidth/c*u,$.saveFlex(n),o.toggleMinimize(),w())}return}s.style.flex=e/c*u,$.saveFlex(s),n.style.flex=i/c*u,$.saveFlex(n)}else{let e=a+t,i=l-t;if(e<v||i<y||b+_==1){if(e<=10||i<=10||e>=3*v&&1==b||i>=3*y&&1==_){let t=e<=10||1==b?s:n,i=t.getElementsByClassName("minimizer")[0];if(i.parentElement!=t&&i.parentElement.parentElement!=t)return;let o=i.__vue__;o&&(s.style.flex=$.savedValues.previousHeight/p*u,$.saveFlex(s),n.style.flex=$.savedValues.nextHeight/p*u,$.saveFlex(n),o.toggleMinimize(),w())}return}s.style.flex=e/p*u,$.saveFlex(s),n.style.flex=i/p*u,$.saveFlex(n)}}document.body.style.cursor=$.isColumn?"col-resize":"row-resize",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.addEventListener("mousemove",C),document.onmouseup=w},saveFlex(e){if(e&&e.id&&e.style){let t=h.a.cloneDeep(this.$settings.flex);t[e.id]=e.style.flex,this.$store.commit({type:"settings/set",prop:"flex",value:t})}},refreshFlex(){let e=this.getSiblings();for(let t of e)t&&t.id&&null!=this.flex[t.id]&&(t.style.flex=this.flex[t.id])}}},si=ii,ni=(i("f4aa"),Object(y["a"])(si,Kt,Yt,!1,null,"44f686ca",null)),oi=ni.exports,ri=i("bc3a"),ai=i.n(ri),li=i("622d"),ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptSchemeSelection",staticStyle:{overflow:"visible"},attrs:{id:"conceptSchemeSelection-"+e.id}},[e.scheme?i("div",{staticClass:"conceptSchemeSelection-collapsed"},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.popoverShown?e.$t("schemeSelection.popoverHide"):e.$t("schemeSelection.popoverShow"),delay:e.$util.delay.medium},expression:"{ title: popoverShown ? $t('schemeSelection.popoverHide') : $t('schemeSelection.popoverShow'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-expandButton button",attrs:{id:e.id+"-expandButton"},on:{click:e.togglePopover}},[i("font-awesome-icon",{attrs:{icon:e.popoverShown?"angle-left":"angle-down"}})],1),e._v(" "),i("div",{staticClass:"conceptSchemeSelection-schemeName"},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.$util.delay.medium},expression:"{ title: $jskos.isContainedIn(scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-star",class:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?"conceptSchemeSelection-starFavorite":"conceptSchemeSelection-starNormal",attrs:{icon:"star"},on:{click:function(t){return e.toggleFavoriteScheme(e.scheme)}}}),e._v(" "),i("item-name",{attrs:{item:e.scheme,"is-link":!0,"is-left":e.isLeft,"font-size":"large"}}),e._v(" "),e.scheme.license&&e.scheme.license.length?i("span",[e.$util.licenseBadges[e.scheme.license[0].uri]?i("img",{staticClass:"schemeDetail-licenseBadge",attrs:{src:e.$util.licenseBadges[e.scheme.license[0].uri]}}):e._e()]):e._e(),e._v(" "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.clearScheme"),delay:e.$util.delay.medium},expression:"{ title: $t('general.clearScheme'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{display:"inline-block","margin-right":"2px","margin-top":"-3px"},on:{click:e.clearScheme}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1),e._v(" "),i("concept-search",{ref:"conceptSearch",staticClass:"conceptSchemeSelection-conceptSearch",attrs:{"is-left":e.isLeft,scheme:e.scheme}})],1):e._e(),e._v(" "),i(null==e.scheme?"div":"b-popover",{tag:"div",staticClass:"conceptSchemeSelection-popover",attrs:{target:e.id+"-expandButton",container:"conceptSchemeSelection-"+e.id,triggers:"disabled",placement:"leftbottom"},on:{shown:function(t){e.popoverShown=!0},hidden:function(t){e.popoverShown=!1}}},[i("div",{ref:"popover",staticClass:"conceptSchemeSelection-expanded font-default text-dark color-primary-0-bg fontSize-normal"},[i("div",{staticClass:"componentTitle"},[e._v("\n        "+e._s(e.isLeft?e.$t("schemeSelection.source"):e.$t("schemeSelection.target"))+"\n      ")]),e._v(" "),i("b-form",{attrs:{inline:""},on:{submit:e.chooseFirst}},[i("b-form-input",{ref:"input",staticStyle:{flex:"1","margin-right":"5px"},attrs:{placeholder:e.$t("schemeSelection.schemeFilterPlaceholder"),autocomplete:"off",size:"sm"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hidePopover(t)}},model:{value:e.schemeFilter,callback:function(t){e.schemeFilter=t},expression:"schemeFilter"}}),e._v(" "),i("b-form-select",{staticClass:"fontSize-normal",attrs:{options:e.languageFilterOptions,size:"sm"},on:{change:e.focusAndSelectInput},model:{value:e.languageFilter,callback:function(t){e.languageFilter=t},expression:"languageFilter"}})],1),e._v(" "),i("ul",{staticClass:"conceptSchemeSelection-schemeList scrollable"},[e._l(e.favoriteSchemes||[],function(t,s){return i("li",{directives:[{name:"show",rawName:"v-show",value:!e.isFiltered,expression:"!isFiltered"}],key:t.uri+"-favorite-scheme-list-"+e.id+s},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("schemeSelection.starRemove"),delay:e.$util.delay.medium},expression:"{ title: $t('schemeSelection.starRemove'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-star conceptSchemeSelection-starFavorite",attrs:{icon:"star"},on:{click:function(i){return e.toggleFavoriteScheme(t)}}}),e._v(" "),i("item-name",{ref:0!=s||e.isFiltered?null:"firstScheme",refInFor:!0,attrs:{item:t,"is-link":!0,"is-left":e.isLeft}})],1)}),e._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!e.isFiltered,expression:"!isFiltered"}]},[i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.showAllSchemes=!e.showAllSchemes}}},[e._v("\n            "+e._s(e.showAllSchemes?e.$t("schemeSelection.hideAllSchemes",{count:e.filteredSchemes.length}):e.$t("schemeSelection.showAllSchemes",{count:e.filteredSchemes.length}))+"\n          ")])]),e._v(" "),e._l(e.filteredSchemes,function(t,s){return i("li",{directives:[{name:"show",rawName:"v-show",value:e.showAllSchemes||e.isFiltered,expression:"showAllSchemes || isFiltered"}],key:t.uri+"-scheme-list-"+e.id+s},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(t,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.$util.delay.medium},expression:"{ title: $jskos.isContainedIn(_scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: $util.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-star",class:e.$jskos.isContainedIn(t,e.favoriteSchemes)?"conceptSchemeSelection-starFavorite":"conceptSchemeSelection-starNormal",attrs:{icon:"star"},on:{click:function(i){return e.toggleFavoriteScheme(t)}}}),e._v(" "),i("item-name",{ref:0!=s||!e.isFiltered&&e.favoriteSchemes.length?null:"firstScheme",refInFor:!0,attrs:{item:t,"is-link":!0,"is-left":e.isLeft}})],1)})],2),e._v(" "),e.favoriteConcepts&&e.favoriteConcepts.length?i("div",{staticClass:"componentTitle",staticStyle:{"margin-top":"30px"}},[e._v("\n        "+e._s(e.$t("schemeSelection.conceptQuick"))+"\n      ")]):e._e(),e._v(" "),i("div",{staticClass:"conceptSchemeSelection-favoriteConcepts scrollable"},e._l(e.favoriteConcepts,function(t){return i("p",{key:t.uri+"-favorite-"+e.id},[i("item-name",{attrs:{item:t,"is-left":e.isLeft,"is-link":"","force-side":""}})],1)}),0)],1)])],1)},pi=[],hi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptSearch",on:{mousemove:function(t){return e.mousemove()}}},[i("div",{staticClass:"conceptSearch-icon button",on:{click:e.focusSearch}},[i("font-awesome-icon",{attrs:{icon:"search"}})],1),e._v(" "),i("div",{staticClass:"conceptSearch-inputWrapper"},[e.isOpen&&!e.loading?i("div",{staticClass:"conceptSearch-resultCount",style:"right: "+(e.scheme.types&&e.scheme.types.length?27:10)+"px;"},[e._v("\n      "+e._s(e.searchResult.length)+" "+e._s(e.$tc("search.results",e.searchResult.length))+"\n    ")]):e._e(),e._v(" "),e.scheme.types&&e.scheme.types.length?i("div",{staticClass:"conceptSearch-filter button",attrs:{id:"conceptSearch-filter-"+(e.isLeft?"left":"right"),disabled:e.filterPopoverShow}},[i("font-awesome-icon",{attrs:{icon:"filter"}})],1):e._e(),e._v(" "),e.scheme.types&&e.scheme.types.length?i("b-popover",{attrs:{target:"conceptSearch-filter-"+(e.isLeft?"left":"right"),show:e.filterPopoverShow,triggers:"click",placement:"auto"},on:{"update:show":function(t){e.filterPopoverShow=t}}},[i("div",{ref:"filterPopover"},[i("b-form-checkbox-group",{staticClass:"conceptSearch-filterCheckboxes",attrs:{stacked:"",size:"sm"},model:{value:e.selectedTypes,callback:function(t){e.selectedTypes=t},expression:"selectedTypes"}},e._l(e.scheme.types,function(t){return i("b-form-checkbox",{key:t.uri,staticClass:"conceptSearch-filterCheckbox",attrs:{value:t.uri}},[e._v("\n            "+e._s(e.$util.prefLabel(t))+"\n          ")])}),1)],1)]):e._e(),e._v(" "),i("b-form-input",{ref:"searchInput",attrs:{placeholder:e.$t("search.placeholder"),size:"sm",autocomplete:"off"},nativeOn:{click:function(t){e.isOpen=""!=e.searchQuery},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onArrowDown(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onArrowUp(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.closeResults(t)}],keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter(t)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.$refs.searchInput.$el.blur(),e.closeResults()}],focus:function(t){e.isOpen=""!=e.searchQuery}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"conceptSearch-results"},[e.loading?i("div",{staticClass:"conceptSearch-loading"},[i("loading-indicator")],1):i("ul",{staticClass:"conceptSearch-results-list"},[e._l(e.searchResult,function(t,s){return i("li",{key:s,staticClass:"conceptSearch-results-item",class:{"conceptSearch-selected":s===e.searchSelected},attrs:{id:e.uniqueID+"-searchResult-"+s,draggable:"true"},on:{dragstart:function(i){return e.dragStartResult(t,i)},dragend:e.dragEnd,click:function(t){return e.chooseResult(s)},mouseover:function(t){return e.mouseover(s)}}},[i("span",{domProps:{innerHTML:e._s(e.highlightQueryInResult(t[0]))}})])}),e._v(" "),0==e.searchResult.length?i("li",{staticClass:"conceptSearch-results-item"},[i("div",[e._v(e._s(e.$t("search.noResults")))])]):e._e()],2)])],1)])},mi=[],di={name:"ConceptSearch",components:{LoadingIndicator:xe["a"]},mixins:[A["a"]],props:{isLeft:{type:Boolean,default:!0},scheme:{type:Object,default:null}},data(){return{searchQuery:"",searchResult:[],isOpen:!1,isValid:!1,loading:!1,searchSelected:-1,preventHovering:!1,cancelToken:null,uniqueID:null,filterPopoverShow:!1}},computed:{typesForSchemes(){return this.$settings.typesForSchemes},selectedTypes:{get(){let e=Object.keys(this.$settings.typesForSchemes).find(e=>this.$jskos.compare(this.scheme,{uri:e}));return this.$settings.typesForSchemes[e]},set(e){if(!Array.isArray(e))return;let t=Object.keys(this.$settings.typesForSchemes).find(e=>this.$jskos.compare(this.scheme,{uri:e}))||this.scheme.uri,i=h.a.cloneDeep(this.$settings.typesForSchemes);h.a.isEqual(e,i[t])||(i[t]=e,this.$store.commit({type:"settings/set",prop:"typesForSchemes",value:i}))}},provider(){return h.a.get(this.scheme,"_provider")}},watch:{searchQuery:function(e){this.searchSelected=-1,null!=this.cancelToken&&(this.cancelToken.cancel("There was a newer search query."),this.cancelToken=null),""==e?(this.loading=!1,this.isOpen=!1):(this.searchResult=["Waiting for you to stop typing..."],this.loading=!0,this.isOpen=!0,this.debouncedGetAnswer()),this.isValid=!1},scheme:function(e,t){this.$jskos.compare(t,e)||(this.searchQuery="",this.searchResult=[],this.isOpen=!1,this.isValid=!1,this.loading=!1,this.searchSelected=-1),null!=e&&this._loadTypes(e)},typesForSchemes(){this.loading=!0,this.getAnswer()}},created:function(){this.debouncedGetAnswer=h.a.debounce(this.getAnswer,300),this.uniqueID=this.$util.generateID()},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)},methods:{chooseResult(e){this.closeResults(),this.searchSelected=-1,this.$router.push({path:this._getRouterUrl(this.searchResult[e])}),document.activeElement!=document.body&&document.activeElement.blur()},_getRouterUrl(e){let t=h.a.last(e),i={uri:t,inScheme:[this.scheme]};return i=this.saveObject(i,{type:"concept",scheme:this.scheme,provider:this.provider}),this.getRouterUrl(i,this.isLeft)},closeResults(){this.isOpen=!1},getAnswer:function(){this.searchResult=[],this.cancelToken=this.provider.getCancelToken();let e=this.searchQuery;this.provider.suggest(e,{scheme:this.scheme,types:this.selectedTypes,cancelToken:this.cancelToken.token}).then(t=>{e==this.searchQuery&&(this.loading=!1,this.searchResult=h.a.zip(t[1],t[2],t[3]),this.isValid=!0)}).catch(t=>{-1==t.toString().toLowerCase().indexOf("cancel")&&e==this.searchQuery&&(this.loading=!1,this.isValid=!1,this.searchResult=[["Error! Could not reach the API. "+t]])})},handleClickOutside(e){this.filterPopoverShow||this.$el.contains(e.target)||(this.isOpen=!1,this.searchSelected=-1),this.$refs.filterPopover&&!this.$refs.filterPopover.contains(e.target)&&(this.filterPopoverShow=!1)},onArrowDown(){this.preventHovering=!0,this.searchSelected>=this.searchResult.length-1?this.searchSelected=0:this.searchSelected+=1,this.scrollSelectedIntoView()},onArrowUp(){this.preventHovering=!0,this.searchSelected<=0?this.searchSelected=this.searchResult.length-1:this.searchSelected-=1,this.scrollSelectedIntoView()},scrollSelectedIntoView(){let e=document.getElementById(this.uniqueID+"-searchResult-"+this.searchSelected);var t=e.getBoundingClientRect(),i=e.parentElement.parentElement.getBoundingClientRect();t.bottom>i.bottom&&e.scrollIntoView(!1),t.top<i.top&&e.scrollIntoView()},onEnter(){let e;!this.loading&&this.isValid&&0!=this.searchResult.length&&(e=this.searchSelected<0||this.searchSelected>=this.searchResult.length?0:this.searchSelected,this.chooseResult(e))},mouseover(e){this.preventHovering||(this.searchSelected=e)},mousemove(){this.preventHovering=!1},focusSearch(){this.$refs.searchInput.focus(),this.isOpen=""!=this.searchQuery},highlightQueryInResult(e){if(!this.searchQuery.length)return e;let t=this.searchQuery,i=new RegExp(t,"ig"),s=i.exec(e),n=0,o="";while(s){let r=s.index;o+=h.a.escape(e.slice(n,r))+"<span class='conceptSearch-searchHighlight fontWeight-heavy'>"+h.a.escape(e.slice(r,r+t.length))+"</span>",n=r+t.length,s=i.exec(e)}return o+=h.a.escape(e.slice(n)),o},setSearchQuery(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.searchQuery=e,this.$nextTick(()=>{this.isOpen=t})},_loadTypes(e){this.loadTypes(e).then(e=>{this.selectedTypes||(this.selectedTypes=e.types.map(e=>e.uri))})},dragStartResult(e,t){let i=h.a.last(e),s=this.getObject({uri:i},{scheme:this.scheme,type:"concept"});this.dragStart(s,t)}}},ui=di,gi=(i("dd63"),i("b298"),Object(y["a"])(ui,hi,mi,!1,null,"fa12bc90",null)),fi=gi.exports,vi={name:"ConceptSchemeSelection",components:{ItemName:I["a"],ConceptSearch:fi},mixins:[A["a"]],props:{isLeft:{type:Boolean,default:!0}},data(){return{id:this.$util.generateID(),popoverShown:!1,schemeFilter:"",languageFilter:null,showAllSchemes:!1}},computed:{scheme(){return this.selected.scheme[this.isLeft]},isFiltered(){return""!=this.schemeFilter||null!=this.languageFilter||this.filteredSchemes.length<=10},filteredSchemes(){let e=this.schemeFilter.toLowerCase();return this.schemes.filter(t=>(Object.values(t.prefLabel||{}).find(t=>t.toLowerCase().startsWith(e))||(t.notation||[]).find(t=>t.toLowerCase().startsWith(e)))&&(null==this.languageFilter||(t.languages||[]).includes(this.languageFilter)))},languageFilterOptions(){let e=[{value:null,text:this.$t("schemeSelection.allLanguages")}],t=h.a.uniq([].concat(...this.schemes.map(e=>e.languages||[])));return e=e.concat(t.map(e=>({value:e,text:e}))),e}},watch:{popoverShown(e){e&&h.a.delay(()=>{this.focusAndSelectInput()},100)}},mounted(){document.addEventListener("click",this.handleClickOutside),this.enableShortcuts()},destroyed(){document.removeEventListener("click",this.handleClickOutside)},methods:{shortcutHandler(e){let t=e.action,i=e.isLeft;if(this.isLeft===i)switch(t){case"openSchemeSelection":this.scheme?this.togglePopover():this.focusAndSelectInput();break;case"openConceptSearch":this.$refs.conceptSearch&&this.$refs.conceptSearch.focusSearch();break}},handleClickOutside(e){this.popoverShown&&this.$refs.popover&&!this.$refs.popover.contains(e.target)&&this.hidePopover()},clearScheme(){this.$router.push({path:this.getRouterUrl(null,this.isLeft)}),h.a.delay(()=>{this.focusAndSelectInput()},100)},chooseFirst(e){e.preventDefault();let t=h.a.get(this,"$refs.firstScheme[0].item");t&&(this.$router.push({path:this.getRouterUrl(t,this.isLeft)}),this.hidePopover())},setConceptSearchQuery(e){this.$refs.conceptSearch&&this.$refs.conceptSearch.setSearchQuery(e)},toggleFavoriteScheme(e){this.$jskos.isContainedIn(e,this.favoriteSchemes)?this.$store.dispatch("removeSchemeFromFavorites",e):this.$store.dispatch("addSchemeToFavorites",e),this.focusAndSelectInput()},focusAndSelectInput(){let e=this.$refs.input.$el;e&&(e.focus(),e.select())},showPopover(){this.$root.$emit("bv::show::popover","".concat(this.id,"-expandButton"))},hidePopover(){this.$root.$emit("bv::hide::popover","".concat(this.id,"-expandButton"))},togglePopover(){this.popoverShown?this.hidePopover():this.showPopover()}}},yi=vi,bi=(i("7d6e"),i("0397"),Object(y["a"])(yi,ci,pi,!1,null,"17a52834",null)),_i=bi.exports;function $i(e,t){return Ci(e)||Si(e,t)||wi()}function wi(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Si(e,t){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){n=!0,o=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function Ci(e){if(Array.isArray(e))return e}const ki=i("ae72");ki.listen();var xi={name:"App",components:{TheNavbar:F,ConceptTree:kt,ItemDetail:Jt,MappingEditor:ve,MappingBrowser:rt,ResizingSlider:oi,LoadingIndicatorFull:He["a"],Minimizer:_t,ConceptSchemeSelection:_i},mixins:[M["a"],A["a"]],data(){return{loading:!1,itemDetailSettings:{left:{showTopConceptsInScheme:!1},right:{showTopConceptsInScheme:!1}},loadFromParametersOnce:h.a.once(this.loadFromParameters)}},computed:{selectedConceptLeft(){return this.selected.concept[!0]},selectedSchemeRight(){return this.selected.scheme[!1]},selectedConceptRight(){return this.selected.concept[!1]},selectedSchemeLeft(){return this.selected.scheme[!0]},locale(){return this.$i18n.locale},settingsLocale(){let e=this.$settings.locale;return(this.config.languages||[]).includes(e)||(e="en"),e},settingsLoaded(){return this.$store.state.settings.loaded},configLoaded(){return this.$store.state.configLoaded}},watch:{settingsLoaded(){this.$i18n.locale=this.settingsLocale,this.start()},$route(e,t){let i=e.query,s=t.query,n=["from","fromScheme","to","toScheme"],o=!1;for(let r of n){let e=s[r],t=i[r],n=e&&this._getObject({uri:e}),a=t&&this._getObject({uri:t});n&&a?this.$jskos.compare(n,a)||(o=!0):e!=t&&(o=!0)}o&&this.loadFromParameters()},selectedConceptLeft:{handler(e,t){h.a.isEqual(h.a.get(e,"prefLabel"),h.a.get(t,"prefLabel"))||this.insertPrefLabel(!0)},deep:!0},selectedSchemeRight(e,t){this.$jskos.compare(e,t)||h.a.delay(()=>{this.insertPrefLabel(!0)},50)},selectedConceptRight:{handler(e,t){h.a.isEqual(h.a.get(e,"prefLabel"),h.a.get(t,"prefLabel"))||this.insertPrefLabel(!1)},deep:!0},selectedSchemeLeft(e,t){this.$jskos.compare(e,t)||h.a.delay(()=>{this.insertPrefLabel(!1)},50)},locale(e,t){e!=t&&(this.$store.commit({type:"settings/set",prop:"locale",value:e}),h.a.delay(()=>{this.insertPrefLabel(!0,!1),this.insertPrefLabel(!1,!1)},300))},settingsLocale(e){e!=this.locale&&(this.$i18n.locale=e)},user(e,t){this.user&&this.user.name!=this.userName&&this.$store.commit({type:"settings/set",prop:"creator",value:this.user.name}),void 0!==t&&!t&&e?this.alert(this.$t("alerts.loggedIn"),null,"success"):t&&!e&&this.alert(this.$t("alerts.loggedOut"),null,"danger")},userUris(){this.userUris&&this.userUris.length&&(this.userUris.includes(this.creator.uri)||this.$store.commit({type:"settings/set",prop:"creatorUri",value:this.userUris[0]}))},userName(){this.authorized&&this.user&&this.userName!=this.user.name&&this.setName(this.userName).then(e=>{e||(this.$store.commit({type:"settings/set",prop:"creator",value:this.user.name}),this.alert(this.$t("alerts.nameError"),null,"danger"))})}},created(){this.schemes.length||(this.loading=!0),this.load(),document.onmousemove=(e=>{this.$store.commit({type:"setMousePosition",x:e.pageX,y:e.pageY})});let e=!1;setInterval(()=>{ai.a.get("./build-info.json",{headers:{"Cache-Control":"no-cache"}}).then(e=>e.data).then(t=>{t.gitCommit==this.config.buildInfo.gitCommit||e||(this.alert("".concat(this.$t("alerts.newVersionText"),' <a href="" class="alert-link">').concat(this.$t("alerts.newVersionLink"),"</a>"),0,"info"),e=!0)}).catch(()=>null)},6e4)},methods:{load(){this.$store.dispatch("loadConfig",h.a.get(this.$route,"query.config")).then(()=>this.$store.dispatch("settings/load")).then(()=>{this.config.auth&&this.$store.dispatch("auth/init",this.config.auth)})},start(){this.loadSchemes().then(()=>{this.loadFromParametersOnce(!0)})},insertPrefLabel(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.$settings.autoInsertLabels)return;let i=this.$util.prefLabel(this.selected.concept[e],null,!1),s=/^[\s\wäüöÄÜÖß]*\w/.exec(i);for(let n of t?[!0,!1]:[n]){let e=h.a.get(this,"$refs.conceptSchemeSelection".concat(n?"Left":"Right","[0]"));e&&e.setConceptSearchQuery(s?s[0]:"")}},refresh(e){"minimize"==e&&(this.itemDetailSettings.left.showTopConceptsInScheme=null!=this.conceptTreeLeft()&&"1"==this.conceptTreeLeft().$el.dataset.minimized,this.itemDetailSettings.right.showTopConceptsInScheme=null!=this.conceptTreeRight()&&"1"==this.conceptTreeRight().$el.dataset.minimized)},conceptTreeLeft(){return Array.isArray(this.$refs.conceptTreeLeft)?this.$refs.conceptTreeLeft[0]:this.$refs.conceptTreeLeft},conceptTreeRight(){return Array.isArray(this.$refs.conceptTreeRight)?this.$refs.conceptTreeRight[0]:this.$refs.conceptTreeRight},swapSides(){let e=this.$route.query;e=Object.assign(e,{from:e.to,fromScheme:e.toScheme,to:e.from,toScheme:e.fromScheme}),this.$router.push({query:e}),this.loadFromParameters(),h.a.delay(()=>{this.insertPrefLabel(!0,!1),this.insertPrefLabel(!1,!1)},300)},loadFromParameters(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;let t,i=this.$route.query,s=[];try{t=JSON.parse(i["mapping"])}catch(o){t=null}if(t&&e)for(let r of["from","to"])i[r+"Scheme"]||(i[r+"Scheme"]=h.a.get(t[r+"Scheme"],"uri"),this.$jskos.conceptsOfMapping(t,r).length&&(i[r]=h.a.get(this.$jskos.conceptsOfMapping(t,r),"[0].uri")));let n={scheme:{true:i.fromScheme,false:i.toScheme},concept:{true:i.from,false:i.to}};for(let r of[!0,!1]){let e=n.scheme[r],t=null;e&&(t=this._getObject({uri:e}));let i=null;t&&n.concept[r]&&(i=this.saveObject({uri:n.concept[r]},{scheme:t,type:"concept"})),s.push(this.setSelected({concept:i,scheme:t,isLeft:r,noQueryRefresh:!0}))}if(i["mapping"]){let e=new Promise(e=>{let t=null;try{t=JSON.parse(i["mapping"])}catch(o){}h.a.isEqual(t,{})?e(null):e(t)}),t=(i["identifier"]?this.getMappings({identifier:i["identifier"]}):Promise.resolve([])).then(t=>{if(i["identifier"]&&t.length){let i=t.find(e=>h.a.get(e,"_provider.has.canSaveMappings"))||t[0];return e.then(this.adjustMapping).then(e=>{return e?[e,i]:[i,i]})}return e.then(this.adjustMapping).then(e=>[e])}),n=["from","to"],r=["memberSet","memberList","memberChoice"];s.push(t.then(e=>{let t=$i(e,2),i=t[0],s=t[1],o=void 0===s?null:s,a=[];for(let l of n){let e=i["".concat(l,"Scheme")];for(let t of r)Array.isArray(i[l][t])&&h.a.forEach(i[l][t],(s,n)=>{a.push(this.loadDetails(s,{scheme:e}).then(e=>{i[l][t][n]=e}))})}return Promise.all(a).then(()=>{this.$store.commit({type:"mapping/set",mapping:i,original:o,noQueryRefresh:!0})})}))}s.length?Promise.all(s).then(()=>{this.loading=!1,Object(li["b"])(this.$store)}).catch(e=>{this.loading=!1,console.warn(e),this.alert("There was an error loading data from URL.",null,"danger")}):this.loading=!1}}},Mi=xi,Li=(i("7c55"),Object(y["a"])(Mi,n,o,!1,null,null,null)),Di=Li.exports,Ti=i("4360"),ji=i("41cb"),Ai=i("eab2");i("f9e3"),i("2dd8");i("56d7"),new s["a"]({el:"#app",store:Ti["a"],router:ji["a"],components:{App:Di},template:"<App/>",i18n:Ai["a"]})},c444:function(e,t,i){"use strict";var s=i("8424"),n=i.n(s);n.a},c93d:function(e,t,i){"use strict";var s=i("d08d"),n=i.n(s);n.a},cd28:function(e,t,i){"use strict";var s=i("0b99"),n=i.n(s);n.a},cf1c:function(e,t,i){},d08d:function(e,t,i){},d4b3:function(e,t,i){"use strict";var s=i("1c47"),n=i.n(s);n.a},dada:function(e,t,i){},dd63:function(e,t,i){"use strict";var s=i("074f"),n=i.n(s);n.a},ddcb:function(e,t,i){"use strict";var s=i("b552"),n=i.n(s);n.a},de0a:function(e,t,i){},e14d:function(e,t,i){"use strict";var s=i("1524"),n=i.n(s);n.a},e46c:function(e,t,i){"use strict";var s=i("de0a"),n=i.n(s);n.a},eb84:function(e,t,i){"use strict";var s=i("43e8"),n=i.n(s);n.a},f1aa:function(e,t,i){"use strict";var s=i("cf1c"),n=i.n(s);n.a},f4aa:function(e,t,i){"use strict";var s=i("1b3d"),n=i.n(s);n.a}});